-- Test --
  logo
  ../doc/tests/logo.md:5

-- Code --

 1: mod microcad {
 2:     use std::geo2d::*;
 3:     use std::ops::*;
 4: 
 5:     sketch HalfCircle(radius: Length) {
 6:         Circle(radius) - Rect(size = radius * 2).translate(y = radius );
 7:     }
 8: 
 9:     sketch IconElement( radius: Length ) {
10:         c = HalfCircle(radius);
11:         r = Rect(width = radius, height = radius * 2);
12:         c.translate(y = radius) | r.translate(x = -radius/2 );
13:     }
14: 
15:     pub sketch Icon( radius: Length ) {
16:         prop gap = radius / 5;
17:         IconElement(radius)
18:             .translate(x = -radius-gap, y = 0mm, z = 0mm)
19:             .rotate(z = [0째, -90째, -180째, -270째]); 
20:     }
21: 
22:     pub sketch Micro( radius: Length, thickness: Length ) {
23:         u = HalfCircle(radius) - HalfCircle(radius-thickness);
24:         r_l = Rect(width = thickness, height = radius * 3);
25:         r_r = Rect(width = thickness, height = radius * 2);
26:         u.translate(y = radius/2)
27:             | r_l.translate(x = -(radius-thickness/2) ) 
28:             | r_r.translate(x = radius-thickness/2, y=radius/2 );
29:     }
30: }
31: 
32: use std::ops::*;
33: 
34: radius = 1cm;
35: thickness = 4mm;
36: icon = microcad::Icon(radius);
37: icon;
38: 
39: microcad::Micro(radius, thickness).translate(x=radius*2+icon.gap, y=-radius/2);
40: 

-- Output --
-- Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) logo::microcad::Icon(radius=10mm) ->
      - gap = 2mm
      - radius = 10mm
      Multiplicity ->
        Workpiece(op) std::ops::rotate(x=0rad, y=0rad, z=0rad) ->
          - matrix = Matrix3 [[1.0, 0.0, 0.0], [0.0, 1.0, 0.0], [0.0, 0.0, 1.0]]
          Transform __builtin::ops::rotate(matrix=Matrix3 [[1.0, 0.0, 0.0], [0.0, 1.0, 0.0], [0.0, 0.0, 1.0]]) ->
            Workpiece(op) std::ops::translate(x=-12mm, y=0mm, z=0mm) (root) ->
              - x = -12mm
              - y = 0mm
              - z = 0mm
              Transform __builtin::ops::translate(x=-12, y=0, z=0) ->
                Workpiece(sketch) logo::microcad::IconElement(radius=10mm) (root) ->
                  - radius = 10mm
                  Operation union() ->
                    Group ->
                      Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                        - x = 0mm
                        - y = 10mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=0, y=10, z=0) ->
                          Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) (root) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Primitive2D __builtin::geo2d::Circle(cx=0, cy=0, radius=10) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0, y=10, z=0) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) (root) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20, width=20, x=-10, y=-10) ->
                      Workpiece(op) std::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                        - x = -5mm
                        - y = 0mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=-5, y=0, z=0) ->
                          Workpiece(sketch) std::geo2d::Rect(height=20mm, width=10mm) (root) ->
                            - height = 20mm
                            - width = 10mm
                            - x = -5mm
                            - y = -10mm
                            Primitive2D __builtin::geo2d::Rect(height=20, width=10, x=-5, y=-10) ->
        Workpiece(op) std::ops::rotate(x=0rad, y=0rad, z=-1.5707963267949rad) ->
          - matrix = Matrix3 [[6.123233995736766e-17, -1.0, 0.0], [1.0, 6.123233995736766e-17, 0.0], [0.0, 0.0, 1.0]]
          Transform __builtin::ops::rotate(matrix=Matrix3 [[6.123233995736766e-17, -1.0, 0.0], [1.0, 6.123233995736766e-17, 0.0], [0.0, 0.0, 1.0]]) ->
            Workpiece(op) std::ops::translate(x=-12mm, y=0mm, z=0mm) (root) ->
              - x = -12mm
              - y = 0mm
              - z = 0mm
              Transform __builtin::ops::translate(x=-12, y=0, z=0) ->
                Workpiece(sketch) logo::microcad::IconElement(radius=10mm) (root) ->
                  - radius = 10mm
                  Operation union() ->
                    Group ->
                      Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                        - x = 0mm
                        - y = 10mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=0, y=10, z=0) ->
                          Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) (root) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Primitive2D __builtin::geo2d::Circle(cx=0, cy=0, radius=10) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0, y=10, z=0) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) (root) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20, width=20, x=-10, y=-10) ->
                      Workpiece(op) std::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                        - x = -5mm
                        - y = 0mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=-5, y=0, z=0) ->
                          Workpiece(sketch) std::geo2d::Rect(height=20mm, width=10mm) (root) ->
                            - height = 20mm
                            - width = 10mm
                            - x = -5mm
                            - y = -10mm
                            Primitive2D __builtin::geo2d::Rect(height=20, width=10, x=-5, y=-10) ->
        Workpiece(op) std::ops::rotate(x=0rad, y=0rad, z=-3.14159265358979rad) ->
          - matrix = Matrix3 [[-1.0, -1.2246467991473532e-16, 0.0], [1.2246467991473532e-16, -1.0, 0.0], [0.0, 0.0, 1.0]]
          Transform __builtin::ops::rotate(matrix=Matrix3 [[-1.0, -1.2246467991473532e-16, 0.0], [1.2246467991473532e-16, -1.0, 0.0], [0.0, 0.0, 1.0]]) ->
            Workpiece(op) std::ops::translate(x=-12mm, y=0mm, z=0mm) (root) ->
              - x = -12mm
              - y = 0mm
              - z = 0mm
              Transform __builtin::ops::translate(x=-12, y=0, z=0) ->
                Workpiece(sketch) logo::microcad::IconElement(radius=10mm) (root) ->
                  - radius = 10mm
                  Operation union() ->
                    Group ->
                      Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                        - x = 0mm
                        - y = 10mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=0, y=10, z=0) ->
                          Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) (root) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Primitive2D __builtin::geo2d::Circle(cx=0, cy=0, radius=10) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0, y=10, z=0) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) (root) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20, width=20, x=-10, y=-10) ->
                      Workpiece(op) std::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                        - x = -5mm
                        - y = 0mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=-5, y=0, z=0) ->
                          Workpiece(sketch) std::geo2d::Rect(height=20mm, width=10mm) (root) ->
                            - height = 20mm
                            - width = 10mm
                            - x = -5mm
                            - y = -10mm
                            Primitive2D __builtin::geo2d::Rect(height=20, width=10, x=-5, y=-10) ->
        Workpiece(op) std::ops::rotate(x=0rad, y=0rad, z=-4.71238898038469rad) ->
          - matrix = Matrix3 [[-1.8369701987210297e-16, 1.0, 0.0], [-1.0, -1.8369701987210297e-16, 0.0], [0.0, 0.0, 1.0]]
          Transform __builtin::ops::rotate(matrix=Matrix3 [[-1.8369701987210297e-16, 1.0, 0.0], [-1.0, -1.8369701987210297e-16, 0.0], [0.0, 0.0, 1.0]]) ->
            Workpiece(op) std::ops::translate(x=-12mm, y=0mm, z=0mm) (root) ->
              - x = -12mm
              - y = 0mm
              - z = 0mm
              Transform __builtin::ops::translate(x=-12, y=0, z=0) ->
                Workpiece(sketch) logo::microcad::IconElement(radius=10mm) (root) ->
                  - radius = 10mm
                  Operation union() ->
                    Group ->
                      Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                        - x = 0mm
                        - y = 10mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=0, y=10, z=0) ->
                          Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) (root) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Primitive2D __builtin::geo2d::Circle(cx=0, cy=0, radius=10) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0, y=10, z=0) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) (root) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20, width=20, x=-10, y=-10) ->
                      Workpiece(op) std::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                        - x = -5mm
                        - y = 0mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=-5, y=0, z=0) ->
                          Workpiece(sketch) std::geo2d::Rect(height=20mm, width=10mm) (root) ->
                            - height = 20mm
                            - width = 10mm
                            - x = -5mm
                            - y = -10mm
                            Primitive2D __builtin::geo2d::Rect(height=20, width=10, x=-5, y=-10) ->
    Workpiece(op) std::ops::translate(x=22mm, y=-5mm, z=0mm) ->
      - x = 22mm
      - y = -5mm
      - z = 0mm
      Transform __builtin::ops::translate(x=22, y=-5, z=0) ->
        Workpiece(sketch) logo::microcad::Micro(radius=10mm, thickness=4mm) (root) ->
          - radius = 10mm
          - thickness = 4mm
          Operation union() ->
            Group ->
              Operation union() ->
                Group ->
                  Workpiece(op) std::ops::translate(x=0mm, y=5mm, z=0mm) ->
                    - x = 0mm
                    - y = 5mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0, y=5, z=0) ->
                      Operation subtract() (root) ->
                        Group ->
                          Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Primitive2D __builtin::geo2d::Circle(cx=0, cy=0, radius=10) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0, y=10, z=0) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) (root) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20, width=20, x=-10, y=-10) ->
                          Workpiece(sketch) logo::microcad::HalfCircle(radius=6mm) ->
                            - radius = 6mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=6mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 6mm
                                  Primitive2D __builtin::geo2d::Circle(cx=0, cy=0, radius=6) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=6mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 6mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0, y=6, z=0) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=12mm) (root) ->
                                      - height = 12mm
                                      - width = 12mm
                                      - x = -6mm
                                      - y = -6mm
                                      Primitive2D __builtin::geo2d::Rect(height=12, width=12, x=-6, y=-6) ->
                  Workpiece(op) std::ops::translate(x=-8mm, y=0mm, z=0mm) ->
                    - x = -8mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=-8, y=0, z=0) ->
                      Workpiece(sketch) std::geo2d::Rect(height=30mm, width=4mm) (root) ->
                        - height = 30mm
                        - width = 4mm
                        - x = -2mm
                        - y = -15mm
                        Primitive2D __builtin::geo2d::Rect(height=30, width=4, x=-2, y=-15) ->
              Workpiece(op) std::ops::translate(x=8mm, y=5mm, z=0mm) ->
                - x = 8mm
                - y = 5mm
                - z = 0mm
                Transform __builtin::ops::translate(x=8, y=5, z=0) ->
                  Workpiece(sketch) std::geo2d::Rect(height=20mm, width=4mm) (root) ->
                    - height = 20mm
                    - width = 4mm
                    - x = -2mm
                    - y = -10mm
                    Primitive2D __builtin::geo2d::Rect(height=20, width=4, x=-2, y=-10) ->

Export successful.
-- Test Result --
OK
