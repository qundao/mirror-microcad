-- Test --
        Test name: value_declarations
  Expected result: ok
      Source file: ../books/tests/src/value_declarations.md:18
        Test path: ../books/tests/src/.test

-- Code --

  18:   use std::debug::*;
  19:   
  20:   mod module {
  21:       
  22:       use std::debug::*;
  23:   
  24:       // private module variable
  25:       const value = 1;
  26:       // public module variable
  27:       pub pub_value = 2;
  28:   
  29:       pub mod pub_sub_module {
  30:           // pre-init code
  31:           use std::debug::*;
  32:   
  33:           // private module variable
  34:           const value = 3;
  35:           // public module variable
  36:           pub pub_value = 4;
  37:   
  38:           // private workbench
  39:           sketch PrivateWorkbench() {}
  40:   
  41:           // public workbench
  42:           pub sketch Workbench(param = 5) {
  43:               const sketch_local = 6;
  44:   
  45:               init(alt_param = 7) {
  46:                   init_local = 8;
  47:   
  48:                   assert_eq([super::value, 1]);
  49:                   assert_eq([super::pub_value, 2]);
  50:                   assert_eq([value, 3]);
  51:                   assert_eq([pub_value, 4]);
  52:                   assert_invalid(param);
  53:                   assert_eq([sketch_local, 6]);
  54:                   assert_eq([alt_param, 7]);
  55:                   assert_eq([init_local, 8]);
  56:   
  57:                   prop param = 5; // needed to compile
  58:               }
  59:   
  60:               // property of sketch
  61:               prop property = 9;
  62:   
  63:               // post init code
  64:               assert_eq([super::value,1]);
  65:               assert_eq([super::pub_value, 2]);
  66:               assert_eq([value, 3]);
  67:               assert_eq([pub_value, 4]);
  68:               assert_eq([param, 5]);
  69:               assert_eq([sketch_local, 6]);
  70:               assert_invalid(alt_param);
  71:               assert_invalid(init_local);
  72:               assert_eq([property, 9]);
  73:   
  74:               function();
  75:           }
  76:   
  77:           fn function(fn_param = 10) {
  78:               assert_eq([super::value, 1]);
  79:               assert_eq([super::pub_value, 2]);
  80:               assert_eq([value, 3]);
  81:               assert_eq([pub_value, 4]);
  82:               assert_invalid(param);
  83:               // assert_invalid(Workbench);
  84:               assert_eq([fn_param, 10]);
  85:   
  86:               return 0;
  87:           }
  88:       }
  89:   
  90:       pub fn function(fn_param = 11) {
  91:           assert_eq([value, 1]);
  92:           assert_eq([pub_value, 2]);
  93:           assert_invalid(pub_sub_module::value);
  94:           assert_eq([pub_sub_module::pub_value, 4]);
  95:           assert_invalid(Workbench);
  96:           assert_invalid(PrivateWorkbench);
  97:           assert_eq([fn_param, 11]);
  98:           
  99:           return 0;
 100:       }
 101:   }
 102:   
 103:   // source file code 
 104:   assert_invalid(module::value);
 105:   assert_eq([module::pub_value, 2]);
 106:   assert_invalid(module::pub_sub_module::value);
 107:   assert_eq([module::pub_sub_module::pub_value, 4]);
 108:   assert_eq([module::pub_sub_module::Workbench().property, 9]);
 109:   assert_invalid(module::pub_sub_module::PrivateWorkbench);
 110:   assert_eq([module::function(), 0]);

-- Test Result --
OK
