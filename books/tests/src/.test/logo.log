-- Test --
  logo
  ../books/tests/src/logo.md:6

-- Code --

   6:   mod microcad {
   7:       use std::geo2d::*;
   8:       use std::ops::*;
   9:   
  10:       sketch HalfCircle(radius: Length) {
  11:           Circle(radius) - Rect(size = radius * 2).translate(y = radius );
  12:       }
  13:   
  14:       sketch IconElement( radius: Length ) {
  15:           c = HalfCircle(radius);
  16:           r = Rect(width = radius, height = radius * 2);
  17:           c.translate(y = radius) | r.translate(x = -radius/2 );
  18:       }
  19:   
  20:       pub sketch Icon( radius: Length ) {
  21:           prop gap = radius / 5;
  22:           IconElement(radius)
  23:               .translate(x = -radius-gap, y = 0mm, z = 0mm)
  24:               .rotate(z = [0째, -90째, -180째, -270째]); 
  25:       }
  26:   
  27:       pub sketch Micro( radius: Length, thickness: Length ) {
  28:           u = HalfCircle(radius) - HalfCircle(radius-thickness);
  29:           r_l = Rect(width = thickness, height = radius * 3);
  30:           r_r = Rect(width = thickness, height = radius * 2);
  31:           u.translate(y = radius/2)
  32:               | r_l.translate(x = -(radius-thickness/2) ) 
  33:               | r_r.translate(x = radius-thickness/2, y=radius/2 );
  34:       }
  35:   }
  36:   
  37:   use std::ops::*;
  38:   
  39:   radius = 1cm;
  40:   thickness = 4mm;
  41:   icon = microcad::Icon(radius);
  42:   icon;
  43:   
  44:   microcad::Micro(radius, thickness).translate(x=radius*2+icon.gap, y=-radius/2);
  45:   

-- Output --

-- Errors --
-- Model --
  Group (root) ->
    icon: Workpiece(sketch) logo::microcad::Icon(radius=10mm) ->
      - gap = 2mm
      - radius = 10mm
      Multiplicity ->
        Workpiece(op) std::ops::rotate(x=0rad, y=0rad, z=0rad) ->
          - matrix = Matrix3 [[1.0, 0.0, 0.0], [0.0, 1.0, 0.0], [0.0, 0.0, 1.0]]
          Transform __builtin::ops::rotate(matrix=Matrix3 [[1.0, 0.0, 0.0], [0.0, 1.0, 0.0], [0.0, 0.0, 1.0]]) ->
            Workpiece(op) std::ops::translate(x=-12mm, y=0mm, z=0mm) ->
              - x = -12mm
              - y = 0mm
              - z = 0mm
              Transform __builtin::ops::translate(x=-12mm, y=0mm, z=0mm) ->
                Workpiece(sketch) logo::microcad::IconElement(radius=10mm) ->
                  - radius = 10mm
                  Operation union() ->
                    Group ->
                      Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                        - x = 0mm
                        - y = 10mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=0mm, y=10mm, z=0mm) ->
                          c: Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                                    Primitive2D __builtin::geo2d::Circle(radius=10mm) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20mm, width=20mm, x=-10mm, y=-10mm) ->
                      Workpiece(op) std::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                        - x = -5mm
                        - y = 0mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                          r: Workpiece(sketch) std::geo2d::Rect(height=20mm, width=10mm) ->
                            - height = 20mm
                            - width = 10mm
                            - x = -5mm
                            - y = -10mm
                            Primitive2D __builtin::geo2d::Rect(height=20mm, width=10mm, x=-5mm, y=-10mm) ->
        Workpiece(op) std::ops::rotate(x=0rad, y=0rad, z=-1.5707963267949rad) ->
          - matrix = Matrix3 [[6.123233995736766e-17, -1.0, 0.0], [1.0, 6.123233995736766e-17, 0.0], [0.0, 0.0, 1.0]]
          Transform __builtin::ops::rotate(matrix=Matrix3 [[6.123233995736766e-17, -1.0, 0.0], [1.0, 6.123233995736766e-17, 0.0], [0.0, 0.0, 1.0]]) ->
            Workpiece(op) std::ops::translate(x=-12mm, y=0mm, z=0mm) ->
              - x = -12mm
              - y = 0mm
              - z = 0mm
              Transform __builtin::ops::translate(x=-12mm, y=0mm, z=0mm) ->
                Workpiece(sketch) logo::microcad::IconElement(radius=10mm) ->
                  - radius = 10mm
                  Operation union() ->
                    Group ->
                      Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                        - x = 0mm
                        - y = 10mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=0mm, y=10mm, z=0mm) ->
                          c: Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                                    Primitive2D __builtin::geo2d::Circle(radius=10mm) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20mm, width=20mm, x=-10mm, y=-10mm) ->
                      Workpiece(op) std::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                        - x = -5mm
                        - y = 0mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                          r: Workpiece(sketch) std::geo2d::Rect(height=20mm, width=10mm) ->
                            - height = 20mm
                            - width = 10mm
                            - x = -5mm
                            - y = -10mm
                            Primitive2D __builtin::geo2d::Rect(height=20mm, width=10mm, x=-5mm, y=-10mm) ->
        Workpiece(op) std::ops::rotate(x=0rad, y=0rad, z=-3.14159265358979rad) ->
          - matrix = Matrix3 [[-1.0, -1.2246467991473532e-16, 0.0], [1.2246467991473532e-16, -1.0, 0.0], [0.0, 0.0, 1.0]]
          Transform __builtin::ops::rotate(matrix=Matrix3 [[-1.0, -1.2246467991473532e-16, 0.0], [1.2246467991473532e-16, -1.0, 0.0], [0.0, 0.0, 1.0]]) ->
            Workpiece(op) std::ops::translate(x=-12mm, y=0mm, z=0mm) ->
              - x = -12mm
              - y = 0mm
              - z = 0mm
              Transform __builtin::ops::translate(x=-12mm, y=0mm, z=0mm) ->
                Workpiece(sketch) logo::microcad::IconElement(radius=10mm) ->
                  - radius = 10mm
                  Operation union() ->
                    Group ->
                      Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                        - x = 0mm
                        - y = 10mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=0mm, y=10mm, z=0mm) ->
                          c: Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                                    Primitive2D __builtin::geo2d::Circle(radius=10mm) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20mm, width=20mm, x=-10mm, y=-10mm) ->
                      Workpiece(op) std::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                        - x = -5mm
                        - y = 0mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                          r: Workpiece(sketch) std::geo2d::Rect(height=20mm, width=10mm) ->
                            - height = 20mm
                            - width = 10mm
                            - x = -5mm
                            - y = -10mm
                            Primitive2D __builtin::geo2d::Rect(height=20mm, width=10mm, x=-5mm, y=-10mm) ->
        Workpiece(op) std::ops::rotate(x=0rad, y=0rad, z=-4.71238898038469rad) ->
          - matrix = Matrix3 [[-1.8369701987210297e-16, 1.0, 0.0], [-1.0, -1.8369701987210297e-16, 0.0], [0.0, 0.0, 1.0]]
          Transform __builtin::ops::rotate(matrix=Matrix3 [[-1.8369701987210297e-16, 1.0, 0.0], [-1.0, -1.8369701987210297e-16, 0.0], [0.0, 0.0, 1.0]]) ->
            Workpiece(op) std::ops::translate(x=-12mm, y=0mm, z=0mm) ->
              - x = -12mm
              - y = 0mm
              - z = 0mm
              Transform __builtin::ops::translate(x=-12mm, y=0mm, z=0mm) ->
                Workpiece(sketch) logo::microcad::IconElement(radius=10mm) ->
                  - radius = 10mm
                  Operation union() ->
                    Group ->
                      Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                        - x = 0mm
                        - y = 10mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=0mm, y=10mm, z=0mm) ->
                          c: Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                                    Primitive2D __builtin::geo2d::Circle(radius=10mm) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20mm, width=20mm, x=-10mm, y=-10mm) ->
                      Workpiece(op) std::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                        - x = -5mm
                        - y = 0mm
                        - z = 0mm
                        Transform __builtin::ops::translate(x=-5mm, y=0mm, z=0mm) ->
                          r: Workpiece(sketch) std::geo2d::Rect(height=20mm, width=10mm) ->
                            - height = 20mm
                            - width = 10mm
                            - x = -5mm
                            - y = -10mm
                            Primitive2D __builtin::geo2d::Rect(height=20mm, width=10mm, x=-5mm, y=-10mm) ->
    Workpiece(op) std::ops::translate(x=22mm, y=-5mm, z=0mm) ->
      - x = 22mm
      - y = -5mm
      - z = 0mm
      Transform __builtin::ops::translate(x=22mm, y=-5mm, z=0mm) ->
        Workpiece(sketch) logo::microcad::Micro(radius=10mm, thickness=4mm) ->
          - radius = 10mm
          - thickness = 4mm
          Operation union() ->
            Group ->
              Operation union() ->
                Group ->
                  Workpiece(op) std::ops::translate(x=0mm, y=5mm, z=0mm) ->
                    - x = 0mm
                    - y = 5mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=5mm, z=0mm) ->
                      u: Operation subtract() ->
                        Group ->
                          Workpiece(sketch) logo::microcad::HalfCircle(radius=10mm) ->
                            - radius = 10mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 10mm
                                  Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                                    Primitive2D __builtin::geo2d::Circle(radius=10mm) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 10mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0mm, y=10mm, z=0mm) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=20mm) ->
                                      - height = 20mm
                                      - width = 20mm
                                      - x = -10mm
                                      - y = -10mm
                                      Primitive2D __builtin::geo2d::Rect(height=20mm, width=20mm, x=-10mm, y=-10mm) ->
                          Workpiece(sketch) logo::microcad::HalfCircle(radius=6mm) ->
                            - radius = 6mm
                            Operation subtract() ->
                              Group ->
                                Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=6mm) ->
                                  - center = (x=0mm, y=0mm)
                                  - radius = 6mm
                                  Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                                    Primitive2D __builtin::geo2d::Circle(radius=6mm) ->
                                Workpiece(op) std::ops::translate(x=0mm, y=6mm, z=0mm) ->
                                  - x = 0mm
                                  - y = 6mm
                                  - z = 0mm
                                  Transform __builtin::ops::translate(x=0mm, y=6mm, z=0mm) ->
                                    Workpiece(sketch) std::geo2d::Rect(size=12mm) ->
                                      - height = 12mm
                                      - width = 12mm
                                      - x = -6mm
                                      - y = -6mm
                                      Primitive2D __builtin::geo2d::Rect(height=12mm, width=12mm, x=-6mm, y=-6mm) ->
                  Workpiece(op) std::ops::translate(x=-8mm, y=0mm, z=0mm) ->
                    - x = -8mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=-8mm, y=0mm, z=0mm) ->
                      r_l: Workpiece(sketch) std::geo2d::Rect(height=30mm, width=4mm) ->
                        - height = 30mm
                        - width = 4mm
                        - x = -2mm
                        - y = -15mm
                        Primitive2D __builtin::geo2d::Rect(height=30mm, width=4mm, x=-2mm, y=-15mm) ->
              Workpiece(op) std::ops::translate(x=8mm, y=5mm, z=0mm) ->
                - x = 8mm
                - y = 5mm
                - z = 0mm
                Transform __builtin::ops::translate(x=8mm, y=5mm, z=0mm) ->
                  r_r: Workpiece(sketch) std::geo2d::Rect(height=20mm, width=4mm) ->
                    - height = 20mm
                    - width = 4mm
                    - x = -2mm
                    - y = -10mm
                    Primitive2D __builtin::geo2d::Rect(height=20mm, width=4mm, x=-2mm, y=-10mm) ->

Export of "../books/tests/src/.test/logo-out.svg" successful.
-- Test Result --
OK
