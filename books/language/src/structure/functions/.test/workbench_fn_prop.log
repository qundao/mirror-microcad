
-- Test --
        Test name: workbench_fn_prop
  Expected result: fail
      Source file: ../books/language/src/structure/functions/workbench_functions.md:54
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  54:   sketch PunchedDisk(radius: Length) {
  55:       use std::geo2d::Circle;
  56:   
  57:       fn inner() {
  58:           prop hole = radius/2;  // error: prop not allowed in function
  59:           hole
  60:       }
  61:   
  62:       prop hole = radius/2;      // correct prop definition
  63:   
  64:       Circle(radius) - Circle(radius = inner());
  65:   }
  66:   
  67:   PunchedDisk(1cm);

-- No Output --
-- Errors --
  × error: 58:9: Property assigment is not allowed within function
    ╭─[../books/language/src/structure/functions/workbench_functions.md:58:9]
 56 │ 
 57 │     fn inner() {
    ·     ─┬
    ·      ╰── Within this function
 58 │         prop hole = radius/2;  // error: prop not allowed in function
    ·         ──────────┬─────────
    ·                   ╰── This property assigment is not allowed
 59 │         hole
    ╰────
  help: property assigment is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED
