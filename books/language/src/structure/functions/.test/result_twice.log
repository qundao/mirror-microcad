
-- Test --
        Test name: result_twice
  Expected result: fail
      Source file: ../books/language/src/structure/functions/result.md:40
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  40:   fn pow( x: Scalar, n: Integer ) -> Scalar {
  41:       if n > 1 {
  42:           x * pow(x, n-1)
  43:       } else if n < 1 {
  44:           1.0 / x / pow(x, -n)
  45:       }
  46:       1.0 // error: without else this line would return a second value
  47:   }
  48:   
  49:   std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
  50:   std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);

-- No Output --
-- Errors --
  ⚠ warning: 40:9: Unused local x.
    ╭─[../books/language/src/structure/functions/result.md:40:9]
 40 │ fn pow( x: Scalar, n: Integer ) -> Scalar {
    ·         ┬
    ·         ╰── Unused local x.
 41 │     if n > 1 {
    ╰────
  × error: 49:23: Assertion failed: Values differ: [1, 64]
    ╭─[../books/language/src/structure/functions/result.md:49:23]
 48 │ 
 49 │ std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
    ·                       ──────────┬─────────
    ·                                 ╰── Assertion failed: Values differ: [1, 64]
 50 │ std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);
    ╰────
  ⚠ warning: 40:9: Unused local x.
    ╭─[../books/language/src/structure/functions/result.md:40:9]
 40 │ fn pow( x: Scalar, n: Integer ) -> Scalar {
    ·         ┬
    ·         ╰── Unused local x.
 41 │     if n > 1 {
    ╰────
  × error: 50:23: Assertion failed: Values differ: [1, 0.015625]
    ╭─[../books/language/src/structure/functions/result.md:50:23]
 49 │ std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
 50 │ std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);
    ·                       ────────────┬────────────
    ·                                   ╰── Assertion failed: Values differ: [1, 0.015625]
    ╰────
Expected error(s) which did not occur in line(s): 46
Unexpected warnings(s) which did occur in line(s): 40
-- Test Result --
FAILS WITH WRONG ERRORS
