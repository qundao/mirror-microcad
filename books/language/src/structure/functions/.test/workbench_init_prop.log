
-- Test --
        Test name: workbench_init_prop
  Expected result: fail
      Source file: ../books/language/src/structure/functions/workbench_functions.md:77
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  77:   sketch PunchedDisk(radius: Length) {
  78:       use std::geo2d::Circle;
  79:   
  80:       init(diameter: Length) { 
  81:           prop radius = diameter/2; // error: prop not allowed in init
  82:       }
  83:       
  84:       init(d: Length) { 
  85:           radius = d/2;             // correct way to set radius
  86:       }
  87:   
  88:       // Accessing property in a function is ok
  89:       fn inner() { radius/2 }
  90:   
  91:       Circle(radius) - Circle(radius = inner());
  92:   }
  93:   
  94:   PunchedDisk(diameter=1cm);
  95:   PunchedDisk(d=1cm);

-- No Output --
-- Errors --
  × error: 5:9: Assignment statement not available here
    ╭─[../books/language/src/structure/functions/workbench_functions.md:81:9]
 80 │     init(diameter: Length) { 
 81 │         prop radius = diameter/2; // error: prop not allowed in init
    ·         ────────────┬────────────
    ·                     ╰── error: 5:9: Assignment statement not available here
 82 │     }
    ╰────
-- Test Result --
FAILS AS EXPECTED
