
-- Test --
        Test name: property_no_prop_in_initializer
  Expected result: fail
      Source file: ../books/language/src/structure/workbenches/elements/properties.md:71
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  71:   sketch Wheel(radius: Length, thickness = 5cm) {
  72:       init(radius: Length, inner: Length) {
  73:           thickness = radius - inner;
  74:   
  75:           prop center = radius - inner;       // error: do not use prop here
  76:       }
  77:       
  78:       prop center = radius - thickness / 2;   // here it's ok
  79:   }
  80:   center = Wheel(radius = 1cm, inner = 0.5cm).center;
  81:   
  82:   std::debug::assert_eq([ center, 1.75cm ] );

-- No Output --
-- Errors --
  × error: 75:9: Property assignment is not allowed within initializer
    ╭─[../books/language/src/structure/workbenches/elements/properties.md:75:9]
 71 │ sketch Wheel(radius: Length, thickness = 5cm) {
 72 │     init(radius: Length, inner: Length) {
    ·     ──┬─
    ·       ╰── Within this initializer
 73 │         thickness = radius - inner;
 74 │ 
 75 │         prop center = radius - inner;       // error: do not use prop here
    ·         ──────────────┬─────────────
    ·                       ╰── This property assignment is not allowed
 76 │     }
    ╰────
  help: property assignment is only allowed within workbench
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED
