
-- Test --
        Test name: pre_init_code
  Expected result: ok
      Source file: ../books/language/src/structure/workbenches/README.md:175
        Test path: ../books/language/src/structure/workbenches/.test

-- Code --

 175:   sketch Wheel(radius: Length) {
 176:       // init code
 177:       const FACTOR = 2.0;
 178:   
 179:       // initializer
 180:       init(diameter: Length) { radius = into_radius(diameter); }
 181:   
 182:       // function
 183:       fn into_radius( diameter: Length ) {
 184:           // use constant FACTOR from init code
 185:           return diameter / FACTOR;
 186:       }
 187:   
 188:       // set property diameter and use FACTOR from init code
 189:       prop diameter = radius * FACTOR;
 190:       
 191:       // code body
 192:       std::geo2d::Circle(radius);
 193:   }
 194:   
 195:   __builtin::debug::assert(Wheel(radius = 5cm).radius == 5cm);
 196:   __builtin::debug::assert(Wheel(radius = 5cm).diameter == 10cm);
 197:   __builtin::debug::assert(Wheel(diameter = 10cm).diameter == 10cm);

-- No Output --
-- No Errors --
-- No Model --
-- Test Result --
OK
