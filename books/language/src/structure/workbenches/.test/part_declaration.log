-- Test --
        Test name: part_declaration
  Expected result: ok
      Source file: ../books/language/src/structure/workbenches/README.md:33
        Test path: ../books/language/src/structure/workbenches/.test
      Banner file: ../books/language/src/structure/workbenches/.test/part_declaration.svg
         Log file: ../books/language/src/structure/workbenches/.test/part_declaration.log
 Output file stem: ../books/language/src/structure/workbenches/.test/part_declaration-out

-- Code --

  33:   // Sketch with a `radius` as building plan.
  34:   // Which will automatically become a property.
  35:   sketch Wheel(radius: Length) {
  36:       
  37:       // Init code...
  38:       const FACTOR = 2;
  39:   
  40:       // Initializer #1
  41:       init(diameter: Length) {
  42:           // must set `radius`
  43:           radius = diameter / FACTOR;
  44:       }
  45:   
  46:       // No code in between!
  47:   
  48:       // Initializer #2
  49:       init(r: Length) {
  50:           // must set `radius`
  51:           radius = r;
  52:       }
  53:   
  54:       // Function (sub routine)
  55:       fn into_diameter(r: Length) {
  56:           return r * FACTOR;
  57:       }
  58:   
  59:       // Building code...
  60:   
  61:       // Set a property which can be seen from outside.
  62:       prop diameter = into_diameter(radius);
  63:       
  64:       // Local variable `r`
  65:       r = radius;
  66:       
  67:       // Create a circle.
  68:       std::geo2d::Circle(r);
  69:   }
  70:   
  71:   use std::debug::*;
  72:   
  73:   // Call sketch with diameter.
  74:   d = Wheel(diameter = 2cm);
  75:   // Check radius property.
  76:   assert_eq([d.radius, 1cm]);
  77:   
  78:   // Call sketch with radius.
  79:   r = Wheel(radius = 2cm);
  80:   // Check diameter property.
  81:   assert_eq([r.diameter, 4cm]);
  82:   
  83:   d - r;

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Operation subtract() ->
      Group ->
        d: Workpiece(sketch) part_declaration::Wheel(diameter=20mm) ->
          - diameter = 20mm
          - radius = 10mm
          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
            - center = (x=0mm, y=0mm)
            - radius = 10mm
            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
              Primitive2D __builtin::geo2d::Circle(radius=10mm) ->
        r: Workpiece(sketch) part_declaration::Wheel(radius=20mm) ->
          - diameter = 40mm
          - radius = 20mm
          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=20mm) ->
            - center = (x=0mm, y=0mm)
            - radius = 20mm
            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
              Primitive2D __builtin::geo2d::Circle(radius=20mm) ->

Export error: Render error: Nothing to render
-- Test Result --
OK
