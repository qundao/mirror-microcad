
-- Test --
        Test name: const_assignment_fn
  Expected result: fail
      Source file: ../books/language/src/assignments/const.md:144
        Test path: ../books/language/src/assignments/.test

-- Code --

 144:   fn f() {
 145:       const MY_CONST = 1;     // error: not allowed in functions
 146:   }
 147:   f();
 148:   
 149:   sketch MySketch() {
 150:       fn f() {
 151:           const MY_CONST = 1; // error: not allowed in workbench functions
 152:       }
 153:       f();
 154:   }
 155:   MySketch();

-- No Output --
-- Errors --
  × error: 145:5: Constant assignment is not allowed within function
     ╭─[../books/language/src/assignments/const.md:145:5]
 144 │ fn f() {
     · ─┬
     ·  ╰── Within this function
 145 │     const MY_CONST = 1;     // error: not allowed in functions
     ·     ─────────┬────────
     ·              ╰── This constant assignment is not allowed
 146 │ }
     ╰────
  help: constant assignment is only allowed within source file, module or workbench
  × error: 151:9: Constant assignment is not allowed within function
     ╭─[../books/language/src/assignments/const.md:151:9]
 149 │ sketch MySketch() {
 150 │     fn f() {
     ·     ─┬
     ·      ╰── Within this function
 151 │         const MY_CONST = 1; // error: not allowed in workbench functions
     ·         ─────────┬────────
     ·                  ╰── This constant assignment is not allowed
 152 │     }
     ╰────
  help: constant assignment is only allowed within source file, module or workbench
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED
