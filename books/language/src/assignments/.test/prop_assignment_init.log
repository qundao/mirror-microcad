
-- Test --
        Test name: prop_assignment_init
  Expected result: fail
      Source file: ../books/language/src/assignments/property.md:45
        Test path: ../books/language/src/assignments/.test

-- Code --

  45:   sketch MySketch(radius: Length) {
  46:       prop diameter = radius * 2; // error: not in initialization code
  47:       
  48:       init() { radius = 1; }
  49:       std::geo2d::Circle(radius);
  50:   }
  51:   std::debug::assert_eq([ MySketch(5cm).diameter, 10cm ])

-- No Output --
-- Errors --
  × error: 46:5: Statement not allowed prior initializers
    ╭─[../books/language/src/assignments/property.md:46:5]
 45 │ sketch MySketch(radius: Length) {
    ·        ────┬───
    ·            ╰── Inside this sketch
 46 │     prop diameter = radius * 2; // error: not in initialization code
    ·     ─────────────┬────────────
    ·                  ╰── This statement is not allowed
 47 │     
 48 │     init() { radius = 1; }
    ·     ──┬─
    ·       ╰── Before this initializer
 49 │     std::geo2d::Circle(radius);
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED
