
-- Test --
        Test name: const_assignment_shadow
  Expected result: fail
      Source file: ../books/language/src/assignments/const.md:80
        Test path: ../books/language/src/assignments/.test

-- Code --

  80:   mod module {
  81:       const A = 5;
  82:       const A = 1;  // error: ambiguous identifier in this module
  83:   
  84:       pub mod another_module {
  85:           const A = 5;   // ok
  86:   
  87:           pub fn a() -> Integer { A }
  88:       }
  89:   
  90:       pub sketch Sketch() {
  91:           const A = 5;
  92:           const A = 5;   // error: ambiguous identifier in this workbench
  93:       }
  94:   }
  95:   
  96:   std::debug::assert_eq([ module::another_module::a(), 5 ]);
  97:   module::Sketch();

-- No Output --
-- Errors --
  × error: 82:11: Ambiguous identifier 'A'
    ╭─[../books/language/src/assignments/const.md:81:11]
 80 │ mod module {
 81 │     const A = 5;
    ·           ┬
    ·           ╰── First usage of 'A'
 82 │     const A = 1;  // error: ambiguous identifier in this module
    ·           ┬
    ·           ╰── Ambiguous usage of 'A'
 83 │ 
    ╰────
  × error: 92:15: Ambiguous identifier 'A'
    ╭─[../books/language/src/assignments/const.md:91:15]
 90 │     pub sketch Sketch() {
 91 │         const A = 5;
    ·               ┬
    ·               ╰── First usage of 'A'
 92 │         const A = 5;   // error: ambiguous identifier in this workbench
    ·               ┬
    ·               ╰── Ambiguous usage of 'A'
 93 │     }
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED
