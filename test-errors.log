
========= ./books/examples/book/.test/footpad.log =========

﻿
-- Test --
        Test name: footpad
  Expected result: ok
      Source file: ../books/examples/src/footpad.md:6
        Test path: ../books/examples/src/.test

-- Code --

   6:   // Copyright © 2025-2026 The µcad authors <info@microcad.xyz>
   7:   // SPDX-License-Identifier: AGPL-3.0-or-later
   8:   
   9:   use std::ops::*;
  10:   use std::geo2d::*;
  11:   use std::math::*;
  12:   
  13:   part FootPad(
  14:       height = 45mm,
  15:       base = (x = 155mm, y = 101mm, z = 18mm),
  16:       slot = (x = 8mm, y = 13mm),
  17:       center_hole = (d_inner = 42mm, d_outer = 55mm),
  18:       corner_hole = (d_lower = 14mm, d_upper = 22mm),
  19:       corner_radius = 15mm,
  20:   ) {
  21:       s = (x = base.x / 2 - corner_radius, y = base.y / 2 - corner_radius);
  22:       hole_pos = (x = [-1,1]*s.x, y = [-1,1]*s.y);
  23:       radius = corner_radius;
  24:       
  25:       base_lower = Circle(radius, c = hole_pos)
  26:           .hull()
  27:           .extrude(12mm);
  28:   
  29:       base_upper_height = slot.x;
  30:       base_lower_height = base.z - base_upper_height;
  31:   
  32:       base_upper = {
  33:           top_left = (x = -s.x, y = s.y);
  34:           top_right = (x = s.x, y = s.y);
  35:           bottom_left = (x = -s.x, y = -s.y);
  36:           bottom_right = (x = s.x, y = -s.y);
  37:           (Circle(radius, c = (x = top_left.x, y = bottom_right.y)).hull() 
  38:           | Circle(radius, c = (x = top_right.x, y = bottom_left.y)).hull());
  39:       }
  40:       .extrude(base_upper_height)
  41:       .translate(z = base_lower_height);
  42:       
  43:       center = {
  44:           (Circle(d = center_hole.d_outer) - Circle(d = center_hole.d_inner))
  45:               .extrude(height);
  46:           
  47:           Rect(height = slot.x, width = center_hole.d_outer)
  48:               .extrude(slot.y)
  49:               .translate(z = height - slot.y);
  50:           
  51:       }.subtract();
  52:   
  53:       holes = {
  54:           Circle(d = corner_hole.d_lower, c = hole_pos)
  55:               .extrude(height = base_lower_height);
  56:           Circle(d = corner_hole.d_upper, c = hole_pos)
  57:               .extrude(height = base.z * 2)
  58:               .translate(z = base_lower_height);
  59:           Circle(d = center_hole.d_inner)
  60:               .extrude(height);
  61:       }.union();
  62:   
  63:       base_lower | base_upper | center - holes;
  64:   }
  65:   
  66:   FootPad();

-- No Output --
-- Errors --
  ⚠ warning: 11:5: Unused global symbol std::math::*.
    ╭─[../books/examples/src/footpad.md:11:5]
 10 │ use std::geo2d::*;
 11 │ use std::math::*;
    ·     ──────┬─────
    ·           ╰── Unused global symbol std::math::*.
 12 │ 
    ╰────
Unexpected warnings(s) which did occur in line(s): 11
-- Model --
  Group (root) ->
    Workpiece(part) footpad::FootPad(base=(x=155mm, y=101mm, z=18mm), center_hole=(d_inner=42mm, d_outer=55mm), corner_hole=(d_lower=14mm, d_upper=22mm), corner_radius=15mm, height=45mm, slot=(x=8mm, y=13mm)) ->
      - base = (x=155mm, y=101mm, z=18mm)
      - center_hole = (d_inner=42mm, d_outer=55mm)
      - corner_hole = (d_lower=14mm, d_upper=22mm)
      - corner_radius = 15mm
      - height = 45mm
      - slot = (x=8mm, y=13mm)
      Operation subtract() ->
        Group ->
          Operation union() ->
            Group ->
              Operation union() ->
                Group ->
                  base_lower: Workpiece(op) std::ops::extrude(height=12mm, scale=(x=1, y=1), twist=0rad) ->
                    - height = 12mm
                    - scale = (x=1, y=1)
                    - twist = 0rad
                    Operation __builtin::ops::extrude(height=12mm, scale_x=1, scale_y=1, twist=0rad) ->
                      Operation __builtin::ops::hull() ->
                        Workpiece(sketch) std::geo2d::Circle(center=(x=[-62.5mm, 62.5mm], y=[-35.5mm, 35.5mm]), radius=15mm) ->
                          - center = (x=[-62.5mm, 62.5mm], y=[-35.5mm, 35.5mm])
                          - radius = 15mm
                          Multiplicity ->
                            Transform __builtin::ops::translate(x=-62.5mm, y=-35.5mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=15mm) ->
                            Transform __builtin::ops::translate(x=62.5mm, y=-35.5mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=15mm) ->
                            Transform __builtin::ops::translate(x=-62.5mm, y=35.5mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=15mm) ->
                            Transform __builtin::ops::translate(x=62.5mm, y=35.5mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=15mm) ->
                  base_upper: Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=10mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 10mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=10mm) ->
                      Workpiece(op) std::ops::extrude(height=8mm, scale=(x=1, y=1), twist=0rad) ->
                        - height = 8mm
                        - scale = (x=1, y=1)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=8mm, scale_x=1, scale_y=1, twist=0rad) ->
                          Group ->
                            Operation union() ->
                              Group ->
                                Operation __builtin::ops::hull() ->
                                  Workpiece(sketch) std::geo2d::Circle(center=(x=-62.5mm, y=-35.5mm), radius=15mm) ->
                                    - center = (x=-62.5mm, y=-35.5mm)
                                    - radius = 15mm
                                    Transform __builtin::ops::translate(x=-62.5mm, y=-35.5mm, z=0mm) ->
                                      Primitive2D __builtin::geo2d::Circle(radius=15mm) ->
                                Operation __builtin::ops::hull() ->
                                  Workpiece(sketch) std::geo2d::Circle(center=(x=62.5mm, y=-35.5mm), radius=15mm) ->
                                    - center = (x=62.5mm, y=-35.5mm)
                                    - radius = 15mm
                                    Transform __builtin::ops::translate(x=62.5mm, y=-35.5mm, z=0mm) ->
                                      Primitive2D __builtin::geo2d::Circle(radius=15mm) ->
              center: Operation __builtin::ops::subtract() ->
                Group ->
                  Workpiece(op) std::ops::extrude(height=45mm, scale=(x=1, y=1), twist=0rad) ->
                    - height = 45mm
                    - scale = (x=1, y=1)
                    - twist = 0rad
                    Operation __builtin::ops::extrude(height=45mm, scale_x=1, scale_y=1, twist=0rad) ->
                      Operation subtract() ->
                        Group ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), diameter=55mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 27.5mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=27.5mm) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), diameter=42mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 21mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=21mm) ->
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=32mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 32mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=32mm) ->
                      Workpiece(op) std::ops::extrude(height=13mm, scale=(x=1, y=1), twist=0rad) ->
                        - height = 13mm
                        - scale = (x=1, y=1)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=13mm, scale_x=1, scale_y=1, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Rect(height=8mm, width=55mm) ->
                            - height = 8mm
                            - width = 55mm
                            - x = -27.5mm
                            - y = -4mm
                            Primitive2D __builtin::geo2d::Rect(height=8mm, width=55mm, x=-27.5mm, y=-4mm) ->
          holes: Operation __builtin::ops::union() ->
            Group ->
              Workpiece(op) std::ops::extrude(height=10mm, scale=(x=1, y=1), twist=0rad) ->
                - height = 10mm
                - scale = (x=1, y=1)
                - twist = 0rad
                Operation __builtin::ops::extrude(height=10mm, scale_x=1, scale_y=1, twist=0rad) ->
                  Workpiece(sketch) std::geo2d::Circle(center=(x=[-62.5mm, 62.5mm], y=[-35.5mm, 35.5mm]), diameter=14mm) ->
                    - center = (x=[-62.5mm, 62.5mm], y=[-35.5mm, 35.5mm])
                    - radius = 7mm
                    Multiplicity ->
                      Transform __builtin::ops::translate(x=-62.5mm, y=-35.5mm, z=0mm) ->
                        Primitive2D __builtin::geo2d::Circle(radius=7mm) ->
                      Transform __builtin::ops::translate(x=62.5mm, y=-35.5mm, z=0mm) ->
                        Primitive2D __builtin::geo2d::Circle(radius=7mm) ->
                      Transform __builtin::ops::translate(x=-62.5mm, y=35.5mm, z=0mm) ->
                        Primitive2D __builtin::geo2d::Circle(radius=7mm) ->
                      Transform __builtin::ops::translate(x=62.5mm, y=35.5mm, z=0mm) ->
                        Primitive2D __builtin::geo2d::Circle(radius=7mm) ->
              Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=10mm) ->
                - x = 0mm
                - y = 0mm
                - z = 10mm
                Transform __builtin::ops::translate(x=0mm, y=0mm, z=10mm) ->
                  Workpiece(op) std::ops::extrude(height=36mm, scale=(x=1, y=1), twist=0rad) ->
                    - height = 36mm
                    - scale = (x=1, y=1)
                    - twist = 0rad
                    Operation __builtin::ops::extrude(height=36mm, scale_x=1, scale_y=1, twist=0rad) ->
                      Workpiece(sketch) std::geo2d::Circle(center=(x=[-62.5mm, 62.5mm], y=[-35.5mm, 35.5mm]), diameter=22mm) ->
                        - center = (x=[-62.5mm, 62.5mm], y=[-35.5mm, 35.5mm])
                        - radius = 11mm
                        Multiplicity ->
                          Transform __builtin::ops::translate(x=-62.5mm, y=-35.5mm, z=0mm) ->
                            Primitive2D __builtin::geo2d::Circle(radius=11mm) ->
                          Transform __builtin::ops::translate(x=62.5mm, y=-35.5mm, z=0mm) ->
                            Primitive2D __builtin::geo2d::Circle(radius=11mm) ->
                          Transform __builtin::ops::translate(x=-62.5mm, y=35.5mm, z=0mm) ->
                            Primitive2D __builtin::geo2d::Circle(radius=11mm) ->
                          Transform __builtin::ops::translate(x=62.5mm, y=35.5mm, z=0mm) ->
                            Primitive2D __builtin::geo2d::Circle(radius=11mm) ->
              Workpiece(op) std::ops::extrude(height=45mm, scale=(x=1, y=1), twist=0rad) ->
                - height = 45mm
                - scale = (x=1, y=1)
                - twist = 0rad
                Operation __builtin::ops::extrude(height=45mm, scale_x=1, scale_y=1, twist=0rad) ->
                  Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), diameter=42mm) ->
                    - center = (x=0mm, y=0mm)
                    - radius = 21mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Primitive2D __builtin::geo2d::Circle(radius=21mm) ->

Export of "../books/examples/src/.test/footpad-out.stl" successful.
-- Test Result --
OK (BUT WARNINGS)

========= ./books/examples/book/.test/gears_gear_2d.log =========

﻿
-- Test --
        Test name: gears_gear_2d
  Expected result: ok
      Source file: ../books/examples/src/gears.md:8
        Test path: ../books/examples/src/.test

-- Code --

   8:   // file: gear_2d.µcad
   9:   // Copyright © 2025 The µcad authors <info@microcad.xyz>
  10:   // SPDX-License-Identifier: AGPL-3.0-or-later
  11:   
  12:   use std::ops::*;
  13:   use std::geo2d::*;
  14:   
  15:   InvoluteGearProfile(1.0mm, 100);
  16:   

-- No Output --
-- Errors --
  ⚠ warning: 12:5: Unused global symbol std::ops::*.
    ╭─[../books/examples/src/gears.md:12:5]
 11 │ 
 12 │ use std::ops::*;
    ·     ─────┬─────
    ·          ╰── Unused global symbol std::ops::*.
 13 │ use std::geo2d::*;
    ╰────
Unexpected warnings(s) which did occur in line(s): 12
-- Model --
  Group (root) ->
    Workpiece(sketch) std::geo2d::InvoluteGearProfile(module=1mm, pressure_angle=0rad, teeth=100) ->
      - module = 1mm
      - outer_radius = 51mm
      - pitch_radius = 50mm
      - pressure_angle = 0rad
      - teeth = 100
      - tooth_angle = 0.0628318530718rad
      - tooth_distance = 3.14159265358979mm
      Primitive2D __builtin::geo2d::InvoluteGearProfile(module=1mm, pressure_angle=0rad, teeth=100) ->

Export of "../books/examples/src/.test/gears_gear_2d-out.svg" successful.
-- Test Result --
OK (BUT WARNINGS)

========= ./books/examples/book/.test/text_text_plate.log =========

﻿
-- Test --
        Test name: text_text_plate
  Expected result: ok
      Source file: ../books/examples/src/text.md:42
        Test path: ../books/examples/src/.test

-- Code --

  42:   // file: text_plate.µcad
  43:   // Copyright © 2025 The µcad authors <info@microcad.xyz>
  44:   // SPDX-License-Identifier: AGPL-3.0-or-later
  45:   
  46:   use std::geo2d::*;
  47:   use std::ops::*;
  48:   use std::math::*;
  49:   
  50:   sketch TextPlate(text: String, height: Length = 30mm) {
  51:       letters = Text(text, height).center();
  52:       plate = RoundedRect(60mm, radius = 20mm);
  53:       plate - letters
  54:   }
  55:   
  56:   TextPlate("Hello µcad", 10mm)
  57:       .extrude(2mm, 0°);
  58:   

-- No Output --
-- Errors --
  ⚠ warning: 48:5: Unused global symbol std::math::*.
    ╭─[../books/examples/src/text.md:48:5]
 47 │ use std::ops::*;
 48 │ use std::math::*;
    ·     ──────┬─────
    ·           ╰── Unused global symbol std::math::*.
 49 │ 
    ╰────
Unexpected warnings(s) which did occur in line(s): 48
-- Model --
  Group (root) ->
    Workpiece(op) std::ops::extrude(height=2mm, scale=(x=1, y=1), twist=0rad) ->
      - height = 2mm
      - scale = (x=1, y=1)
      - twist = 0rad
      Operation __builtin::ops::extrude(height=2mm, scale_x=1, scale_y=1, twist=0rad) ->
        Workpiece(sketch) text_text_plate::TextPlate(height=10mm, text=Hello µcad) ->
          - height = 10mm
          - text = Hello µcad
          Operation subtract() ->
            Group ->
              plate: Workpiece(sketch) std::geo2d::RoundedRect(radius=20mm, size=60mm) ->
                - height = 60mm
                - radius_bottom_left = 20mm
                - radius_bottom_right = 20mm
                - radius_top_left = 20mm
                - radius_top_right = 20mm
                - width = 60mm
                - x = -30mm
                - y = -30mm
                Primitive2D __builtin::geo2d::RoundedRect(height=60mm, radius_bottom_left=20mm, radius_bottom_right=20mm, radius_top_left=20mm, radius_top_right=20mm, width=60mm, x=-30mm, y=-30mm) ->
              letters: Operation __builtin::ops::center() ->
                Workpiece(sketch) std::geo2d::Text(font_file=, height=10mm, text=Hello µcad) ->
                  - font_file = 
                  - height = 10mm
                  - text = Hello µcad
                  Primitive2D __builtin::geo2d::Text(font_file=, height=10mm, text=Hello µcad) ->

Export of "../books/examples/src/.test/text_text_plate-out.stl" successful.
-- Test Result --
OK (BUT WARNINGS)

========= ./books/examples/book/.test/hole_test.log =========

﻿
-- Test --
        Test name: hole_test
  Expected result: ok
      Source file: ../books/examples/src/hole_test.md:6
        Test path: ../books/examples/src/.test

-- Code --

   6:   // Copyright © 2025-2026 The µcad authors <info@microcad.xyz>
   7:   // SPDX-License-Identifier: AGPL-3.0-or-later
   8:   
   9:   use std::geo2d::*;
  10:   use std::geo3d::*;
  11:   use std::ops::*;
  12:   use std::math::*;
  13:   
  14:   const THICKNESS = 2mm;
  15:   
  16:   part Hole(diameter: Length) {
  17:       r = diameter * 50%;
  18:       Cylinder(radius_bottom = r, radius_top = r + THICKNESS * 50%, height = THICKNESS);
  19:   }
  20:   
  21:   r = RoundedRect(60mm, radius = 10mm).extrude(THICKNESS);
  22:   
  23:   holes = Hole([1..9] * 0.25mm)
  24:       .distribute_grid(size = 60mm, rows = 3, columns = 3);
  25:   
  26:   r - holes;
  27:   

-- No Output --
-- Errors --
  ⚠ warning: 12:5: Unused global symbol std::math::*.
    ╭─[../books/examples/src/hole_test.md:12:5]
 11 │ use std::ops::*;
 12 │ use std::math::*;
    ·     ──────┬─────
    ·           ╰── Unused global symbol std::math::*.
 13 │ 
    ╰────
Unexpected warnings(s) which did occur in line(s): 12
-- Model --
  Group (root) ->
    Operation subtract() ->
      Group ->
        r: Workpiece(op) std::ops::extrude(height=2mm, scale=(x=1, y=1), twist=0rad) ->
          - height = 2mm
          - scale = (x=1, y=1)
          - twist = 0rad
          Operation __builtin::ops::extrude(height=2mm, scale_x=1, scale_y=1, twist=0rad) ->
            Workpiece(sketch) std::geo2d::RoundedRect(radius=10mm, size=60mm) ->
              - height = 60mm
              - radius_bottom_left = 10mm
              - radius_bottom_right = 10mm
              - radius_top_left = 10mm
              - radius_top_right = 10mm
              - width = 60mm
              - x = -30mm
              - y = -30mm
              Primitive2D __builtin::geo2d::RoundedRect(height=60mm, radius_bottom_left=10mm, radius_bottom_right=10mm, radius_top_left=10mm, radius_top_right=10mm, width=60mm, x=-30mm, y=-30mm) ->
        holes: Workpiece(op) std::ops::distribute_grid(columns=3, rows=3, size=60mm) ->
          - columns = 3
          - height = 60mm
          - rows = 3
          - width = 60mm
          - x = -30mm
          - y = -30mm
          Operation __builtin::ops::distribute_grid(columns=3, height=60mm, rows=3, width=60mm, x=-30mm, y=-30mm) ->
            Multiplicity ->
              Workpiece(part) hole_test::Hole(diameter=0.25mm) ->
                - diameter = 0.25mm
                Workpiece(part) std::geo3d::Cylinder(height=2mm, offset=0mm, radius_bottom=0.125mm, radius_top=1.125mm) ->
                  - height = 2mm
                  - offset = 0mm
                  - radius_bottom = 0.125mm
                  - radius_top = 1.125mm
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=0mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Workpiece(op) std::ops::extrude(height=2mm, scale=(x=9, y=9), twist=0rad) ->
                        - height = 2mm
                        - scale = (x=9, y=9)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=2mm, scale_x=9, scale_y=9, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=0.125mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 0.125mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=0.125mm) ->
              Workpiece(part) hole_test::Hole(diameter=0.5mm) ->
                - diameter = 0.5mm
                Workpiece(part) std::geo3d::Cylinder(height=2mm, offset=0mm, radius_bottom=0.25mm, radius_top=1.25mm) ->
                  - height = 2mm
                  - offset = 0mm
                  - radius_bottom = 0.25mm
                  - radius_top = 1.25mm
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=0mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Workpiece(op) std::ops::extrude(height=2mm, scale=(x=5, y=5), twist=0rad) ->
                        - height = 2mm
                        - scale = (x=5, y=5)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=2mm, scale_x=5, scale_y=5, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=0.25mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 0.25mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=0.25mm) ->
              Workpiece(part) hole_test::Hole(diameter=0.75mm) ->
                - diameter = 0.75mm
                Workpiece(part) std::geo3d::Cylinder(height=2mm, offset=0mm, radius_bottom=0.375mm, radius_top=1.375mm) ->
                  - height = 2mm
                  - offset = 0mm
                  - radius_bottom = 0.375mm
                  - radius_top = 1.375mm
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=0mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Workpiece(op) std::ops::extrude(height=2mm, scale=(x=3.66666666666667, y=3.66666666666667), twist=0rad) ->
                        - height = 2mm
                        - scale = (x=3.66666666666667, y=3.66666666666667)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=2mm, scale_x=3.66666666666667, scale_y=3.66666666666667, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=0.375mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 0.375mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=0.375mm) ->
              Workpiece(part) hole_test::Hole(diameter=1mm) ->
                - diameter = 1mm
                Workpiece(part) std::geo3d::Cylinder(height=2mm, offset=0mm, radius_bottom=0.5mm, radius_top=1.5mm) ->
                  - height = 2mm
                  - offset = 0mm
                  - radius_bottom = 0.5mm
                  - radius_top = 1.5mm
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=0mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Workpiece(op) std::ops::extrude(height=2mm, scale=(x=3, y=3), twist=0rad) ->
                        - height = 2mm
                        - scale = (x=3, y=3)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=2mm, scale_x=3, scale_y=3, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=0.5mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 0.5mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=0.5mm) ->
              Workpiece(part) hole_test::Hole(diameter=1.25mm) ->
                - diameter = 1.25mm
                Workpiece(part) std::geo3d::Cylinder(height=2mm, offset=0mm, radius_bottom=0.625mm, radius_top=1.625mm) ->
                  - height = 2mm
                  - offset = 0mm
                  - radius_bottom = 0.625mm
                  - radius_top = 1.625mm
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=0mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Workpiece(op) std::ops::extrude(height=2mm, scale=(x=2.6, y=2.6), twist=0rad) ->
                        - height = 2mm
                        - scale = (x=2.6, y=2.6)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=2mm, scale_x=2.6, scale_y=2.6, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=0.625mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 0.625mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=0.625mm) ->
              Workpiece(part) hole_test::Hole(diameter=1.5mm) ->
                - diameter = 1.5mm
                Workpiece(part) std::geo3d::Cylinder(height=2mm, offset=0mm, radius_bottom=0.75mm, radius_top=1.75mm) ->
                  - height = 2mm
                  - offset = 0mm
                  - radius_bottom = 0.75mm
                  - radius_top = 1.75mm
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=0mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Workpiece(op) std::ops::extrude(height=2mm, scale=(x=2.33333333333333, y=2.33333333333333), twist=0rad) ->
                        - height = 2mm
                        - scale = (x=2.33333333333333, y=2.33333333333333)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=2mm, scale_x=2.33333333333333, scale_y=2.33333333333333, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=0.75mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 0.75mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=0.75mm) ->
              Workpiece(part) hole_test::Hole(diameter=1.75mm) ->
                - diameter = 1.75mm
                Workpiece(part) std::geo3d::Cylinder(height=2mm, offset=0mm, radius_bottom=0.875mm, radius_top=1.875mm) ->
                  - height = 2mm
                  - offset = 0mm
                  - radius_bottom = 0.875mm
                  - radius_top = 1.875mm
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=0mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Workpiece(op) std::ops::extrude(height=2mm, scale=(x=2.14285714285714, y=2.14285714285714), twist=0rad) ->
                        - height = 2mm
                        - scale = (x=2.14285714285714, y=2.14285714285714)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=2mm, scale_x=2.14285714285714, scale_y=2.14285714285714, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=0.875mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 0.875mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=0.875mm) ->
              Workpiece(part) hole_test::Hole(diameter=2mm) ->
                - diameter = 2mm
                Workpiece(part) std::geo3d::Cylinder(height=2mm, offset=0mm, radius_bottom=1mm, radius_top=2mm) ->
                  - height = 2mm
                  - offset = 0mm
                  - radius_bottom = 1mm
                  - radius_top = 2mm
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=0mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Workpiece(op) std::ops::extrude(height=2mm, scale=(x=2, y=2), twist=0rad) ->
                        - height = 2mm
                        - scale = (x=2, y=2)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=2mm, scale_x=2, scale_y=2, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=1mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 1mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=1mm) ->
              Workpiece(part) hole_test::Hole(diameter=2.25mm) ->
                - diameter = 2.25mm
                Workpiece(part) std::geo3d::Cylinder(height=2mm, offset=0mm, radius_bottom=1.125mm, radius_top=2.125mm) ->
                  - height = 2mm
                  - offset = 0mm
                  - radius_bottom = 1.125mm
                  - radius_top = 2.125mm
                  Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=0mm) ->
                    - x = 0mm
                    - y = 0mm
                    - z = 0mm
                    Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                      Workpiece(op) std::ops::extrude(height=2mm, scale=(x=1.88888888888889, y=1.88888888888889), twist=0rad) ->
                        - height = 2mm
                        - scale = (x=1.88888888888889, y=1.88888888888889)
                        - twist = 0rad
                        Operation __builtin::ops::extrude(height=2mm, scale_x=1.88888888888889, scale_y=1.88888888888889, twist=0rad) ->
                          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=1.125mm) ->
                            - center = (x=0mm, y=0mm)
                            - radius = 1.125mm
                            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
                              Primitive2D __builtin::geo2d::Circle(radius=1.125mm) ->

Export of "../books/examples/src/.test/hole_test-out.stl" successful.
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tutorials/book/lego_brick/part/.test/grid.log =========

﻿
-- Test --
        Test name: grid
  Expected result: ok
      Source file: ../books/tutorials/src/lego_brick/part/custom_op.md:11
        Test path: ../books/tutorials/src/lego_brick/part/.test

-- Code --

  11:   use std::ops::*;
  12:   
  13:   const SPACING = 8mm;
  14:   
  15:   op grid(columns: Integer, rows: Integer) {
  16:       @input
  17:           .translate(x = [0..columns] * SPACING, y = [0..rows] * SPACING)
  18:           .center()
  19:   }

-- No Output --
-- Errors --
  ⚠ warning: 11:5: Unused global symbol std::ops::*.
    ╭─[../books/tutorials/src/lego_brick/part/custom_op.md:11:5]
 11 │ use std::ops::*;
    ·     ─────┬─────
    ·          ╰── Unused global symbol std::ops::*.
 12 │ 
    ╰────
  ⚠ warning: 15:4: Unused global symbol grid.
    ╭─[../books/tutorials/src/lego_brick/part/custom_op.md:15:4]
 14 │ 
 15 │ op grid(columns: Integer, rows: Integer) {
    ·    ──┬─
    ·      ╰── Unused global symbol grid.
 16 │     @input
    ╰────
Unexpected warnings(s) which did occur in line(s): 11, 15
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tutorials/book/lego_brick/base/frame/.test/assignment.log =========

﻿
-- Test --
        Test name: assignment
  Expected result: ok
      Source file: ../books/tutorials/src/lego_brick/base/frame/naming.md:10
        Test path: ../books/tutorials/src/lego_brick/base/frame/.test

-- Code --

  10:   outer = std::geo2d::Rect(width = 31.8mm, height = 15.8mm);

-- No Output --
-- Errors --
  ⚠ warning: 10:1: Unused local outer.
    ╭─[../books/tutorials/src/lego_brick/base/frame/naming.md:10:1]
 10 │ outer = std::geo2d::Rect(width = 31.8mm, height = 15.8mm);
    · ──┬──
    ·   ╰── Unused local outer.
    ╰────
Unexpected warnings(s) which did occur in line(s): 10
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tutorials/book/lego_brick/preparation/.test/create.log =========

﻿
-- Test --
        Test name: create
  Expected result: ok
      Source file: ../books/tutorials/src/lego_brick/preparation/create.md:16
        Test path: ../books/tutorials/src/lego_brick/preparation/.test

-- Code --

  16:   // microcad generated file
  17:   
  18:   sketch YourSketch( /* your building plan */ ) {
  19:       // your code
  20:   }
  21:   
  22:   // create YourSketch
  23:   YourSketch();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) create::YourSketch() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/language/book/assignments/.test/assignment_model_module.log =========

﻿
-- Test --
        Test name: assignment_model_module
  Expected result: fail
      Source file: ../books/language/src/assignments/model.md:38
        Test path: ../books/language/src/assignments/.test

-- Code --

  38:   mod my_module {
  39:       a = std::geo2d::Circle(radius = 1mm);   // error
  40:   }

-- No Output --
-- Errors --
  × error: 39:5: Assigment is not allowed within module
    ╭─[../books/language/src/assignments/model.md:39:5]
 38 │ mod my_module {
    · ─┬─
    ·  ╰── Within this module
 39 │     a = std::geo2d::Circle(radius = 1mm);   // error
    ·     ──────────────────┬─────────────────
    ·                       ╰── This assigment is not allowed
 40 │ }
    ╰────
  help: assigment is only allowed within source root, module definition, workbench definition or function definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/const_assignment_init.log =========

﻿
-- Test --
        Test name: const_assignment_init
  Expected result: todo_fail
      Source file: ../books/language/src/assignments/const.md:165
        Test path: ../books/language/src/assignments/.test

-- Code --

 165:   sketch MySketch() {
 166:       init(_: Integer) {
 167:           const MY_CONST = 1;   // error: not allowed in initializers
 168:       }
 169:   }
 170:   MySketch();

-- No Output --
-- No Errors --
Expected error(s) which did not occur in line(s): 167
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/assignments/.test/const_assignment_workbench_code.log =========

﻿
-- Test --
        Test name: const_assignment_workbench_code
  Expected result: ok
      Source file: ../books/language/src/assignments/const.md:119
        Test path: ../books/language/src/assignments/.test

-- Code --

 119:   sketch MySketch() {
 120:       const MY_CONST = 1;   // allowed if no initializers
 121:   }
 122:   MySketch();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) const_assignment_workbench_code::MySketch() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/language/book/assignments/.test/assignment_value_scope.log =========

﻿
-- Test --
        Test name: assignment_value_scope
  Expected result: todo
      Source file: ../books/language/src/assignments/value.md:35
        Test path: ../books/language/src/assignments/.test

-- Code --

  35:   // source code file is the topmost scope #0
  36:   
  37:   use std::debug::*;
  38:   
  39:   // define a within scope #0
  40:   a = 5;
  41:   assert_eq([ a, 5 ]);
  42:   
  43:   // scope #1
  44:   {
  45:       // define b within scope #1
  46:       b = a * 2;
  47:       // of course b is available at this point
  48:       assert_valid( b );
  49:   
  50:       // scope #2
  51:       {
  52:           // b is available in scope #2 because #2 is within #1
  53:           assert_valid( b );
  54:       }
  55:   }
  56:   
  57:   // a is still available
  58:   assert_valid(a);
  59:   // b not known here anymore
  60:   assert_invalid(b);

-- Parse Error --
  × error: 59:1: Expected something else, comment, semicolon or end of input
    ╭─[../books/language/src/assignments/value.md:59:1]
 58 │ // a is still available
 59 │ assert_valid(a);
    · ──────┬─────
    ·       ╰── Expected something else, comment, semicolon or end of input
 60 │ // b not known here anymore
    ╰────

-- Test Result --
TODO

========= ./books/language/book/assignments/.test/assignment_workbench.log =========

﻿
-- Test --
        Test name: assignment_workbench
  Expected result: fail
      Source file: ../books/language/src/assignments/value.md:113
        Test path: ../books/language/src/assignments/.test

-- Code --

 113:   sketch MySketch() {
 114:       a = 1;   // error
 115:       init(_x : Scalar) {}
 116:   }
 117:   
 118:   MySketch();

-- No Output --
-- Errors --
  × error: 114:5: Statement not allowed prior initializers
     ╭─[../books/language/src/assignments/value.md:114:5]
 113 │ sketch MySketch() {
     ·        ────┬───
     ·            ╰── Inside this sketch
 114 │     a = 1;   // error
     ·     ──┬──
     ·       ╰── This statement is not allowed
 115 │     init(_x : Scalar) {}
     ·     ──┬─
     ·       ╰── Before this initializer
 116 │ }
     ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/prop_assignment_initializer.log =========

﻿
-- Test --
        Test name: prop_assignment_initializer
  Expected result: todo_fail
      Source file: ../books/language/src/assignments/property.md:59
        Test path: ../books/language/src/assignments/.test

-- Code --

  59:   sketch MySketch(radius: Length) {
  60:       init() { 
  61:           radius = 1; 
  62:           prop diameter = radius * 2; // error: not in initializer
  63:       }
  64:       std::geo2d::Circle(radius);
  65:   }
  66:   MySketch(5cm)

-- No Output --
-- No Errors --
Expected error(s) which did not occur in line(s): 62
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/assignments/.test/pub_assignment_workbench.log =========

﻿
-- Test --
        Test name: pub_assignment_workbench
  Expected result: fail
      Source file: ../books/language/src/assignments/pub.md:26
        Test path: ../books/language/src/assignments/.test

-- Code --

  26:   sketch MySketch() {
  27:       pub TEXT = "Hello";  // error
  28:       std::print(TEXT);
  29:   }
  30:   
  31:   MySketch();

-- No Output --
-- Errors --
  × error: 27:5: Public constant assigment is not allowed within sketch
    ╭─[../books/language/src/assignments/pub.md:27:5]
 26 │ sketch MySketch() {
    · ───┬──
    ·    ╰── Within this sketch
 27 │     pub TEXT = "Hello";  // error
    ·     ─────────┬────────
    ·              ╰── This public constant assigment is not allowed
 28 │     std::print(TEXT);
    ╰────
  help: public constant assigment is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/prop_assignment_fn.log =========

﻿
-- Test --
        Test name: prop_assignment_fn
  Expected result: fail
      Source file: ../books/language/src/assignments/property.md:33
        Test path: ../books/language/src/assignments/.test

-- Code --

  33:   fn f() {
  34:       prop diameter = radius * 2; // error: not in functions
  35:   }
  36:   
  37:   f();

-- No Output --
-- Errors --
  × error: 34:5: Property assigment is not allowed within function
    ╭─[../books/language/src/assignments/property.md:34:5]
 33 │ fn f() {
    · ─┬
    ·  ╰── Within this function
 34 │     prop diameter = radius * 2; // error: not in functions
    ·     ─────────────┬────────────
    ·                  ╰── This property assigment is not allowed
 35 │ }
    ╰────
  help: property assigment is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/assignment_model_workbench.log =========

﻿
-- Test --
        Test name: assignment_model_workbench
  Expected result: fail
      Source file: ../books/language/src/assignments/model.md:50
        Test path: ../books/language/src/assignments/.test

-- Code --

  50:   sketch MySketch() {
  51:       a = std::geo2d::Circle(radius = 1mm);   // error
  52:       init(_x : Scalar) {}
  53:   }
  54:   
  55:   MySketch();

-- No Output --
-- Errors --
  × error: 51:5: Statement not allowed prior initializers
    ╭─[../books/language/src/assignments/model.md:51:5]
 50 │ sketch MySketch() {
    ·        ────┬───
    ·            ╰── Inside this sketch
 51 │     a = std::geo2d::Circle(radius = 1mm);   // error
    ·     ──────────────────┬─────────────────
    ·                       ╰── This statement is not allowed
 52 │     init(_x : Scalar) {}
    ·     ──┬─
    ·       ╰── Before this initializer
 53 │ }
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/const_assignment_workbench_code_wrong.log =========

﻿
-- Test --
        Test name: const_assignment_workbench_code_wrong
  Expected result: todo_fail
      Source file: ../books/language/src/assignments/const.md:130
        Test path: ../books/language/src/assignments/.test

-- Code --

 130:   sketch MySketch() {
 131:       _i = 5;                 // any non const code
 132:       const MY_CONST = 1;     // error: const not allowed then
 133:   }
 134:   MySketch();

-- No Output --
-- No Errors --
Expected error(s) which did not occur in line(s): 132
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/assignments/.test/pub_assignment_fn.log =========

﻿
-- Test --
        Test name: pub_assignment_fn
  Expected result: fail
      Source file: ../books/language/src/assignments/pub.md:39
        Test path: ../books/language/src/assignments/.test

-- Code --

  39:   fn f() {
  40:       const MY_CONST = 1;     // error: not allowed in functions
  41:   }
  42:   f();

-- No Output --
-- Errors --
  × error: 40:5: Constant assigment is not allowed within function
    ╭─[../books/language/src/assignments/pub.md:40:5]
 39 │ fn f() {
    · ─┬
    ·  ╰── Within this function
 40 │     const MY_CONST = 1;     // error: not allowed in functions
    ·     ─────────┬────────
    ·              ╰── This constant assigment is not allowed
 41 │ }
    ╰────
  help: constant assigment is only allowed within source root, module definition or workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/const_assignment_mod.log =========

﻿
-- Test --
        Test name: const_assignment_mod
  Expected result: ok
      Source file: ../books/language/src/assignments/const.md:15
        Test path: ../books/language/src/assignments/.test

-- Code --

  15:   const TEXT = "Hello";
  16:   
  17:   mod my_module {
  18:       
  19:       // constant assignment
  20:       const TEXT = "Hello my_module";
  21:   
  22:       // public function
  23:       pub fn f() -> String {
  24:           TEXT
  25:       }
  26:   
  27:       // public workbench
  28:       pub sketch MySketch(text: String) {
  29:           std::debug::assert_eq([ TEXT, text ]);
  30:       }
  31:   }
  32:   
  33:   my_module::MySketch("Hello my_module");
  34:   std::debug::assert_eq([ my_module::f(), "Hello my_module" ]);
  35:   std::debug::assert_eq([ TEXT, "Hello" ]);

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) const_assignment_mod::my_module::MySketch(text=Hello my_module) ->
      - text = Hello my_module

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/language/book/assignments/.test/const_assignment_uppercase.log =========

﻿
-- Test --
        Test name: const_assignment_uppercase
  Expected result: todo_warn
      Source file: ../books/language/src/assignments/const.md:67
        Test path: ../books/language/src/assignments/.test

-- Code --

  67:   const A = 1;        // ok
  68:   const a = 1;        // warning
  69:   const MyValue = 1;  // warning
  70:   const MY_VALUE = 1; // ok

-- No Output --
-- No Errors --
Expected warnings(s) which did not occur in line(s): 68, 69
-- No Model --
-- Test Result --
TODO (WRONG WARNINGS)

========= ./books/language/book/assignments/.test/assignment_shadow_scope.log =========

﻿
-- Test --
        Test name: assignment_shadow_scope
  Expected result: todo
      Source file: ../books/language/src/assignments/value.md:76
        Test path: ../books/language/src/assignments/.test

-- Code --

  76:   a = 5;
  77:   
  78:   {
  79:       a = a * 2;   // this works because we are in a new scope
  80:       std::debug::assert_eq([ a, 10 ]);
  81:   }

-- No Output --
-- Errors --
  × error: 79:5: Value a already in defined: 5
    ╭─[../books/language/src/assignments/value.md:79:5]
 76 │ a = 5;
    · ┬
    · ╰── Previously defined here
 77 │ 
 78 │ {
 79 │     a = a * 2;   // this works because we are in a new scope
    ·     ────┬────
    ·         ╰── a is already defined
 80 │     std::debug::assert_eq([ a, 10 ]);
    ╰────
  help: Values in microcad are immutable
Unexpected error(s) which did occur in line(s): 79
-- Test Result --
TODO

========= ./books/language/book/assignments/.test/const_assignment_building_code.log =========

﻿
-- Test --
        Test name: const_assignment_building_code
  Expected result: todo_fail
      Source file: ../books/language/src/assignments/const.md:107
        Test path: ../books/language/src/assignments/.test

-- Code --

 107:   sketch MySketch() {
 108:       init(_: Integer) {}
 109:       const MY_CONST = 1;   // error: not allowed in building code
 110:   }
 111:   MySketch();

-- No Output --
-- No Errors --
Expected error(s) which did not occur in line(s): 109
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/assignments/.test/const_assignment_shadow.log =========

﻿
-- Test --
        Test name: const_assignment_shadow
  Expected result: fail
      Source file: ../books/language/src/assignments/const.md:80
        Test path: ../books/language/src/assignments/.test

-- Code --

  80:   mod module {
  81:       const A = 5;
  82:       const A = 1;  // error: ambiguous identifier in this module
  83:   
  84:       pub mod another_module {
  85:           const A = 5;   // ok
  86:   
  87:           pub fn a() -> Integer { A }
  88:       }
  89:   
  90:       pub sketch Sketch() {
  91:           const A = 5;
  92:           const A = 5;   // error: ambiguous identifier in this workbench
  93:       }
  94:   }
  95:   
  96:   std::debug::assert_eq([ module::another_module::a(), 5 ]);
  97:   module::Sketch();

-- No Output --
-- Errors --
  × error: 82:11: Ambiguous identifier 'A'
    ╭─[../books/language/src/assignments/const.md:81:11]
 80 │ mod module {
 81 │     const A = 5;
    ·           ┬
    ·           ╰── First usage of 'A'
 82 │     const A = 1;  // error: ambiguous identifier in this module
    ·           ┬
    ·           ╰── Ambiguous usage of 'A'
 83 │ 
    ╰────
  × error: 92:15: Ambiguous identifier 'A'
    ╭─[../books/language/src/assignments/const.md:91:15]
 90 │     pub sketch Sketch() {
 91 │         const A = 5;
    ·               ┬
    ·               ╰── First usage of 'A'
 92 │         const A = 5;   // error: ambiguous identifier in this workbench
    ·               ┬
    ·               ╰── Ambiguous usage of 'A'
 93 │     }
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/const_assignment_fn.log =========

﻿
-- Test --
        Test name: const_assignment_fn
  Expected result: fail
      Source file: ../books/language/src/assignments/const.md:144
        Test path: ../books/language/src/assignments/.test

-- Code --

 144:   fn f() {
 145:       const MY_CONST = 1;     // error: not allowed in functions
 146:   }
 147:   f();
 148:   
 149:   sketch MySketch() {
 150:       fn f() {
 151:           const MY_CONST = 1; // error: not allowed in workbench functions
 152:       }
 153:       f();
 154:   }
 155:   MySketch();

-- No Output --
-- Errors --
  × error: 145:5: Constant assigment is not allowed within function
     ╭─[../books/language/src/assignments/const.md:145:5]
 144 │ fn f() {
     · ─┬
     ·  ╰── Within this function
 145 │     const MY_CONST = 1;     // error: not allowed in functions
     ·     ─────────┬────────
     ·              ╰── This constant assigment is not allowed
 146 │ }
     ╰────
  help: constant assigment is only allowed within source root, module definition or workbench definition
  × error: 151:9: Constant assigment is not allowed within function
     ╭─[../books/language/src/assignments/const.md:151:9]
 149 │ sketch MySketch() {
 150 │     fn f() {
     ·     ─┬
     ·      ╰── Within this function
 151 │         const MY_CONST = 1; // error: not allowed in workbench functions
     ·         ─────────┬────────
     ·                  ╰── This constant assigment is not allowed
 152 │     }
     ╰────
  help: constant assigment is only allowed within source root, module definition or workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/const_assignment_workbench.log =========

﻿
-- Test --
        Test name: const_assignment_workbench
  Expected result: ok
      Source file: ../books/language/src/assignments/const.md:44
        Test path: ../books/language/src/assignments/.test

-- Code --

  44:   sketch MySketch(text: String) {
  45:       // constant assignment in initialization code
  46:       const TEXT = "Hello";
  47:   
  48:       init() {
  49:           text = TEXT;
  50:       }
  51:   
  52:       std::print(text);
  53:   }
  54:   
  55:   MySketch();

-- Output --
Hello

-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) const_assignment_workbench::MySketch() ->
      - text = Hello

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/language/book/assignments/.test/model_assignment_cross.log =========

﻿
-- Test --
        Test name: model_assignment_cross
  Expected result: fail
      Source file: ../books/language/src/assignments/model.md:18
        Test path: ../books/language/src/assignments/.test

-- Code --

  18:   m = std::geo2d::Circle(radius = 10mm);   // assign the model of a circle into m
  19:   std::geo2d::Circle(radius = m);   // error: cannot use m as value

-- No Output --
-- Errors --
  × error: 19:20: Workbench Circle cannot find initialization for those arguments
    ╭─[../books/language/src/assignments/model.md:19:1]
 18 │ m = std::geo2d::Circle(radius = 10mm);   // assign the model of a circle into m
 19 │ std::geo2d::Circle(radius = m);   // error: cannot use m as value
    · ───────────────┬──────────────
    ·                ╰── Got: Circle( radius = m: Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) (root) -> )
    ╰────
  help: Possible initializations:
        	Circle( radius: Length, center = (x = 0mm, y = 0mm))
        	Circle( diameter: Length, center = (x = 0mm, y = 0mm))
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/pub_assignment.log =========

﻿
-- Test --
        Test name: pub_assignment
  Expected result: ok
      Source file: ../books/language/src/assignments/pub.md:8
        Test path: ../books/language/src/assignments/.test

-- Code --

   8:   mod my_module {
   9:       pub mod sub_module {
  10:           pub TEXT = "Hello";
  11:       }
  12:   }
  13:   
  14:   std::print(my_module::sub_module::TEXT);

-- Output --
Hello

-- Errors --
  ⚠ warning: 8:5: Unused global symbol my_module.
   ╭─[../books/language/src/assignments/pub.md:8:5]
 8 │ mod my_module {
   ·     ────┬────
   ·         ╰── Unused global symbol my_module.
 9 │     pub mod sub_module {
   ╰────
Unexpected warnings(s) which did occur in line(s): 8
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/assignments/.test/assignment_shadow.log =========

﻿
-- Test --
        Test name: assignment_shadow
  Expected result: fail
      Source file: ../books/language/src/assignments/value.md:90
        Test path: ../books/language/src/assignments/.test

-- Code --

  90:   a = 5;      // warning: unused local
  91:   a = a * 2;  // error: a already defined in this scope

-- No Output --
-- Errors --
  × error: 91:1: Value a already in defined: 5
    ╭─[../books/language/src/assignments/value.md:91:1]
 90 │ a = 5;      // warning: unused local
    · ┬
    · ╰── Previously defined here
 91 │ a = a * 2;  // error: a already defined in this scope
    · ────┬────
    ·     ╰── a is already defined
    ╰────
  help: Values in microcad are immutable
  ⚠ warning: 90:1: Unused local a.
    ╭─[../books/language/src/assignments/value.md:90:1]
 90 │ a = 5;      // warning: unused local
    · ┬
    · ╰── Unused local a.
 91 │ a = a * 2;  // error: a already defined in this scope
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/assignment_module.log =========

﻿
-- Test --
        Test name: assignment_module
  Expected result: fail
      Source file: ../books/language/src/assignments/value.md:101
        Test path: ../books/language/src/assignments/.test

-- Code --

 101:   mod my_module {
 102:       a = 1; // error
 103:   }

-- No Output --
-- Errors --
  × error: 102:5: Assigment is not allowed within module
     ╭─[../books/language/src/assignments/value.md:102:5]
 101 │ mod my_module {
     · ─┬─
     ·  ╰── Within this module
 102 │     a = 1; // error
     ·     ──┬──
     ·       ╰── This assigment is not allowed
 103 │ }
     ╰────
  help: assigment is only allowed within source root, module definition, workbench definition or function definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/prop_assignment_init.log =========

﻿
-- Test --
        Test name: prop_assignment_init
  Expected result: fail
      Source file: ../books/language/src/assignments/property.md:45
        Test path: ../books/language/src/assignments/.test

-- Code --

  45:   sketch MySketch(radius: Length) {
  46:       prop diameter = radius * 2; // error: not in initialization code
  47:       
  48:       init() { radius = 1; }
  49:       std::geo2d::Circle(radius);
  50:   }
  51:   std::debug::assert_eq([ MySketch(5cm).diameter, 10cm ])

-- No Output --
-- Errors --
  × error: 46:5: Statement not allowed prior initializers
    ╭─[../books/language/src/assignments/property.md:46:5]
 45 │ sketch MySketch(radius: Length) {
    ·        ────┬───
    ·            ╰── Inside this sketch
 46 │     prop diameter = radius * 2; // error: not in initialization code
    ·     ─────────────┬────────────
    ·                  ╰── This statement is not allowed
 47 │     
 48 │     init() { radius = 1; }
    ·     ──┬─
    ·       ╰── Before this initializer
 49 │     std::geo2d::Circle(radius);
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/assignments/.test/prop_assignment_source.log =========

﻿
-- Test --
        Test name: prop_assignment_source
  Expected result: fail
      Source file: ../books/language/src/assignments/property.md:25
        Test path: ../books/language/src/assignments/.test

-- Code --

  25:   prop diameter = radius * 2; // error: not in source file

-- No Output --
-- Errors --
  × error: 25:1: Property assigment is not allowed at source root
    ╭─[../books/language/src/assignments/property.md:25:1]
 25 │ prop diameter = radius * 2; // error: not in source file
    · ─────────────┬────────────
    ·              ╰── This property assigment is not allowed here
    ╰────
  help: property assigment is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/flow/argument_match/.test/match_ambiguous.log =========

﻿
-- Test --
        Test name: match_ambiguous
  Expected result: fail
      Source file: ../books/language/src/flow/argument_match/errors.md:33
        Test path: ../books/language/src/flow/argument_match/.test

-- Code --

  33:   fn f( x: Length, y: Length, z: Length ) {}
  34:   f( x=1cm, 5cm, 3cm);  // error: Missing arguments y and z

-- No Output --
-- Errors --
  × error: 34:4: Missing arguments: y,z
    ╭─[../books/language/src/flow/argument_match/errors.md:34:4]
 33 │ fn f( x: Length, y: Length, z: Length ) {}
 34 │ f( x=1cm, 5cm, 3cm);  // error: Missing arguments y and z
    ·    ───────┬───────
    ·           ╰── Missing arguments: y,z
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/flow/argument_match/.test/argument_match_type_compatible.log =========

﻿
-- Test --
        Test name: argument_match_type_compatible
  Expected result: ok
      Source file: ../books/language/src/flow/argument_match/priorities.md:94
        Test path: ../books/language/src/flow/argument_match/.test

-- Code --

  94:   fn f( a: Scalar, b: Length, c: Area ) {}  // warning: unused a,b,c
  95:   // giving an integer `1` to a `Scalar` parameter `a`
  96:   f(1, 2cm, 3cm²);

-- No Output --
-- Errors --
  ⚠ warning: 94:7: Unused local a.
    ╭─[../books/language/src/flow/argument_match/priorities.md:94:7]
 94 │ fn f( a: Scalar, b: Length, c: Area ) {}  // warning: unused a,b,c
    ·       ┬
    ·       ╰── Unused local a.
 95 │ // giving an integer `1` to a `Scalar` parameter `a`
    ╰────
  ⚠ warning: 94:18: Unused local b.
    ╭─[../books/language/src/flow/argument_match/priorities.md:94:18]
 94 │ fn f( a: Scalar, b: Length, c: Area ) {}  // warning: unused a,b,c
    ·                  ┬
    ·                  ╰── Unused local b.
 95 │ // giving an integer `1` to a `Scalar` parameter `a`
    ╰────
  ⚠ warning: 94:29: Unused local c.
    ╭─[../books/language/src/flow/argument_match/priorities.md:94:29]
 94 │ fn f( a: Scalar, b: Length, c: Area ) {}  // warning: unused a,b,c
    ·                             ┬
    ·                             ╰── Unused local c.
 95 │ // giving an integer `1` to a `Scalar` parameter `a`
    ╰────
-- No Model --
-- Test Result --
OK

========= ./books/language/book/flow/argument_match/.test/argument_match_default.log =========

﻿
-- Test --
        Test name: argument_match_default
  Expected result: ok
      Source file: ../books/language/src/flow/argument_match/priorities.md:107
        Test path: ../books/language/src/flow/argument_match/.test

-- Code --

 107:   fn f( a = 1mm ) {}  // warning: unused a
 108:   // a has default
 109:   f();

-- No Output --
-- Errors --
  ⚠ warning: 107:7: Unused local a.
     ╭─[../books/language/src/flow/argument_match/priorities.md:107:7]
 107 │ fn f( a = 1mm ) {}  // warning: unused a
     ·       ┬
     ·       ╰── Unused local a.
 108 │ // a has default
     ╰────
-- No Model --
-- Test Result --
OK

========= ./books/language/book/flow/argument_match/.test/argument_match_mix.log =========

﻿
-- Test --
        Test name: argument_match_mix
  Expected result: ok
      Source file: ../books/language/src/flow/argument_match/priorities.md:119
        Test path: ../books/language/src/flow/argument_match/.test

-- Code --

 119:   fn f( a: Scalar, b: Length, c=2cm, d: Length) -> Volume {} // warning: unused a,b,c,d
 120:   
 121:   // `a` gets the Integer (1) which is compatible to Scalar (1.0)
 122:   // `b` is named
 123:   // `c` gets it's default
 124:   // `d` does not need a name because `b` has one
 125:   f(b=2cm, 1, 3cm);

-- No Output --
-- Errors --
  ⚠ warning: 119:7: Unused local a.
     ╭─[../books/language/src/flow/argument_match/priorities.md:119:7]
 119 │ fn f( a: Scalar, b: Length, c=2cm, d: Length) -> Volume {} // warning: unused a,b,c,d
     ·       ┬
     ·       ╰── Unused local a.
 120 │ 
     ╰────
  ⚠ warning: 119:18: Unused local b.
     ╭─[../books/language/src/flow/argument_match/priorities.md:119:18]
 119 │ fn f( a: Scalar, b: Length, c=2cm, d: Length) -> Volume {} // warning: unused a,b,c,d
     ·                  ┬
     ·                  ╰── Unused local b.
 120 │ 
     ╰────
  ⚠ warning: 119:29: Unused local c.
     ╭─[../books/language/src/flow/argument_match/priorities.md:119:29]
 119 │ fn f( a: Scalar, b: Length, c=2cm, d: Length) -> Volume {} // warning: unused a,b,c,d
     ·                             ┬
     ·                             ╰── Unused local c.
 120 │ 
     ╰────
  ⚠ warning: 119:36: Unused local d.
     ╭─[../books/language/src/flow/argument_match/priorities.md:119:36]
 119 │ fn f( a: Scalar, b: Length, c=2cm, d: Length) -> Volume {} // warning: unused a,b,c,d
     ·                                    ┬
     ·                                    ╰── Unused local d.
 120 │ 
     ╰────
-- No Model --
-- Test Result --
OK

========= ./books/language/book/flow/argument_match/.test/argument_match_type.log =========

﻿
-- Test --
        Test name: argument_match_type
  Expected result: ok
      Source file: ../books/language/src/flow/argument_match/priorities.md:81
        Test path: ../books/language/src/flow/argument_match/.test

-- Code --

  81:   fn f( a: Scalar, b: Length, c: Area ) {}  // warning: unused a,b,c
  82:   // Who needs names?
  83:   f(1.0, 2cm, 3cm²);

-- No Output --
-- Errors --
  ⚠ warning: 81:7: Unused local a.
    ╭─[../books/language/src/flow/argument_match/priorities.md:81:7]
 81 │ fn f( a: Scalar, b: Length, c: Area ) {}  // warning: unused a,b,c
    ·       ┬
    ·       ╰── Unused local a.
 82 │ // Who needs names?
    ╰────
  ⚠ warning: 81:18: Unused local b.
    ╭─[../books/language/src/flow/argument_match/priorities.md:81:18]
 81 │ fn f( a: Scalar, b: Length, c: Area ) {}  // warning: unused a,b,c
    ·                  ┬
    ·                  ╰── Unused local b.
 82 │ // Who needs names?
    ╰────
  ⚠ warning: 81:29: Unused local c.
    ╭─[../books/language/src/flow/argument_match/priorities.md:81:29]
 81 │ fn f( a: Scalar, b: Length, c: Area ) {}  // warning: unused a,b,c
    ·                             ┬
    ·                             ╰── Unused local c.
 82 │ // Who needs names?
    ╰────
-- No Model --
-- Test Result --
OK

========= ./books/language/book/flow/argument_match/.test/match_warnings.log =========

﻿
-- Test --
        Test name: match_warnings
  Expected result: fail
      Source file: ../books/language/src/flow/argument_match/errors.md:21
        Test path: ../books/language/src/flow/argument_match/.test

-- Code --

  21:   fn f( x: Length, y: Length, z: Length ) {}
  22:   f( x=1cm, y=2cm, v=5cm, z=3cm);  // error: Unexpected argument v

-- No Output --
-- Errors --
  × error: 22:4: Too many arguments: v
    ╭─[../books/language/src/flow/argument_match/errors.md:22:4]
 21 │ fn f( x: Length, y: Length, z: Length ) {}
 22 │ f( x=1cm, y=2cm, v=5cm, z=3cm);  // error: Unexpected argument v
    ·    ─────────────┬────────────
    ·                 ╰── Too many arguments: v
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/flow/argument_match/.test/argument_match_auto_err.log =========

﻿
-- Test --
        Test name: argument_match_auto_err
  Expected result: fail
      Source file: ../books/language/src/flow/argument_match/inline_identifier.md:30
        Test path: ../books/language/src/flow/argument_match/.test

-- Code --

  30:   fn f(x: Integer, y: Integer) -> Integer { x*y }
  31:   x = 1;
  32:   y = 2;
  33:   f(x * y, y * x); // error: cannot be matched because arguments are not unique.

-- No Output --
-- Errors --
  × error: 33:3: Missing arguments: x,y
    ╭─[../books/language/src/flow/argument_match/inline_identifier.md:33:3]
 32 │ y = 2;
 33 │ f(x * y, y * x); // error: cannot be matched because arguments are not unique.
    ·   ──────┬─────
    ·         ╰── Missing arguments: x,y
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/flow/argument_match/.test/match_errors.log =========

﻿
-- Test --
        Test name: match_errors
  Expected result: fail
      Source file: ../books/language/src/flow/argument_match/errors.md:10
        Test path: ../books/language/src/flow/argument_match/.test

-- Code --

  10:   fn f( x: Length, y: Length, z: Length ) {}
  11:   f( x=1cm, z=3cm); // error: y is missing here

-- No Output --
-- Errors --
  × error: 11:4: Missing arguments: y
    ╭─[../books/language/src/flow/argument_match/errors.md:11:4]
 10 │ fn f( x: Length, y: Length, z: Length ) {}
 11 │ f( x=1cm, z=3cm); // error: y is missing here
    ·    ──────┬─────
    ·          ╰── Missing arguments: y
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/expressions/.test/expression_model.log =========

﻿
-- Test --
        Test name: expression_model
  Expected result: todo
      Source file: ../books/language/src/expressions/README.md:70
        Test path: ../books/language/src/expressions/.test

-- Code --

  70:   // Using logical operators between models too
  71:   std::debug::assert_eq([ std::geo2d::Circle(1cm) == std::geo2d::Circle(10mm), true ]);

-- No Output --
-- Errors --
  × error: 71:44: Workbench Circle has ambiguous initialization for those arguments
    ╭─[../books/language/src/expressions/README.md:71:25]
 70 │ // Using logical operators between models too
 71 │ std::debug::assert_eq([ std::geo2d::Circle(1cm) == std::geo2d::Circle(10mm), true ]);
    ·                         ───────────┬───────────
    ·                                    ╰── Got: Circle( 10mm )
    ╰────
  help: Ambiguous initializations:
        	std::geo2d::Circle(radius: Length, center = (x = 0mm, y = 0mm))
        	std::geo2d::Circle::init(diameter: Length, center = (x = 0mm, y = 0mm))
  × error: 71:71: Workbench Circle has ambiguous initialization for those arguments
    ╭─[../books/language/src/expressions/README.md:71:52]
 70 │ // Using logical operators between models too
 71 │ std::debug::assert_eq([ std::geo2d::Circle(1cm) == std::geo2d::Circle(10mm), true ]);
    ·                                                    ────────────┬───────────
    ·                                                                ╰── Got: Circle( 10mm )
    ╰────
  help: Ambiguous initializations:
        	std::geo2d::Circle(radius: Length, center = (x = 0mm, y = 0mm))
        	std::geo2d::Circle::init(diameter: Length, center = (x = 0mm, y = 0mm))
  × error: 71:23: Assertion failed: Values differ: [false, true]
    ╭─[../books/language/src/expressions/README.md:71:23]
 70 │ // Using logical operators between models too
 71 │ std::debug::assert_eq([ std::geo2d::Circle(1cm) == std::geo2d::Circle(10mm), true ]);
    ·                       ──────────────────────────────┬──────────────────────────────
    ·                                                     ╰── Assertion failed: Values differ: [false, true]
    ╰────
Unexpected error(s) which did occur in line(s): 71
-- Test Result --
TODO

========= ./books/language/book/expressions/.test/expression_quantity.log =========

﻿
-- Test --
        Test name: expression_quantity
  Expected result: todo
      Source file: ../books/language/src/expressions/README.md:34
        Test path: ../books/language/src/expressions/.test

-- Code --

  34:   use std::debug::assert_eq;
  35:   
  36:   // an integer multiplied with another one remains a integer
  37:   assert_eq([ 5 * 4, 20 ]);
  38:   
  39:   // a scalar multiplied with another scalar or integer results in a scalar
  40:   assert_eq([ 5.5 * 4.5, 24.75 ]);
  41:   assert_eq([ 5.1 * 4, 20.4 ]);
  42:   assert_eq([ 5 * 4.1, 20.5 ]);
  43:   
  44:   // a scalar multiplied with a length is a length
  45:   assert_eq([ 5 * 4mm, 20mm ]);
  46:   
  47:   // two length multiplied with each another is an area
  48:   assert_eq([ 5mm * 4mm, 0.2cm² ]);
  49:   
  50:   // dividing an area by a length is a length
  51:   assert_eq([ 20mm² / 4mm, 5mm ]);

-- No Output --
-- Errors --
  × error: 51:13: Quantity error: Invalid operation: `20mm²` / `4mm` (try `4mm` / `20mm²`)
  ╰─▶ Invalid operation: `20mm²` / `4mm` (try `4mm` / `20mm²`)
    ╭─[../books/language/src/expressions/README.md:51:13]
 50 │ // dividing an area by a length is a length
 51 │ assert_eq([ 20mm² / 4mm, 5mm ]);
    ·             ─────┬─────
    ·                  ╰── Quantity error: Invalid operation: `20mm²` / `4mm` (try `4mm` / `20mm²`)
    ╰────
  × error: 51:11: Array elements have different types: [<NO TYPE>, Length]
    ╭─[../books/language/src/expressions/README.md:51:11]
 50 │ // dividing an area by a length is a length
 51 │ assert_eq([ 20mm² / 4mm, 5mm ]);
    ·           ──────────┬─────────
    ·                     ╰── Array elements have different types: [<NO TYPE>, Length]
    ╰────
  × error: 51:11: Assertion failed: Invalid: <NO VALUE>
    ╭─[../books/language/src/expressions/README.md:51:11]
 50 │ // dividing an area by a length is a length
 51 │ assert_eq([ 20mm² / 4mm, 5mm ]);
    ·           ──────────┬─────────
    ·                     ╰── Assertion failed: Invalid: <NO VALUE>
    ╰────
Unexpected error(s) which did occur in line(s): 51
-- Test Result --
TODO

========= ./books/language/book/structure/workbenches/elements/.test/illegal_workbench_statement_return.log =========

﻿
-- Test --
        Test name: illegal_workbench_statement_return
  Expected result: fail
      Source file: ../books/language/src/structure/workbenches/elements/building_code.md:62
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  62:   sketch Wheel(radius: Length) {
  63:       return;         // error
  64:   }

-- No Output --
-- Errors --
  × error: 63:5: Return statement is not allowed within sketch
    ╭─[../books/language/src/structure/workbenches/elements/building_code.md:63:5]
 62 │ sketch Wheel(radius: Length) {
    · ───┬──
    ·    ╰── Within this sketch
 63 │     return;         // error
    ·     ───┬──
    ·        ╰── This return statement is not allowed
 64 │ }
    ╰────
  help: return statement is only allowed within function definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/workbenches/elements/.test/init_code_no_building_plan.log =========

﻿
-- Test --
        Test name: init_code_no_building_plan
  Expected result: todo_fail
      Source file: ../books/language/src/structure/workbenches/elements/init_code.md:47
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  47:   sketch Wheel(radius: Length, thickness = 5mm) {
  48:       use std::geo2d::Circle;
  49:   
  50:       const _ = radius * 2;   // error: cannot use radius from building plan
  51:   
  52:       init( diameter: Length ) { radius = diameter / 2; }
  53:       Circle(radius + thickness) - Circle(radius)
  54:   }
  55:   
  56:   Wheel(radius = 1cm);

-- No Output --
-- Errors --
  × error: 53:12: Workbench Circle has ambiguous initialization for those arguments
    ╭─[../books/language/src/structure/workbenches/elements/init_code.md:53:5]
 52 │     init( diameter: Length ) { radius = diameter / 2; }
 53 │     Circle(radius + thickness) - Circle(radius)
    ·     ─────────────┬────────────
    ·                  ╰── Got: Circle( 15mm )
 54 │ }
    ╰────
  help: Ambiguous initializations:
        	std::geo2d::Circle(radius: Length, center = (x = 0mm, y = 0mm))
        	std::geo2d::Circle::init(diameter: Length, center = (x = 0mm, y = 0mm))
Expected error(s) which did not occur in line(s): 50
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/structure/workbenches/elements/.test/property_no_prop_in_initializer.log =========

﻿
-- Test --
        Test name: property_no_prop_in_initializer
  Expected result: todo_fail
      Source file: ../books/language/src/structure/workbenches/elements/properties.md:71
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  71:   sketch Wheel(radius: Length, thickness = 5cm) {
  72:       init(radius: Length, inner: Length) {
  73:           thickness = radius - inner;
  74:   
  75:           prop center = radius - inner;       // error: do not use prop here
  76:       }
  77:       
  78:       prop center = radius - thickness / 2;   // here it's ok
  79:   }
  80:   center = Wheel(radius = 1cm, inner = 0.5cm).center;
  81:   
  82:   std::debug::assert_eq([ center, 1.75cm ] );

-- No Output --
-- Errors --
  × error: 75:9: Assignment statement not available here
    ╭─[../books/language/src/structure/workbenches/elements/properties.md:75:9]
 74 │ 
 75 │         prop center = radius - inner;       // error: do not use prop here
    ·         ──────────────┬─────────────
    ·                       ╰── Assignment statement not available here
 76 │     }
    ╰────
  × error: 78:10: Value center already in defined: 5mm
    ╭─[../books/language/src/structure/workbenches/elements/properties.md:78:5]
 77 │     
 78 │     prop center = radius - thickness / 2;   // here it's ok
    ·     ──────────────────┬─────────────────┬
    ·                       │                 ╰── Previously defined here
    ·                       ╰── center is already defined
 79 │ }
    ╰────
  help: Values in microcad are immutable
  × error: 78:5: Value center already in defined: 5mm
    ╭─[../books/language/src/structure/workbenches/elements/properties.md:78:10]
 77 │     
 78 │     prop center = radius - thickness / 2;   // here it's ok
    ·          ───┬──┬
    ·             │  ╰── Previously defined here
    ·             ╰── center is already defined
 79 │ }
    ╰────
  help: Values in microcad are immutable
  × error: 82:23: Assertion failed: Values differ: [7.5mm, 17.5mm]
    ╭─[../books/language/src/structure/workbenches/elements/properties.md:82:23]
 81 │ 
 82 │ std::debug::assert_eq([ center, 1.75cm ] );
    ·                       ─────────┬────────
    ·                                ╰── Assertion failed: Values differ: [7.5mm, 17.5mm]
    ╰────
Unexpected error(s) which did occur in line(s): 78, 82
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/structure/workbenches/elements/.test/code_between_initializers.log =========

﻿
-- Test --
        Test name: code_between_initializers
  Expected result: fail
      Source file: ../books/language/src/structure/workbenches/elements/initializers.md:152
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

 152:   sketch Wheel(radius: Length, thickness = 5mm) {
 153:       use std::geo2d::Circle;
 154:   
 155:       init( width: Length, thickness = 5mm ) { radius = width / 2; }
 156:       radius = 1; // error: code between initializers not allowed
 157:       init( height: Length, thickness = 5mm ) { radius = height / 2; }
 158:   
 159:       Circle(radius = radius + thickness) - Circle(radius)
 160:   }
 161:   Wheel(radius = 1cm);

-- No Output --
-- Errors --
  × error: 156:5: Code between initializers is not allowed
     ╭─[../books/language/src/structure/workbenches/elements/initializers.md:156:5]
 152 │     sketch Wheel(radius: Length, thickness = 5mm) {
     ·            ──┬──
     ·              ╰── Inside this sketch
 153 │         use std::geo2d::Circle;
 154 │     
 155 │ ╭─▶     init( width: Length, thickness = 5mm ) { radius = width / 2; }
 156 │ │       radius = 1; // error: code between initializers not allowed
     · │       ─────┬────
     · │            ╰── This statement is not allowed
 157 │ ├─▶     init( height: Length, thickness = 5mm ) { radius = height / 2; }
     · ╰──── Between these initializers
 158 │     
     ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/workbenches/elements/.test/illegal_workbench_statement_mod.log =========

﻿
-- Test --
        Test name: illegal_workbench_statement_mod
  Expected result: fail
      Source file: ../books/language/src/structure/workbenches/elements/building_code.md:54
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  54:   sketch Wheel(radius: Length) {
  55:       mod m {}        // error
  56:   }

-- No Output --
-- Errors --
  × error: 55:9: Module definition is not allowed within sketch
    ╭─[../books/language/src/structure/workbenches/elements/building_code.md:55:5]
 54 │ sketch Wheel(radius: Length) {
    · ───┬──
    ·    ╰── Within this sketch
 55 │     mod m {}        // error
    ·     ─┬─
    ·      ╰── This module definition is not allowed
 56 │ }
    ╰────
  help: module definition is only allowed within source root or module
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/workbenches/elements/.test/missed_property.log =========

﻿
-- Test --
        Test name: missed_property
  Expected result: fail
      Source file: ../books/language/src/structure/workbenches/elements/initializers.md:49
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  49:   sketch Wheel(radius: Length, thickness = 5mm) {
  50:       use std::geo2d::Circle;
  51:   
  52:       init( thickness: Length ) { } // error: misses to set radius from building plan
  53:   
  54:       Circle(radius = radius + thickness) - Circle(radius)  // error: radius is missing
  55:   }
  56:   Wheel(thickness = 1cm);

-- No Output --
-- Errors --
  × error: 52:5: Building plan incomplete. Missing properties: radius
    ╭─[../books/language/src/structure/workbenches/elements/initializers.md:52:5]
 51 │ 
 52 │     init( thickness: Length ) { } // error: misses to set radius from building plan
    ·     ───────────────────────────────────────┬───────────────────────────────────────
    ·                                            ╰── Building plan incomplete. Missing properties: radius
 53 │ 
    ╰────
  × error: 54:12: Workbench Circle cannot find initialization for those arguments
    ╭─[../books/language/src/structure/workbenches/elements/initializers.md:54:5]
 53 │ 
 54 │     Circle(radius = radius + thickness) - Circle(radius)  // error: radius is missing
    ·     ─────────────────┬─────────────────
    ·                      ╰── Got: Circle( radius = <NO VALUE> )
 55 │ }
    ╰────
  help: Possible initializations:
        	Circle( radius: Length, center = (x = 0mm, y = 0mm))
        	Circle( diameter: Length, center = (x = 0mm, y = 0mm))
  × error: 54:50: Workbench Circle cannot find initialization for those arguments
    ╭─[../books/language/src/structure/workbenches/elements/initializers.md:54:43]
 53 │ 
 54 │     Circle(radius = radius + thickness) - Circle(radius)  // error: radius is missing
    ·                                           ─────────────────────┬─────────────────────
    ·                                                                ╰── Got: Circle( radius = <NO VALUE> )
 55 │ }
    ╰────
  help: Possible initializations:
        	Circle( radius: Length, center = (x = 0mm, y = 0mm))
        	Circle( diameter: Length, center = (x = 0mm, y = 0mm))
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/workbenches/elements/.test/illegal_workbench_statement_sketch.log =========

﻿
-- Test --
        Test name: illegal_workbench_statement_sketch
  Expected result: fail
      Source file: ../books/language/src/structure/workbenches/elements/building_code.md:44
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  44:   sketch Wheel(radius: Length) {
  45:       sketch A() {}   // error
  46:       part B() {}     // error
  47:       op C() {}       // error
  48:   }

-- No Output --
-- Errors --
  × error: 45:12: Sketch is not allowed within sketch
    ╭─[../books/language/src/structure/workbenches/elements/building_code.md:45:5]
 44 │ sketch Wheel(radius: Length) {
    · ───┬──
    ·    ╰── Within this sketch
 45 │     sketch A() {}   // error
    ·     ───┬──
    ·        ╰── This sketch is not allowed
 46 │     part B() {}     // error
    ╰────
  help: sketch is only allowed within source root or module definition
  × error: 46:10: Part is not allowed within sketch
    ╭─[../books/language/src/structure/workbenches/elements/building_code.md:46:5]
 44 │ sketch Wheel(radius: Length) {
    · ───┬──
    ·    ╰── Within this sketch
 45 │     sketch A() {}   // error
 46 │     part B() {}     // error
    ·     ──┬─
    ·       ╰── This part is not allowed
 47 │     op C() {}       // error
    ╰────
  help: part is only allowed within source root or module definition
  × error: 47:8: Op is not allowed within sketch
    ╭─[../books/language/src/structure/workbenches/elements/building_code.md:47:5]
 44 │ sketch Wheel(radius: Length) {
    · ───┬──
    ·    ╰── Within this sketch
 45 │     sketch A() {}   // error
 46 │     part B() {}     // error
 47 │     op C() {}       // error
    ·     ─┬
    ·      ╰── This op is not allowed
 48 │ }
    ╰────
  help: op is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/workbenches/elements/.test/no_building_plan_same_name_different_type.log =========

﻿
-- Test --
        Test name: no_building_plan_same_name_different_type
  Expected result: todo_fail
      Source file: ../books/language/src/structure/workbenches/elements/initializers.md:132
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

 132:   sketch Wheel(radius: Length, thickness: Length) {
 133:       use std::geo2d::Circle;
 134:   
 135:       init( radius: Scalar, outer: Length ) { // error: radius is already a Length in building plan
 136:           thickness = outer - (radius * 1mm);
 137:       }  
 138:   
 139:       Circle(radius = radius + thickness) - Circle(radius)
 140:   }
 141:   // Use initializer
 142:   Wheel(radius = 1.0, outer = 1cm);

-- No Output --
-- Errors --
  × error: 139:21: Quantity error: Invalid operation: `1` + `9mm` (try `9mm` + `1`)
  ╰─▶ Invalid operation: `1` + `9mm` (try `9mm` + `1`)
     ╭─[../books/language/src/structure/workbenches/elements/initializers.md:139:21]
 138 │ 
 139 │     Circle(radius = radius + thickness) - Circle(radius)
     ·                     ─────────┬────────
     ·                              ╰── Quantity error: Invalid operation: `1` + `9mm` (try `9mm` + `1`)
 140 │ }
     ╰────
  × error: 139:12: Workbench Circle cannot find initialization for those arguments
     ╭─[../books/language/src/structure/workbenches/elements/initializers.md:139:5]
 138 │ 
 139 │     Circle(radius = radius + thickness) - Circle(radius)
     ·     ─────────────────┬─────────────────
     ·                      ╰── Got: Circle( radius = <NO VALUE> )
 140 │ }
     ╰────
  help: Possible initializations:
        	Circle( radius: Length, center = (x = 0mm, y = 0mm))
        	Circle( diameter: Length, center = (x = 0mm, y = 0mm))
  × error: 139:50: Workbench Circle cannot find initialization for those arguments
     ╭─[../books/language/src/structure/workbenches/elements/initializers.md:139:43]
 138 │ 
 139 │     Circle(radius = radius + thickness) - Circle(radius)
     ·                                           ───────┬──────
     ·                                                  ╰── Got: Circle( radius = 1 )
 140 │ }
     ╰────
  help: Possible initializations:
        	Circle( radius: Length, center = (x = 0mm, y = 0mm))
        	Circle( diameter: Length, center = (x = 0mm, y = 0mm))
Expected error(s) which did not occur in line(s): 135
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/structure/workbenches/elements/.test/no_building_plan_in_initializers.log =========

﻿
-- Test --
        Test name: no_building_plan_in_initializers
  Expected result: todo_fail
      Source file: ../books/language/src/structure/workbenches/elements/initializers.md:91
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  91:   sketch Wheel(radius: Length, thickness = 5mm) {
  92:       use std::geo2d::Circle;
  93:       
  94:       init( diameter: Length, thickness = 5mm ) { 
  95:           _ = radius;            // error: cannot read radius here
  96:           radius = diameter / 2; // instead you need to set it
  97:       }
  98:       
  99:       Circle(radius = radius + thickness) - Circle(radius)
 100:   }
 101:   Wheel(diameter = 1cm);

-- No Output --
-- No Errors --
Expected error(s) which did not occur in line(s): 95
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/structure/workbenches/elements/.test/pre_init_code.log =========

﻿
-- Test --
        Test name: pre_init_code
  Expected result: ok
      Source file: ../books/language/src/structure/workbenches/elements/init_code.md:13
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  13:   sketch Wheel(radius: Length) {
  14:       // init code
  15:       const FACTOR = 2.0;
  16:   
  17:       // initializer
  18:       init(diameter: Length) { into_radius(diameter) }
  19:   
  20:       // function
  21:       fn into_radius( diameter: Length ) {
  22:           // use constant FACTOR from init code
  23:           diameter / FACTOR
  24:       }
  25:   
  26:       // set property diameter and use FACTOR from init code
  27:       prop diameter = radius * FACTOR;
  28:       
  29:       // code body
  30:       std::geo2d::Circle(radius);
  31:   }
  32:   
  33:   std::debug::assert_eq([ Wheel(radius = 5cm).radius, 5cm ]);
  34:   std::debug::assert_eq([ Wheel(radius = 5cm).diameter, 10cm ]);

-- No Output --
-- Errors --
  ⚠ warning: 21:8: Unused global symbol into_radius.
    ╭─[../books/language/src/structure/workbenches/elements/init_code.md:21:8]
 20 │     // function
 21 │     fn into_radius( diameter: Length ) {
    ·        ─────┬─────
    ·             ╰── Unused global symbol into_radius.
 22 │         // use constant FACTOR from init code
    ╰────
Unexpected warnings(s) which did occur in line(s): 21
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/structure/workbenches/elements/.test/property_wrong.log =========

﻿
-- Test --
        Test name: property_wrong
  Expected result: fail
      Source file: ../books/language/src/structure/workbenches/elements/properties.md:44
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  44:   sketch Wheel(outer: Length) {
  45:       use std::geo2d::Circle;
  46:   
  47:       // `inner` is declared as variable and may not be read
  48:       // from outside this workbench
  49:       inner = outer / 2;
  50:   
  51:       Circle(radius = outer) - Circle(radius = inner);
  52:   }
  53:   
  54:   t = Wheel(outer = 1cm);
  55:   
  56:   // you can still extract and display `outer`
  57:   std::print("outer: {t.outer}");
  58:   // but you cannot access `inner` anymore
  59:   std::print("inner: {t.inner}"); // error

-- Output --
outer: 10mm
inner: <NO VALUE>

-- Errors --
  × error: 59:21: Property not found: inner
    ╭─[../books/language/src/structure/workbenches/elements/properties.md:59:21]
 58 │ // but you cannot access `inner` anymore
 59 │ std::print("inner: {t.inner}"); // error
    ·                     ───┬───
    ·                        ╰── Property not found: inner
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/workbenches/elements/.test/no_building_plan_same_name.log =========

﻿
-- Test --
        Test name: no_building_plan_same_name
  Expected result: fail
      Source file: ../books/language/src/structure/workbenches/elements/initializers.md:113
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

 113:   sketch Wheel(radius: Length, thickness: Length) {
 114:       use std::geo2d::Circle;
 115:   
 116:       init( radius: Length ) {
 117:           // radius property has already been set by building plan
 118:           radius = radius * 2;  // error: it cannot be set a second time
 119:           thickness = 5mm;
 120:       }
 121:       Circle(radius = radius + thickness) - Circle(radius)
 122:   }
 123:   // Use initializer
 124:   Wheel(radius = 1cm);

-- No Output --
-- Errors --
  × error: 118:9: Value radius already in defined: 10mm
     ╭─[../books/language/src/structure/workbenches/elements/initializers.md:118:9]
 117 │         // radius property has already been set by building plan
 118 │         radius = radius * 2;  // error: it cannot be set a second time
     ·         ─────────┬─────────┬
     ·                  │         ╰── Previously defined here
     ·                  ╰── radius is already defined
 119 │         thickness = 5mm;
     ╰────
  help: Values in microcad are immutable
  × error: 118:9: Value radius already in defined: 10mm
     ╭─[../books/language/src/structure/workbenches/elements/initializers.md:118:9]
 117 │         // radius property has already been set by building plan
 118 │         radius = radius * 2;  // error: it cannot be set a second time
     ·         ───┬──┬
     ·            │  ╰── Previously defined here
     ·            ╰── radius is already defined
 119 │         thickness = 5mm;
     ╰────
  help: Values in microcad are immutable
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/workbenches/elements/.test/property_no_prop_in_init_code.log =========

﻿
-- Test --
        Test name: property_no_prop_in_init_code
  Expected result: fail
      Source file: ../books/language/src/structure/workbenches/elements/properties.md:95
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  95:   sketch Wheel(outer: Length) {
  96:   
  97:       prop max = 100;     // error: do not use prop here
  98:   
  99:       init(inner: Length) {
 100:           outer = inner * 2;
 101:       }
 102:   }
 103:   Wheel(inner = 0.5cm);

-- No Output --
-- Errors --
  × error: 97:5: Statement not allowed prior initializers
     ╭─[../books/language/src/structure/workbenches/elements/properties.md:97:5]
  95 │ sketch Wheel(outer: Length) {
     ·        ──┬──
     ·          ╰── Inside this sketch
  96 │ 
  97 │     prop max = 100;     // error: do not use prop here
     ·     ───────┬──────
     ·            ╰── This statement is not allowed
  98 │ 
  99 │     init(inner: Length) {
     ·     ──┬─
     ·       ╰── Before this initializer
 100 │         outer = inner * 2;
     ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/workbenches/elements/.test/building_plan_defaults.log =========

﻿
-- Test --
        Test name: building_plan_defaults
  Expected result: todo
      Source file: ../books/language/src/structure/workbenches/elements/initializers.md:67
        Test path: ../books/language/src/structure/workbenches/elements/.test

-- Code --

  67:   sketch Wheel(radius: Length, thickness = 5mm) {
  68:       use std::geo2d::Circle;
  69:       
  70:       init(diameter: Length) { 
  71:           radius = diameter / 2;
  72:           // thickness has been set automatically by the default in the building plan 
  73:       }
  74:       
  75:       Circle(radius = radius + thickness) - Circle(radius)
  76:   }
  77:   
  78:   Wheel(diameter = 1cm);

-- No Output --
-- Errors --
  × error: 70:5: Building plan incomplete. Missing properties: thickness
    ╭─[../books/language/src/structure/workbenches/elements/initializers.md:70:5]
 69 │         
 70 │ ╭─▶     init(diameter: Length) { 
 71 │ │           radius = diameter / 2;
 72 │ │           // thickness has been set automatically by the default in the building plan 
 73 │ ├─▶     }
    · ╰──── Building plan incomplete. Missing properties: thickness
 74 │         
    ╰────
  × error: 75:12: Workbench Circle cannot find initialization for those arguments
    ╭─[../books/language/src/structure/workbenches/elements/initializers.md:75:5]
 74 │     
 75 │     Circle(radius = radius + thickness) - Circle(radius)
    ·     ─────────────────┬─────────────────
    ·                      ╰── Got: Circle( radius = <NO VALUE> )
 76 │ }
    ╰────
  help: Possible initializations:
        	Circle( radius: Length, center = (x = 0mm, y = 0mm))
        	Circle( diameter: Length, center = (x = 0mm, y = 0mm))
Unexpected error(s) which did occur in line(s): 70, 75
-- Test Result --
TODO

========= ./books/language/book/structure/workbenches/types/.test/part_basic.log =========

﻿
-- Test --
        Test name: part_basic
  Expected result: ok
      Source file: ../books/language/src/structure/workbenches/types/parts.md:9
        Test path: ../books/language/src/structure/workbenches/types/.test

-- Code --

   9:   part MyPart( radius: Length ) {
  10:       use std::geo3d::*;
  11:       Sphere(radius) - Cube(radius)
  12:   }
  13:   
  14:   MyPart(1cm);

-- No Output --
-- Errors --
  ⚠ warning: 45:10: Unused local Cylinder.
    ╭─[../crates/std/lib/std/geo3d.µcad:45:10]
 44 │ /// * with radius `r` and height `h`: `Cylinder(r = 10.0mm, h = 5.0mm)`
 45 │ pub part Cylinder(radius_bottom: Length, radius_top: Length, height: Length, offset: Length = 0.0mm) {
    ·          ────┬───
    ·              ╰── Unused local Cylinder.
 46 │     /// Initialize by `radius` and `height`. Cylinder will be centered.
    ╰────
  ⚠ warning: 85:10: Unused local Torus.
    ╭─[../crates/std/lib/std/geo3d.µcad:85:10]
 84 │ /// * `Torus(major_radius = 45.0mm, minor_radius = 5.0mm)`
 85 │ pub part Torus(major_radius: Length, minor_radius: Length) {
    ·          ──┬──
    ·            ╰── Unused local Torus.
 86 │     std::geo2d::Circle(radius = minor_radius)
    ╰────
Unexpected warnings(s) which did occur in line(s): 45, 85
-- Model --
  Group (root) ->
    Workpiece(part) part_basic::MyPart(radius=10mm) ->
      - radius = 10mm
      Operation subtract() ->
        Group ->
          Workpiece(part) std::geo3d::Sphere(radius=10mm) ->
            - radius = 10mm
            Primitive3D __builtin::geo3d::Sphere(radius=10mm) ->
          Workpiece(part) std::geo3d::Cube(size=10mm) ->
            - size_x = 10mm
            - size_y = 10mm
            - size_z = 10mm
            Workpiece(op) std::ops::translate(x=0mm, y=0mm, z=-5mm) ->
              - x = 0mm
              - y = 0mm
              - z = -5mm
              Transform __builtin::ops::translate(x=0mm, y=0mm, z=-5mm) ->
                Workpiece(op) std::ops::extrude(height=10mm, scale=(x=1, y=1), twist=0rad) ->
                  - height = 10mm
                  - scale = (x=1, y=1)
                  - twist = 0rad
                  Operation __builtin::ops::extrude(height=10mm, scale_x=1, scale_y=1, twist=0rad) ->
                    Workpiece(sketch) std::geo2d::Rect(height=10mm, width=10mm) ->
                      - height = 10mm
                      - width = 10mm
                      - x = -5mm
                      - y = -5mm
                      Primitive2D __builtin::geo2d::Rect(height=10mm, width=10mm, x=-5mm, y=-5mm) ->

Export of "../books/language/src/structure/workbenches/types/.test/part_basic-out.stl" successful.
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/structure/workbenches/types/.test/parameters.log =========

﻿
-- Test --
        Test name: parameters
  Expected result: todo
      Source file: ../books/language/src/structure/workbenches/types/operations.md:64
        Test path: ../books/language/src/structure/workbenches/types/.test

-- Code --

  64:   // define operation which takes multiple items
  65:   op punch_disk(radius: Length) {
  66:       if @input.count() == 1 {
  67:           { 
  68:               @input;
  69:               std::geo2d::Circle(radius);
  70:           }.subtract();
  71:       } else {
  72:           std::error("punch_disk must get one object");
  73:       }
  74:   }
  75:   
  76:   // use operation punch_disk on a circle
  77:   {
  78:       std::geo2d::Circle(radius = 2cm);
  79:   }.punch_disk(radius = 1cm);

-- No Output --
-- Errors --
  × error: 66:15: Symbol count not found.
    ╭─[../books/language/src/structure/workbenches/types/operations.md:66:15]
 65 │ op punch_disk(radius: Length) {
 66 │     if @input.count() == 1 {
    ·               ──┬──
    ·                 ╰── Symbol count not found.
 67 │         { 
    ╰────
  × error: 66:5: If condition is not a boolean: <NO VALUE>
    ╭─[../books/language/src/structure/workbenches/types/operations.md:66:8]
 65 │ op punch_disk(radius: Length) {
 66 │     if @input.count() == 1 {
    ·        ─────────┬─────────
    ·                 ╰── Not a boolean
 67 │         { 
    ╰────
Unexpected error(s) which did occur in line(s): 66
-- Test Result --
TODO

========= ./books/language/book/structure/workbenches/types/.test/sketch_3d.log =========

﻿
-- Test --
        Test name: sketch_3d
  Expected result: todo_fail
      Source file: ../books/language/src/structure/workbenches/types/sketches.md:32
        Test path: ../books/language/src/structure/workbenches/types/.test

-- Code --

  32:   sketch MySketch( radius: Length) {
  33:       use std::geo3d::*;
  34:       Sphere(radius) - Cube(size = radius);  // error: Sphere and Cube are 3D
  35:   }
  36:   
  37:   MySketch(1cm);

-- No Output --
-- Errors --
  ⚠ warning: 68:10: Unused local Cylinder.
    ╭─[../crates/std/lib/std/geo3d.µcad:68:10]
 67 │ /// * with radius `r` and height `h`: `Cylinder(r = 10.0mm, h = 5.0mm)`
 68 │ pub part Cylinder(radius_bottom: Length, radius_top: Length, height: Length, offset: Length = 0.0mm) {
    ·          ────┬───
    ·              ╰── Unused local Cylinder.
 69 │     /// Initialize by `radius` and `height`. Cylinder will be centered.
    ╰────
  ⚠ warning: 108:10: Unused local Torus.
     ╭─[../crates/std/lib/std/geo3d.µcad:108:10]
 107 │ /// * `Torus(major_radius = 45.0mm, minor_radius = 5.0mm)`
 108 │ pub part Torus(major_radius: Length, minor_radius: Length) {
     ·          ──┬──
     ·            ╰── Unused local Torus.
 109 │     std::geo2d::Circle(radius = minor_radius)
     ╰────
Expected error(s) which did not occur in line(s): 34
Unexpected warnings(s) which did occur in line(s): 68, 108
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/structure/workbenches/types/.test/sketch_basic.log =========

﻿
-- Test --
        Test name: sketch_basic
  Expected result: ok
      Source file: ../books/language/src/structure/workbenches/types/sketches.md:11
        Test path: ../books/language/src/structure/workbenches/types/.test

-- Code --

  11:   sketch MySketch( radius: Length) {
  12:       use std::geo2d::*;
  13:       Circle(radius) - Rect(size = radius);
  14:   }
  15:   
  16:   MySketch(1cm);

-- No Output --
-- Errors --
  ⚠ warning: 29:12: Unused local Frame.
    ╭─[../crates/std/lib/std/geo2d.µcad:29:12]
 28 │ /// A frame with a thickness.
 29 │ pub sketch Frame(width: Length, height: Length, thickness: Length) {
    ·            ──┬──
    ·              ╰── Unused local Frame.
 30 │     std::debug::assert(thickness > 0.0mm, "Thickness must be a positive number (thickness = {thickness})");
    ╰────
  ⚠ warning: 35:12: Unused local Hexagon.
    ╭─[../crates/std/lib/std/geo2d.µcad:35:12]
 34 │ /// A regular hexagon.
 35 │ pub sketch Hexagon(radius: Length) {
    ·            ───┬───
    ·               ╰── Unused local Hexagon.
 36 │     Ngon(6, radius);
    ╰────
  ⚠ warning: 40:12: Unused local InvoluteGearProfile.
    ╭─[../crates/std/lib/std/geo2d.µcad:40:12]
 39 │ 
 40 │ pub sketch InvoluteGearProfile(module: Length, teeth: Integer, pressure_angle = 0° /* The built-in formula is wrong, this should be 20° */) {
    ·            ─────────┬─────────
    ·                     ╰── Unused local InvoluteGearProfile.
 41 │     prop pitch_radius = module * teeth / 2.0;
    ╰────
  ⚠ warning: 50:12: Unused local Line.
    ╭─[../crates/std/lib/std/geo2d.µcad:50:12]
 49 │ 
 50 │ pub sketch Line(p0: Vec2, p1: Vec2) {
    ·            ──┬─
    ·              ╰── Unused local Line.
 51 │     init(width: Length, y = 0.0mm) {
    ╰────
  ⚠ warning: 70:12: Unused local Ngon.
    ╭─[../crates/std/lib/std/geo2d.µcad:70:12]
 69 │ /// A regular convex polygon with `n` corners.
 70 │ pub sketch Ngon(n: Integer, radius: Length) {
    ·            ──┬─
    ·              ╰── Unused local Ngon.
 71 │     std::debug::assert(n > 2, "N must be at least 3.");
    ╰────
  ⚠ warning: 95:12: Unused local Ring.
    ╭─[../crates/std/lib/std/geo2d.µcad:95:12]
 94 │ 
 95 │ pub sketch Ring(outer_radius: Length, inner_radius: Length ) {
    ·            ──┬─
    ·              ╰── Unused local Ring.
 96 │      init(outer_radius: Length, thickness: Length) {
    ╰────
  ⚠ warning: 117:12: Unused local RoundedRect.
     ╭─[../crates/std/lib/std/geo2d.µcad:117:12]
 116 │ /// * Centered rect with width and height: `RoundedRect(width = 10.0mm, height = 5.0mm);`
 117 │ pub sketch RoundedRect(
     ·            ─────┬─────
     ·                 ╰── Unused local RoundedRect.
 118 │     width: Length,
     ╰────
  ⚠ warning: 157:12: Unused local Sector.
     ╭─[../crates/std/lib/std/geo2d.µcad:157:12]
 156 │ /// Circle sector definition.
 157 │ pub sketch Sector(radius: Length, start: Angle, end: Angle) {
     ·            ───┬──
     ·               ╰── Unused local Sector.
 158 │     init(radius: Length, angle: Angle, offset = 0°) {
     ╰────
  ⚠ warning: 166:12: Unused local SinusoidalGearProfile.
     ╭─[../crates/std/lib/std/geo2d.µcad:166:12]
 165 │ 
 166 │ pub sketch SinusoidalGearProfile(module: Length, teeth: Integer, roundness = 0.5, stretch = 0.5) {
     ·            ──────────┬──────────
     ·                      ╰── Unused local SinusoidalGearProfile.
 167 │     prop pitch_radius = module * teeth;
     ╰────
  ⚠ warning: 176:12: Unused local Text.
     ╭─[../crates/std/lib/std/geo2d.µcad:176:12]
 175 │ /// Text definition.
 176 │ pub sketch Text(height: Length, text: String, font_file = "") {
     ·            ──┬─
     ·              ╰── Unused local Text.
 177 │     __builtin::geo2d::Text(height, text, font_file);
     ╰────
Unexpected warnings(s) which did occur in line(s): 29, 35, 40, 50, 70, 95, 117, 157, 166, 176
-- Model --
  Group (root) ->
    Workpiece(sketch) sketch_basic::MySketch(radius=10mm) ->
      - radius = 10mm
      Operation subtract() ->
        Group ->
          Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=10mm) ->
            - center = (x=0mm, y=0mm)
            - radius = 10mm
            Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
              Primitive2D __builtin::geo2d::Circle(radius=10mm) ->
          Workpiece(sketch) std::geo2d::Rect(size=10mm) ->
            - height = 10mm
            - width = 10mm
            - x = -5mm
            - y = -5mm
            Primitive2D __builtin::geo2d::Rect(height=10mm, width=10mm, x=-5mm, y=-5mm) ->

Export of "../books/language/src/structure/workbenches/types/.test/sketch_basic-out.svg" successful.
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/structure/workbenches/types/.test/part_2d.log =========

﻿
-- Test --
        Test name: part_2d
  Expected result: todo_fail
      Source file: ../books/language/src/structure/workbenches/types/parts.md:28
        Test path: ../books/language/src/structure/workbenches/types/.test

-- Code --

  28:   sketch MyPart( radius: Length) {
  29:       use std::geo2d::*;
  30:       Circle(radius) - Rect(radius);  // error: Circle and Rect are 2D
  31:   }
  32:   
  33:   MyPart(1cm);

-- No Output --
-- Errors --
  ⚠ warning: 46:12: Unused local Frame.
    ╭─[../crates/std/lib/std/geo2d.µcad:46:12]
 45 │ /// A frame with a thickness.
 46 │ pub sketch Frame(width: Length, height: Length, thickness: Length) {
    ·            ──┬──
    ·              ╰── Unused local Frame.
 47 │     std::debug::assert(thickness > 0.0mm, "Thickness must be a positive number (thickness = {thickness})");
    ╰────
  ⚠ warning: 52:12: Unused local Hexagon.
    ╭─[../crates/std/lib/std/geo2d.µcad:52:12]
 51 │ /// A regular hexagon.
 52 │ pub sketch Hexagon(radius: Length) {
    ·            ───┬───
    ·               ╰── Unused local Hexagon.
 53 │     Ngon(6, radius);
    ╰────
  ⚠ warning: 57:12: Unused local InvoluteGearProfile.
    ╭─[../crates/std/lib/std/geo2d.µcad:57:12]
 56 │ 
 57 │ pub sketch InvoluteGearProfile(module: Length, teeth: Integer, pressure_angle = 0° /* The built-in formula is wrong, this should be 20° */) {
    ·            ─────────┬─────────
    ·                     ╰── Unused local InvoluteGearProfile.
 58 │     prop pitch_radius = module * teeth / 2.0;
    ╰────
  ⚠ warning: 67:12: Unused local Line.
    ╭─[../crates/std/lib/std/geo2d.µcad:67:12]
 66 │ 
 67 │ pub sketch Line(p0: Vec2, p1: Vec2) {
    ·            ──┬─
    ·              ╰── Unused local Line.
 68 │     init(width: Length, y = 0.0mm) {
    ╰────
  ⚠ warning: 87:12: Unused local Ngon.
    ╭─[../crates/std/lib/std/geo2d.µcad:87:12]
 86 │ /// A regular convex polygon with `n` corners.
 87 │ pub sketch Ngon(n: Integer, radius: Length) {
    ·            ──┬─
    ·              ╰── Unused local Ngon.
 88 │     std::debug::assert(n > 2, "N must be at least 3.");
    ╰────
  ⚠ warning: 112:12: Unused local Ring.
     ╭─[../crates/std/lib/std/geo2d.µcad:112:12]
 111 │ 
 112 │ pub sketch Ring(outer_radius: Length, inner_radius: Length ) {
     ·            ──┬─
     ·              ╰── Unused local Ring.
 113 │      init(outer_radius: Length, thickness: Length) {
     ╰────
  ⚠ warning: 134:12: Unused local RoundedRect.
     ╭─[../crates/std/lib/std/geo2d.µcad:134:12]
 133 │ /// * Centered rect with width and height: `RoundedRect(width = 10.0mm, height = 5.0mm);`
 134 │ pub sketch RoundedRect(
     ·            ─────┬─────
     ·                 ╰── Unused local RoundedRect.
 135 │     width: Length,
     ╰────
  ⚠ warning: 174:12: Unused local Sector.
     ╭─[../crates/std/lib/std/geo2d.µcad:174:12]
 173 │ /// Circle sector definition.
 174 │ pub sketch Sector(radius: Length, start: Angle, end: Angle) {
     ·            ───┬──
     ·               ╰── Unused local Sector.
 175 │     init(radius: Length, angle: Angle, offset = 0°) {
     ╰────
  ⚠ warning: 183:12: Unused local SinusoidalGearProfile.
     ╭─[../crates/std/lib/std/geo2d.µcad:183:12]
 182 │ 
 183 │ pub sketch SinusoidalGearProfile(module: Length, teeth: Integer, roundness = 0.5, stretch = 0.5) {
     ·            ──────────┬──────────
     ·                      ╰── Unused local SinusoidalGearProfile.
 184 │     prop pitch_radius = module * teeth;
     ╰────
  ⚠ warning: 193:12: Unused local Text.
     ╭─[../crates/std/lib/std/geo2d.µcad:193:12]
 192 │ /// Text definition.
 193 │ pub sketch Text(height: Length, text: String, font_file = "") {
     ·            ──┬─
     ·              ╰── Unused local Text.
 194 │     __builtin::geo2d::Text(height, text, font_file);
     ╰────
Expected error(s) which did not occur in line(s): 30
Unexpected warnings(s) which did occur in line(s): 46, 52, 57, 67, 87, 112, 134, 174, 183, 193
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/structure/workbenches/types/.test/input.log =========

﻿
-- Test --
        Test name: input
  Expected result: todo
      Source file: ../books/language/src/structure/workbenches/types/operations.md:38
        Test path: ../books/language/src/structure/workbenches/types/.test

-- Code --

  38:   // define operation which takes multiple items
  39:   op punched_disk() { 
  40:       // check number of input models
  41:       if @input.count() == 2 {
  42:           // make hole by subtracting both inputs
  43:           @input.subtract(); 
  44:       } else {
  45:           std::error("punched_disk must get exactly two objects");
  46:       }
  47:   }
  48:   
  49:   // use operation punch_disk with two circles
  50:   {
  51:       std::geo2d::Circle(radius = 1cm);
  52:       std::geo2d::Circle(radius = 2cm);
  53:   }.punched_disk();

-- No Output --
-- Errors --
  × error: 41:15: Symbol count not found.
    ╭─[../books/language/src/structure/workbenches/types/operations.md:41:15]
 40 │     // check number of input models
 41 │     if @input.count() == 2 {
    ·               ──┬──
    ·                 ╰── Symbol count not found.
 42 │         // make hole by subtracting both inputs
    ╰────
  × error: 41:5: If condition is not a boolean: <NO VALUE>
    ╭─[../books/language/src/structure/workbenches/types/operations.md:41:8]
 40 │     // check number of input models
 41 │     if @input.count() == 2 {
    ·        ─────────┬─────────
    ·                 ╰── Not a boolean
 42 │         // make hole by subtracting both inputs
    ╰────
Unexpected error(s) which did occur in line(s): 41
-- Test Result --
TODO

========= ./books/language/book/structure/modules/.test/mod_example.log =========

﻿
-- Test --
        Test name: mod_example
  Expected result: ok
      Source file: ../books/language/src/structure/modules/README.md:24
        Test path: ../books/language/src/structure/modules/.test

-- Code --

  24:   // define private module
  25:   mod my {
  26:       // define public module
  27:       pub mod math {
  28:           // define PI as a public constant value
  29:           pub const PI = 3.14159;
  30:   
  31:           // define some public calculation function
  32:           pub fn abs(x: Scalar) -> Scalar {
  33:               if x < 0 { return -x; } else { return x; }
  34:           }
  35:       }
  36:   }
  37:   
  38:   // use the function and the constant
  39:   x = my::math::abs(-1.0) * my::math::PI;

-- No Output --
-- Errors --
  ⚠ warning: 39:1: Unused local x.
    ╭─[../books/language/src/structure/modules/README.md:39:1]
 38 │ // use the function and the constant
 39 │ x = my::math::abs(-1.0) * my::math::PI;
    · ┬
    · ╰── Unused local x.
    ╰────
Unexpected warnings(s) which did occur in line(s): 39
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/structure/.test/source_file_mixed.log =========

﻿
-- Test --
        Test name: source_file_mixed
  Expected result: fail
      Source file: ../books/language/src/structure/source_file.md:58
        Test path: ../books/language/src/structure/.test

-- Code --

  58:   std::geo2d::Circle(radius = 1cm);
  59:   std::geo3d::Sphere(radius = 1cm);  // error: can't mix 2D and 3D

-- No Output --
-- Errors --
  × error: 59:1: Cannot mix 2d and 3d geometries
    ╭─[../books/language/src/structure/source_file.md:59:1]
 58 │ std::geo2d::Circle(radius = 1cm);
 59 │ std::geo3d::Sphere(radius = 1cm);  // error: can't mix 2D and 3D
    · ────────────────┬───────────────
    ·                 ╰── Cannot mix 2d and 3d geometries
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/functions/.test/return_twice.log =========

﻿
-- Test --
        Test name: return_twice
  Expected result: todo_fail
      Source file: ../books/language/src/structure/functions/result.md:40
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  40:   fn pow( x: Scalar, n: Integer ) -> Scalar {
  41:       if n > 1 {
  42:           x * pow(x, n-1)
  43:       } else if n < 1 {
  44:           1.0 / x / pow(x, -n)
  45:       }
  46:       1.0 // error: without else this line would return a second value
  47:   }
  48:   
  49:   std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
  50:   std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);

-- No Output --
-- Errors --
  ⚠ warning: 40:9: Unused local x.
    ╭─[../books/language/src/structure/functions/result.md:40:9]
 40 │ fn pow( x: Scalar, n: Integer ) -> Scalar {
    ·         ┬
    ·         ╰── Unused local x.
 41 │     if n > 1 {
    ╰────
  × error: 49:23: Assertion failed: Values differ: [1, 64]
    ╭─[../books/language/src/structure/functions/result.md:49:23]
 48 │ 
 49 │ std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
    ·                       ──────────┬─────────
    ·                                 ╰── Assertion failed: Values differ: [1, 64]
 50 │ std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);
    ╰────
  ⚠ warning: 40:9: Unused local x.
    ╭─[../books/language/src/structure/functions/result.md:40:9]
 40 │ fn pow( x: Scalar, n: Integer ) -> Scalar {
    ·         ┬
    ·         ╰── Unused local x.
 41 │     if n > 1 {
    ╰────
  × error: 50:23: Assertion failed: Values differ: [1, 0.015625]
    ╭─[../books/language/src/structure/functions/result.md:50:23]
 49 │ std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
 50 │ std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);
    ·                       ────────────┬────────────
    ·                                   ╰── Assertion failed: Values differ: [1, 0.015625]
    ╰────
Expected error(s) which did not occur in line(s): 46
Unexpected warnings(s) which did occur in line(s): 40
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/structure/functions/.test/example.log =========

﻿
-- Test --
        Test name: example
  Expected result: ok
      Source file: ../books/language/src/structure/functions/README.md:14
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  14:   // define function print_error with text as parameter of type String
  15:   fn print_error( text: String ) {
  16:       // code body
  17:       std::print("ERROR: {text}");
  18:   }
  19:   
  20:   print_error("first");
  21:   print_error("second");

-- Output --
ERROR: first
ERROR: second

-- No Errors --
-- No Model --
-- Test Result --
OK

========= ./books/language/book/structure/functions/.test/function_return.log =========

﻿
-- Test --
        Test name: function_return
  Expected result: todo
      Source file: ../books/language/src/structure/functions/result.md:61
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  61:   fn pow( x: Scalar, n: Integer ) -> Scalar {
  62:       if n > 1 {
  63:           return x * pow(x, n-1);
  64:       }
  65:       if n < 1 {
  66:           return 1.0 / x / pow(x, -n);
  67:       }
  68:       1.0
  69:   }
  70:   
  71:   std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
  72:   std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);

-- No Output --
-- Errors --
  ⚠ warning: 61:9: Unused local x.
    ╭─[../books/language/src/structure/functions/result.md:61:9]
 61 │ fn pow( x: Scalar, n: Integer ) -> Scalar {
    ·         ┬
    ·         ╰── Unused local x.
 62 │     if n > 1 {
    ╰────
  × error: 71:23: Assertion failed: Values differ: [8, 64]
    ╭─[../books/language/src/structure/functions/result.md:71:23]
 70 │ 
 71 │ std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
    ·                       ──────────┬─────────
    ·                                 ╰── Assertion failed: Values differ: [8, 64]
 72 │ std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);
    ╰────
  ⚠ warning: 61:9: Unused local x.
    ╭─[../books/language/src/structure/functions/result.md:61:9]
 61 │ fn pow( x: Scalar, n: Integer ) -> Scalar {
    ·         ┬
    ·         ╰── Unused local x.
 62 │     if n > 1 {
    ╰────
Unexpected error(s) which did occur in line(s): 71
Unexpected warnings(s) which did occur in line(s): 61
-- Test Result --
TODO

========= ./books/language/book/structure/functions/.test/workbench_fn_prop.log =========

﻿
-- Test --
        Test name: workbench_fn_prop
  Expected result: fail
      Source file: ../books/language/src/structure/functions/workbench_functions.md:54
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  54:   sketch PunchedDisk(radius: Length) {
  55:       use std::geo2d::Circle;
  56:   
  57:       fn inner() {
  58:           prop hole = radius/2;  // error: prop not allowed in function
  59:           hole
  60:       }
  61:   
  62:       prop hole = radius/2;      // correct prop definition
  63:   
  64:       Circle(radius) - Circle(radius = inner());
  65:   }
  66:   
  67:   PunchedDisk(1cm);

-- No Output --
-- Errors --
  × error: 58:9: Property assigment is not allowed within function
    ╭─[../books/language/src/structure/functions/workbench_functions.md:58:9]
 56 │ 
 57 │     fn inner() {
    ·     ─┬
    ·      ╰── Within this function
 58 │         prop hole = radius/2;  // error: prop not allowed in function
    ·         ──────────┬─────────
    ·                   ╰── This property assigment is not allowed
 59 │         hole
    ╰────
  help: property assigment is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/functions/.test/workbench_init_prop.log =========

﻿
-- Test --
        Test name: workbench_init_prop
  Expected result: fail
      Source file: ../books/language/src/structure/functions/workbench_functions.md:77
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  77:   sketch PunchedDisk(radius: Length) {
  78:       use std::geo2d::Circle;
  79:   
  80:       init(diameter: Length) { 
  81:           prop radius = diameter/2; // error: prop not allowed in init
  82:       }
  83:       
  84:       init(d: Length) { 
  85:           radius = d/2;             // correct way to set radius
  86:       }
  87:   
  88:       // Accessing property in a function is ok
  89:       fn inner() { radius/2 }
  90:   
  91:       Circle(radius) - Circle(radius = inner());
  92:   }
  93:   
  94:   PunchedDisk(diameter=1cm);
  95:   PunchedDisk(d=1cm);

-- No Output --
-- Errors --
  × error: 81:9: Assignment statement not available here
    ╭─[../books/language/src/structure/functions/workbench_functions.md:81:9]
 80 │     init(diameter: Length) { 
 81 │         prop radius = diameter/2; // error: prop not allowed in init
    ·         ────────────┬───────────
    ·                     ╰── Assignment statement not available here
 82 │     }
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/functions/.test/workbench_pub.log =========

﻿
-- Test --
        Test name: workbench_pub
  Expected result: fail
      Source file: ../books/language/src/structure/functions/workbench_functions.md:36
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  36:   sketch PunchedDisk(radius: Length) {
  37:       use std::geo2d::Circle;
  38:   
  39:       pub fn inner() { radius/2 }   // error: cant use pub fn inside workbench
  40:   
  41:       Circle(radius) - Circle(radius = inner());
  42:   }
  43:   
  44:   PunchedDisk(1cm);

-- No Output --
-- Errors --
  × error: 39:12: Function statement not available here
    ╭─[../books/language/src/structure/functions/workbench_functions.md:39:12]
 38 │ 
 39 │     pub fn inner() { radius/2 }   // error: cant use pub fn inside workbench
    ·            ──┬──
    ·              ╰── Function statement not available here
 40 │ 
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/functions/.test/mod.log =========

﻿
-- Test --
        Test name: mod
  Expected result: fail
      Source file: ../books/language/src/structure/functions/module_functions.md:11
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  11:   // module math
  12:   mod math {
  13:       // pow cannot be called from outside math
  14:       fn pow( x: Scalar, n: Integer ) -> Scalar {
  15:           if n == 1 {
  16:               x   // return x
  17:           } else {
  18:               x * pow(x, n-1) // return recursive product
  19:           }
  20:       }
  21:   
  22:       // square is callable from outside math
  23:       pub fn square(x: Scalar) -> Scalar {
  24:           // call internal pow
  25:           pow(x, 2)
  26:       }
  27:   }
  28:   
  29:   // call square in math
  30:   math::square(2.0);
  31:   math::pow(2.0, 5);  // error: pow is private

-- No Output --
-- Errors --
  × error: 31:1: Symbol math::pow not found.
    ╭─[../books/language/src/structure/functions/module_functions.md:31:1]
 30 │ math::square(2.0);
 31 │ math::pow(2.0, 5);  // error: pow is private
    · ────────┬────────
    ·         ╰── Symbol math::pow not found.
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/structure/functions/.test/function_conditional_result.log =========

﻿
-- Test --
        Test name: function_conditional_result
  Expected result: todo
      Source file: ../books/language/src/structure/functions/result.md:21
        Test path: ../books/language/src/structure/functions/.test

-- Code --

  21:   fn pow( x: Scalar, n: Integer ) -> Scalar {
  22:       if n > 1 {
  23:           x * pow(x, n-1)
  24:       } else if n < 1 {
  25:           1.0 / x / pow(x, -n)
  26:       } else {
  27:           1.0
  28:       }
  29:   }
  30:   
  31:   std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
  32:   std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);

-- No Output --
-- Errors --
  ⚠ warning: 21:9: Unused local x.
    ╭─[../books/language/src/structure/functions/result.md:21:9]
 21 │ fn pow( x: Scalar, n: Integer ) -> Scalar {
    ·         ┬
    ·         ╰── Unused local x.
 22 │     if n > 1 {
    ╰────
  × error: 31:23: Assertion failed: Values differ: [8, 64]
    ╭─[../books/language/src/structure/functions/result.md:31:23]
 30 │ 
 31 │ std::debug::assert_eq([ pow(8.0,2), 64.0 ]);
    ·                       ──────────┬─────────
    ·                                 ╰── Assertion failed: Values differ: [8, 64]
 32 │ std::debug::assert_eq([ pow(8.0,-2), 0.015625 ]);
    ╰────
  ⚠ warning: 21:9: Unused local x.
    ╭─[../books/language/src/structure/functions/result.md:21:9]
 21 │ fn pow( x: Scalar, n: Integer ) -> Scalar {
    ·         ┬
    ·         ╰── Unused local x.
 22 │     if n > 1 {
    ╰────
Unexpected error(s) which did occur in line(s): 31
Unexpected warnings(s) which did occur in line(s): 21
-- Test Result --
TODO

========= ./books/language/book/types/models/.test/measure.log =========

﻿
-- Test --
        Test name: measure
  Expected result: todo
      Source file: ../books/language/src/types/models/measures.md:10
        Test path: ../books/language/src/types/models/.test

-- Code --

  10:   __builtin::debug::assert_eq([
  11:       // use measure area() on a circle
  12:       std::geo2d::Circle(radius=10mm).area(),
  13:   
  14:       // circle area formula for comparison
  15:       10mm * 10mm * std::math::PI
  16:   ]);

-- No Output --
-- Errors --
  × error: 12:37: Symbol area not found.
    ╭─[../books/language/src/types/models/measures.md:12:37]
 11 │     // use measure area() on a circle
 12 │     std::geo2d::Circle(radius=10mm).area(),
    ·                                     ──┬─
    ·                                       ╰── Symbol area not found.
 13 │ 
    ╰────
  × error: 10:29: Array elements have different types: [<NO TYPE>, Area]
    ╭─[../books/language/src/types/models/measures.md:10:29]
 10 │ ╭─▶ __builtin::debug::assert_eq([
 11 │ │       // use measure area() on a circle
 12 │ │       std::geo2d::Circle(radius=10mm).area(),
 13 │ │   
 14 │ │       // circle area formula for comparison
 15 │ │       10mm * 10mm * std::math::PI
 16 │ ├─▶ ]);
    · ╰──── Array elements have different types: [<NO TYPE>, Area]
    ╰────
  × error: 10:29: Assertion failed: Invalid: <NO VALUE>
    ╭─[../books/language/src/types/models/measures.md:10:29]
 10 │ ╭─▶ __builtin::debug::assert_eq([
 11 │ │       // use measure area() on a circle
 12 │ │       std::geo2d::Circle(radius=10mm).area(),
 13 │ │   
 14 │ │       // circle area formula for comparison
 15 │ │       10mm * 10mm * std::math::PI
 16 │ ├─▶ ]);
    · ╰──── Assertion failed: Invalid: <NO VALUE>
    ╰────
Unexpected error(s) which did occur in line(s): 10, 12
-- Test Result --
TODO

========= ./books/language/book/types/quantities/.test/types_quantity_area_units.log =========

﻿
-- Test --
        Test name: types_quantity_area_units
  Expected result: ok
      Source file: ../books/language/src/types/quantities/types.md:84
        Test path: ../books/language/src/types/quantities/.test

-- Code --

  84:   square_millimeter = 100000mm²;
  85:   square_centimeter = 1000cm2;
  86:   square_meter = 0.1m²;
  87:   square_inch = 155in²;
  88:   
  89:   std::debug::assert_eq([ square_millimeter, square_centimeter ]);

-- No Output --
-- Errors --
  ⚠ warning: 87:1: Unused local square_inch.
    ╭─[../books/language/src/types/quantities/types.md:87:1]
 86 │ square_meter = 0.1m²;
 87 │ square_inch = 155in²;
    · ─────┬─────
    ·      ╰── Unused local square_inch.
 88 │ 
    ╰────
  ⚠ warning: 86:1: Unused local square_meter.
    ╭─[../books/language/src/types/quantities/types.md:86:1]
 85 │ square_centimeter = 1000cm2;
 86 │ square_meter = 0.1m²;
    · ──────┬─────
    ·       ╰── Unused local square_meter.
 87 │ square_inch = 155in²;
    ╰────
Unexpected warnings(s) which did occur in line(s): 86, 87
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/types/quantities/.test/types_quantity_scalar.log =========

﻿
-- Test --
        Test name: types_quantity_scalar
  Expected result: ok
      Source file: ../books/language/src/types/quantities/types.md:29
        Test path: ../books/language/src/types/quantities/.test

-- Code --

  29:   zero = 0;
  30:   pi =  3.1415;
  31:   percent = 55%;

-- No Output --
-- Errors --
  ⚠ warning: 31:1: Unused local percent.
    ╭─[../books/language/src/types/quantities/types.md:31:1]
 30 │ pi =  3.1415;
 31 │ percent = 55%;
    · ───┬───
    ·    ╰── Unused local percent.
    ╰────
  ⚠ warning: 30:1: Unused local pi.
    ╭─[../books/language/src/types/quantities/types.md:30:1]
 29 │ zero = 0;
 30 │ pi =  3.1415;
    · ─┬
    ·  ╰── Unused local pi.
 31 │ percent = 55%;
    ╰────
  ⚠ warning: 29:1: Unused local zero.
    ╭─[../books/language/src/types/quantities/types.md:29:1]
 29 │ zero = 0;
    · ──┬─
    ·   ╰── Unused local zero.
 30 │ pi =  3.1415;
    ╰────
Unexpected warnings(s) which did occur in line(s): 29, 30, 31
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/types/quantities/.test/types_quantity_weight.log =========

﻿
-- Test --
        Test name: types_quantity_weight
  Expected result: ok
      Source file: ../books/language/src/types/quantities/types.md:146
        Test path: ../books/language/src/types/quantities/.test

-- Code --

 146:   gram = 1000.0g;
 147:   kilogram = 1.0kg;
 148:   pound = 2.204623lb;
 149:   
 150:   std::debug::assert_eq([ gram, kilogram ]);

-- No Output --
-- Errors --
  ⚠ warning: 148:1: Unused local pound.
     ╭─[../books/language/src/types/quantities/types.md:148:1]
 147 │ kilogram = 1.0kg;
 148 │ pound = 2.204623lb;
     · ──┬──
     ·   ╰── Unused local pound.
 149 │ 
     ╰────
Unexpected warnings(s) which did occur in line(s): 148
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/types/quantities/.test/types_quantity_operators.log =========

﻿
-- Test --
        Test name: types_quantity_operators
  Expected result: todo
      Source file: ../books/language/src/types/quantities/operators.md:13
        Test path: ../books/language/src/types/quantities/.test

-- Code --

  13:   use std::debug::assert_eq;
  14:   
  15:   assert_eq([ 6cm * 2cm, 12cm²  ]);
  16:   assert_eq([ 6cm / 2cm, 3 ]);
  17:   assert_eq([ 6cm + 2cm, 80mm ]);
  18:   assert_eq([ 6cm - 2cm, 0.04m ]);

-- No Output --
-- Errors --
  × error: 16:11: Array elements have different types: [Scalar, Integer]
    ╭─[../books/language/src/types/quantities/operators.md:16:11]
 15 │ assert_eq([ 6cm * 2cm, 12cm²  ]);
 16 │ assert_eq([ 6cm / 2cm, 3 ]);
    ·           ────────┬───────
    ·                   ╰── Array elements have different types: [Scalar, Integer]
 17 │ assert_eq([ 6cm + 2cm, 80mm ]);
    ╰────
  × error: 16:11: Assertion failed: Invalid: <NO VALUE>
    ╭─[../books/language/src/types/quantities/operators.md:16:11]
 15 │ assert_eq([ 6cm * 2cm, 12cm²  ]);
 16 │ assert_eq([ 6cm / 2cm, 3 ]);
    ·           ────────┬───────
    ·                   ╰── Assertion failed: Invalid: <NO VALUE>
 17 │ assert_eq([ 6cm + 2cm, 80mm ]);
    ╰────
Unexpected error(s) which did occur in line(s): 16
-- Test Result --
TODO

========= ./books/language/book/types/quantities/.test/types_quantity_volume_units.log =========

﻿
-- Test --
        Test name: types_quantity_volume_units
  Expected result: ok
      Source file: ../books/language/src/types/quantities/types.md:113
        Test path: ../books/language/src/types/quantities/.test

-- Code --

 113:   cubic_millimeter = 1000000.0mm³;
 114:   cubic_centimeter = 100.0cl;
 115:   cubic_meter = 0.001m3;
 116:   cubic_inch = 61.0237in³;
 117:   liter = 1.0l;
 118:   centiliter = 100.0cl;
 119:   milliliter = 1000.0ml;
 120:   
 121:   std::debug::assert_eq([ cubic_millimeter,
 122:                           cubic_centimeter,
 123:                           cubic_meter,
 124:                           centiliter,
 125:                           milliliter
 126:                           ]);

-- No Output --
-- Errors --
  ⚠ warning: 116:1: Unused local cubic_inch.
     ╭─[../books/language/src/types/quantities/types.md:116:1]
 115 │ cubic_meter = 0.001m3;
 116 │ cubic_inch = 61.0237in³;
     · ─────┬────
     ·      ╰── Unused local cubic_inch.
 117 │ liter = 1.0l;
     ╰────
  ⚠ warning: 117:1: Unused local liter.
     ╭─[../books/language/src/types/quantities/types.md:117:1]
 116 │ cubic_inch = 61.0237in³;
 117 │ liter = 1.0l;
     · ──┬──
     ·   ╰── Unused local liter.
 118 │ centiliter = 100.0cl;
     ╰────
Unexpected warnings(s) which did occur in line(s): 116, 117
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/types/quantities/.test/types_quantity_density_units.log =========

﻿
-- Test --
        Test name: types_quantity_density_units
  Expected result: ok
      Source file: ../books/language/src/types/quantities/types.md:136
        Test path: ../books/language/src/types/quantities/.test

-- Code --

 136:   gramm_per_square_centimeters = 19.302g/mm³;

-- No Output --
-- Errors --
  ⚠ warning: 136:1: Unused local gramm_per_square_centimeters.
     ╭─[../books/language/src/types/quantities/types.md:136:1]
 136 │ gramm_per_square_centimeters = 19.302g/mm³;
     · ──────────────┬─────────────
     ·               ╰── Unused local gramm_per_square_centimeters.
     ╰────
Unexpected warnings(s) which did occur in line(s): 136
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/types/quantities/.test/quantity_types_number_literals.log =========

﻿
-- Test --
        Test name: quantity_types_number_literals
  Expected result: ok
      Source file: ../books/language/src/types/quantities/README.md:11
        Test path: ../books/language/src/types/quantities/.test

-- Code --

  11:   // declare variable `height` of type `Length` to 1.4 Meters
  12:   height = 1.4m;
  13:   
  14:   // use as *default* value in parameter list
  15:   fn f( height = 1m ) {}
  16:   
  17:   // calculate a `Length` called `width` by multiplying the
  18:   // `height` with `Scalar` `2` and add ten centimeters
  19:   width = height * 2 + 10cm;

-- No Output --
-- Errors --
  ⚠ warning: 19:1: Unused local width.
    ╭─[../books/language/src/types/quantities/README.md:19:1]
 18 │ // `height` with `Scalar` `2` and add ten centimeters
 19 │ width = height * 2 + 10cm;
    · ──┬──
    ·   ╰── Unused local width.
    ╰────
  ⚠ warning: 15:4: Unused global symbol f.
    ╭─[../books/language/src/types/quantities/README.md:15:4]
 14 │ // use as *default* value in parameter list
 15 │ fn f( height = 1m ) {}
    ·    ┬
    ·    ╰── Unused global symbol f.
 16 │ 
    ╰────
Unexpected warnings(s) which did occur in line(s): 15, 19
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/types/collections/array/.test/arrays.log =========

﻿
-- Test --
        Test name: arrays
  Expected result: todo
      Source file: ../books/language/src/types/collections/array/README.md:14
        Test path: ../books/language/src/types/collections/array/.test

-- Code --

  14:   a : [Integer] = [ 1, 2, 3, 4, 5 ];
  15:   b : [Scalar]  = [ 1.42, 2.3, 3.1, 4.42, 5.23 ];
  16:   c : [Length]  = [ 1.42mm, 2.3m, 3.1cm, 4.42cm, 5.23m ];
  17:   d : [String]  = [ "one", "two", "three", "four", "five" ];
  18:   e : [Model]   = [ std::geo2d::Circle(radius = 1cm),
  19:                     std::geo3d::Sphere(radius = 1cm)
  20:                   ];

-- Parse Error --
  × error: 19:6: Unknown type: Model
    ╭─[../books/language/src/types/collections/array/README.md:19:6]
 18 │ d : [String]  = [ "one", "two", "three", "four", "five" ];
 19 │ e : [Model]   = [ std::geo2d::Circle(radius = 1cm),
    ·      ──┬──
    ·        ╰── Unknown type
 20 │                   std::geo3d::Sphere(radius = 1cm)
    ╰────

-- Test Result --
TODO

========= ./books/language/book/types/collections/array/.test/range_expressions_bad_order.log =========

﻿
-- Test --
        Test name: range_expressions_bad_order
  Expected result: fail
      Source file: ../books/language/src/types/collections/array/range.md:23
        Test path: ../books/language/src/types/collections/array/.test

-- Code --

  23:   [6..1];  // error
  24:   [2..-2];  // error

-- No Output --
-- Errors --
  × error: 23:1: Bad range, first number (6) must be smaller than last (1)
    ╭─[../books/language/src/types/collections/array/range.md:23:1]
 23 │ [6..1];  // error
    · ───┬──
    ·    ╰── Bad range, first number (6) must be smaller than last (1)
 24 │ [2..-2];  // error
    ╰────
  × error: 24:1: Bad range, first number (2) must be smaller than last (-2)
    ╭─[../books/language/src/types/collections/array/range.md:24:1]
 23 │ [6..1];  // error
 24 │ [2..-2];  // error
    · ───┬───
    ·    ╰── Bad range, first number (2) must be smaller than last (-2)
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/types/collections/array/.test/array_operation_bool.log =========

﻿
-- Test --
        Test name: array_operation_bool
  Expected result: todo
      Source file: ../books/language/src/types/collections/array/operators.md:29
        Test path: ../books/language/src/types/collections/array/.test

-- Code --

  29:   std::debug::assert_eq([ ![true, false], [false, true] ]);

-- No Output --
-- Errors --
  × error: 29:25: Value Error: Invalid operator: !
  ╰─▶ Invalid operator: !
    ╭─[../books/language/src/types/collections/array/operators.md:29:25]
 29 │ std::debug::assert_eq([ ![true, false], [false, true] ]);
    ·                         ───────┬──────
    ·                                ╰── Value Error: Invalid operator: !
    ╰────
  × error: 29:23: Array elements have different types: [<NO TYPE>, [Bool]]
    ╭─[../books/language/src/types/collections/array/operators.md:29:23]
 29 │ std::debug::assert_eq([ ![true, false], [false, true] ]);
    ·                       ────────────────┬────────────────
    ·                                       ╰── Array elements have different types: [<NO TYPE>, [Bool]]
    ╰────
  × error: 29:23: Assertion failed: Invalid: <NO VALUE>
    ╭─[../books/language/src/types/collections/array/operators.md:29:23]
 29 │ std::debug::assert_eq([ ![true, false], [false, true] ]);
    ·                       ────────────────┬────────────────
    ·                                       ╰── Assertion failed: Invalid: <NO VALUE>
    ╰────
Unexpected error(s) which did occur in line(s): 29
-- Test Result --
TODO

========= ./books/language/book/types/collections/array/.test/range_expressions_bad_type.log =========

﻿
-- Test --
        Test name: range_expressions_bad_type
  Expected result: fail
      Source file: ../books/language/src/types/collections/array/range.md:32
        Test path: ../books/language/src/types/collections/array/.test

-- Code --

  32:   [1.0..2.0];  // parse_error

-- Parse Error --
  × error: 33:2: range expressions must be between integers
    ╭─[../books/language/src/types/collections/array/range.md:33:2]
 33 │ [1.0..2.0];  // parse_error
    ·  ─┬─
    ·   ╰── range expressions must be between integers
    ╰────

-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/types/collections/array/.test/array_unit_bundling_except.log =========

﻿
-- Test --
        Test name: array_unit_bundling_except
  Expected result: todo
      Source file: ../books/language/src/types/collections/array/README.md:40
        Test path: ../books/language/src/types/collections/array/.test

-- Code --

  40:   std::debug::assert_eq([ [1mm, 2m, 3mm], [1, 2m, 3]mm ]);

-- No Output --
-- Errors --
  × error: 40:41: Array elements have different types: [Integer, Length, Integer]
    ╭─[../books/language/src/types/collections/array/README.md:40:41]
 40 │ std::debug::assert_eq([ [1mm, 2m, 3mm], [1, 2m, 3]mm ]);
    ·                                         ──────┬─────
    ·                                               ╰── Array elements have different types: [Integer, Length, Integer]
    ╰────
  × error: 40:23: Array elements have different types: [[Length], <NO TYPE>]
    ╭─[../books/language/src/types/collections/array/README.md:40:23]
 40 │ std::debug::assert_eq([ [1mm, 2m, 3mm], [1, 2m, 3]mm ]);
    ·                       ────────────────┬───────────────
    ·                                       ╰── Array elements have different types: [[Length], <NO TYPE>]
    ╰────
  × error: 40:23: Assertion failed: Invalid: <NO VALUE>
    ╭─[../books/language/src/types/collections/array/README.md:40:23]
 40 │ std::debug::assert_eq([ [1mm, 2m, 3mm], [1, 2m, 3]mm ]);
    ·                       ────────────────┬───────────────
    ·                                       ╰── Assertion failed: Invalid: <NO VALUE>
    ╰────
Unexpected error(s) which did occur in line(s): 40
-- Test Result --
TODO

========= ./books/language/book/types/collections/tuples/.test/tuple_error_mismatch.log =========

﻿
-- Test --
        Test name: tuple_error_mismatch
  Expected result: fail
      Source file: ../books/language/src/types/collections/tuples/operators.md:31
        Test path: ../books/language/src/types/collections/tuples/.test

-- Code --

  31:   (x=1, y=2) + (x=3, z=4);      // error: mismatch (x, y) + (x, z)
  32:   (x=1, y=2) + (x=3mm, y=4mm);  // error: mismatch (Integer, Integer) + (Length, Length)
  33:   (x=1, y=2) + (x=3, y=4, z=5); // error: mismatch unexpected z

-- No Output --
-- Errors --
  × error: 31:1: Tuple type mismatch: lhs=(x: Integer, y: Integer), rhs=(x: Integer, z: Integer)
    ╭─[../books/language/src/types/collections/tuples/operators.md:31:1]
 31 │ (x=1, y=2) + (x=3, z=4);      // error: mismatch (x, y) + (x, z)
    · ───────────┬───────────
    ·            ╰── Tuple type mismatch: lhs=(x: Integer, y: Integer), rhs=(x: Integer, z: Integer)
 32 │ (x=1, y=2) + (x=3mm, y=4mm);  // error: mismatch (Integer, Integer) + (Length, Length)
    ╰────
  × error: 32:1: Tuple type mismatch: lhs=(x: Integer, y: Integer), rhs=(x: Length, y: Length)
    ╭─[../books/language/src/types/collections/tuples/operators.md:32:1]
 31 │ (x=1, y=2) + (x=3, z=4);      // error: mismatch (x, y) + (x, z)
 32 │ (x=1, y=2) + (x=3mm, y=4mm);  // error: mismatch (Integer, Integer) + (Length, Length)
    · ─────────────┬─────────────
    ·              ╰── Tuple type mismatch: lhs=(x: Integer, y: Integer), rhs=(x: Length, y: Length)
 33 │ (x=1, y=2) + (x=3, y=4, z=5); // error: mismatch unexpected z
    ╰────
  × error: 33:1: Tuple type mismatch: lhs=(x: Integer, y: Integer), rhs=(x: Integer, y: Integer, z: Integer)
    ╭─[../books/language/src/types/collections/tuples/operators.md:33:1]
 32 │ (x=1, y=2) + (x=3mm, y=4mm);  // error: mismatch (Integer, Integer) + (Length, Length)
 33 │ (x=1, y=2) + (x=3, y=4, z=5); // error: mismatch unexpected z
    · ──────────────┬─────────────
    ·               ╰── Tuple type mismatch: lhs=(x: Integer, y: Integer), rhs=(x: Integer, y: Integer, z: Integer)
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/types/collections/tuples/.test/unnamed_tuple_ambiguous.log =========

﻿
-- Test --
        Test name: unnamed_tuple_ambiguous
  Expected result: todo_fail
      Source file: ../books/language/src/types/collections/tuples/README.md:64
        Test path: ../books/language/src/types/collections/tuples/.test

-- Code --

  64:   (10cm, 10mm, 1m);  // error: ambiguous type Length

-- No Output --
-- No Errors --
Expected error(s) which did not occur in line(s): 64
-- Test Result --
TODO (SHALL FAIL)

========= ./books/language/book/types/.test/types_def_vs_decl.log =========

﻿
-- Test --
        Test name: types_def_vs_decl
  Expected result: ok
      Source file: ../books/language/src/types/README.md:29
        Test path: ../books/language/src/types/.test

-- Code --

  29:   x: Length = 4mm;   // explicit type declaration
  30:   y = 4mm;           // implicit type declaration via units.

-- No Output --
-- Errors --
  ⚠ warning: 29:1: Unused local x.
    ╭─[../books/language/src/types/README.md:29:1]
 29 │ x: Length = 4mm;   // explicit type declaration
    · ┬
    · ╰── Unused local x.
 30 │ y = 4mm;           // implicit type declaration via units.
    ╰────
  ⚠ warning: 30:1: Unused local y.
    ╭─[../books/language/src/types/README.md:30:1]
 29 │ x: Length = 4mm;   // explicit type declaration
 30 │ y = 4mm;           // implicit type declaration via units.
    · ┬
    · ╰── Unused local y.
    ╰────
Unexpected warnings(s) which did occur in line(s): 29, 30
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/types/.test/format_string_err.log =========

﻿
-- Test --
        Test name: format_string_err
  Expected result: fail
      Source file: ../books/language/src/types/format_string.md:31
        Test path: ../books/language/src/types/.test

-- Code --

  31:   fn print_length( length: Length ) {  // warning: unused length
  32:       std::print("{size}");            // error: size is not known
  33:   }
  34:   
  35:   print_length(7mm);

-- Output --
<NO VALUE>

-- Errors --
  × error: 32:18: Symbol size not found.
    ╭─[../books/language/src/types/format_string.md:32:18]
 31 │ fn print_length( length: Length ) {  // warning: unused length
 32 │     std::print("{size}");            // error: size is not known
    ·                  ──┬─
    ·                    ╰── Symbol size not found.
 33 │ }
    ╰────
  ⚠ warning: 31:18: Unused local length.
    ╭─[../books/language/src/types/format_string.md:31:18]
 31 │ fn print_length( length: Length ) {  // warning: unused length
    ·                  ───┬──
    ·                     ╰── Unused local length.
 32 │     std::print("{size}");            // error: size is not known
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/language/book/types/.test/types_bundles_functions.log =========

﻿
-- Test --
        Test name: types_bundles_functions
  Expected result: ok
      Source file: ../books/language/src/types/README.md:49
        Test path: ../books/language/src/types/.test

-- Code --

  49:   fn f(x = 4mm) {}       // use unit (with default)
  50:   fn g(x: Length) {}     // use type (without default)

-- No Output --
-- Errors --
  ⚠ warning: 49:4: Unused global symbol f.
    ╭─[../books/language/src/types/README.md:49:4]
 49 │ fn f(x = 4mm) {}       // use unit (with default)
    ·    ┬
    ·    ╰── Unused global symbol f.
 50 │ fn g(x: Length) {}     // use type (without default)
    ╰────
  ⚠ warning: 50:4: Unused global symbol g.
    ╭─[../books/language/src/types/README.md:50:4]
 49 │ fn f(x = 4mm) {}       // use unit (with default)
 50 │ fn g(x: Length) {}     // use type (without default)
    ·    ┬
    ·    ╰── Unused global symbol g.
    ╰────
Unexpected warnings(s) which did occur in line(s): 49, 50
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/types/.test/types_primitive_integer.log =========

﻿
-- Test --
        Test name: types_primitive_integer
  Expected result: ok
      Source file: ../books/language/src/types/primitives.md:34
        Test path: ../books/language/src/types/.test

-- Code --

  34:   i = 3;

-- No Output --
-- Errors --
  ⚠ warning: 34:1: Unused local i.
    ╭─[../books/language/src/types/primitives.md:34:1]
 34 │ i = 3;
    · ┬
    · ╰── Unused local i.
    ╰────
Unexpected warnings(s) which did occur in line(s): 34
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/language/book/types/.test/types_no_declaration.log =========

﻿
-- Test --
        Test name: types_no_declaration
  Expected result: fail
      Source file: ../books/language/src/types/README.md:39
        Test path: ../books/language/src/types/.test

-- Code --

  39:   x: Length;         // parse_error

-- Parse Error --
  × error: 40:10: Expected '='
    ╭─[../books/language/src/types/README.md:40:10]
 40 │ x: Length;         // parse_error
    ·          ┬
    ·          ╰── Expected '='
    ╰────

-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/workbench_assignment_const.log =========

﻿
-- Test --
        Test name: workbench_assignment_const
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/workbench.md:78
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  78:   sketch K() {
  79:     const B = 1;
  80:   } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) workbench_assignment_const::K() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/pre_init_return.log =========

﻿
-- Test --
        Test name: pre_init_return
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:54
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  54:   sketch K() { 
  55:     return 1; // error
  56:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 55:3: Statement not allowed within workbenches
    ╭─[../books/tests/src/statement_usage/pre-init.md:55:3]
 54 │ sketch K() { 
 55 │   return 1; // error
    ·   ────┬───
    ·       ╰── Statement not allowed within workbenches
 56 │ init(l:Length) {} } K();
    ╰────
  × error: 55:3: Return statement is not allowed within sketch
    ╭─[../books/tests/src/statement_usage/pre-init.md:55:3]
 54 │ sketch K() { 
    · ───┬──
    ·    ╰── Within this sketch
 55 │   return 1; // error
    ·   ────┬───
    ·       ╰── This return statement is not allowed
 56 │ init(l:Length) {} } K();
    ╰────
  help: return statement is only allowed within function definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_return.log =========

﻿
-- Test --
        Test name: module_return
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/module.md:54
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  54:   mod k {
  55:     return 1;  // error
  56:   }

-- No Output --
-- Errors --
  × error: 55:3: Return statement is not allowed within module
    ╭─[../books/tests/src/statement_usage/module.md:55:3]
 54 │ mod k {
    · ─┬─
    ·  ╰── Within this module
 55 │   return 1;  // error
    ·   ────┬───
    ·       ╰── This return statement is not allowed
 56 │ }
    ╰────
  help: return statement is only allowed within function definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/body_workbench.log =========

﻿
-- Test --
        Test name: body_workbench
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/body.md:6
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

   6:   {
   7:     sketch F() {} // error
   8:   }

-- No Output --
-- Errors --
  × error: 7:10: sketch statement not available here
   ╭─[../books/tests/src/statement_usage/body.md:7:10]
 6 │ {
 7 │   sketch F() {} // error
   ·          ┬
   ·          ╰── sketch statement not available here
 8 │ }
   ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_use.log =========

﻿
-- Test --
        Test name: init_use
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/init.md:38
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  38:   sketch K() { init(l:Length) {
  39:     use std;
  40:   } } K(1cm);

-- No Output --
-- Errors --
  ⚠ warning: 38:19: Unused local l.
    ╭─[../books/tests/src/statement_usage/init.md:38:19]
 38 │ sketch K() { init(l:Length) {
    ·                   ┬
    ·                   ╰── Unused local l.
 39 │   use std;
    ╰────
Unexpected warnings(s) which did occur in line(s): 38
-- Model --
  Group (root) ->
    Workpiece(sketch) init_use::K(l=10mm) ->

Export error: Render error: Nothing to render
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/source_assignment_var.log =========

﻿
-- Test --
        Test name: source_assignment_var
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/source.md:66
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  66:   a = 1;

-- No Output --
-- Errors --
  ⚠ warning: 66:1: Unused local a.
    ╭─[../books/tests/src/statement_usage/source.md:66:1]
 66 │ a = 1;
    · ┬
    · ╰── Unused local a.
    ╰────
Unexpected warnings(s) which did occur in line(s): 66
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/pre_init_pub_use.log =========

﻿
-- Test --
        Test name: pre_init_pub_use
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:46
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  46:   sketch K() { 
  47:     pub use std; // error
  48:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 47:3: Use statement is not allowed within sketch
    ╭─[../books/tests/src/statement_usage/pre-init.md:47:3]
 46 │ sketch K() { 
    · ───┬──
    ·    ╰── Within this sketch
 47 │   pub use std; // error
    ·   ─────┬─────
    ·        ╰── This use statement is not allowed
 48 │ init(l:Length) {} } K();
    ╰────
  help: use statement is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/body_assignment_prop.log =========

﻿
-- Test --
        Test name: body_assignment_prop
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/body.md:102
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

 102:   {
 103:     prop a = 1; // error
 104:   }

-- No Output --
-- Errors --
  × error: 103:3: Assignment statement not available here
     ╭─[../books/tests/src/statement_usage/body.md:103:3]
 102 │ {
 103 │   prop a = 1; // error
     ·   ─────┬────
     ·        ╰── Assignment statement not available here
 104 │ }
     ╰────
  × error: 103:3: Missing model in workbench
     ╭─[../books/tests/src/statement_usage/body.md:103:3]
 102 │ {
 103 │   prop a = 1; // error
     ·   ─────┬────
     ·        ╰── Missing model in workbench
 104 │ }
     ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_expression_model.log =========

﻿
-- Test --
        Test name: module_expression_model
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/module.md:110
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

 110:   mod k { // warning
 111:     __builtin::geo2d::Circle(radius=1mm); // error
 112:   }

-- No Output --
-- Errors --
  × error: 111:3: Expression statement not available here
     ╭─[../books/tests/src/statement_usage/module.md:111:3]
 110 │ mod k { // warning
 111 │   __builtin::geo2d::Circle(radius=1mm); // error
     ·   ──────────────────┬─────────────────
     ·                     ╰── Expression statement not available here
 112 │ }
     ╰────
  ⚠ warning: 110:5: Unused global symbol k.
     ╭─[../books/tests/src/statement_usage/module.md:110:5]
 110 │ mod k { // warning
     ·     ┬
     ·     ╰── Unused global symbol k.
 111 │   __builtin::geo2d::Circle(radius=1mm); // error
     ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/pre_init_assignment_const.log =========

﻿
-- Test --
        Test name: pre_init_assignment_const
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/pre-init.md:70
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  70:   sketch K() { 
  71:     const B = 1;
  72:   init(l:Length) {} } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) pre_init_assignment_const::K() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/pre_init_assignment_pub.log =========

﻿
-- Test --
        Test name: pre_init_assignment_pub
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:78
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  78:   sketch K() { 
  79:     pub p = 1;  // error
  80:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 79:3: Statement not allowed within workbenches
    ╭─[../books/tests/src/statement_usage/pre-init.md:79:3]
 78 │ sketch K() { 
 79 │   pub p = 1;  // error
    ·   ────┬────
    ·       ╰── Statement not allowed within workbenches
 80 │ init(l:Length) {} } K();
    ╰────
  × error: 79:3: Public constant assigment is not allowed within sketch
    ╭─[../books/tests/src/statement_usage/pre-init.md:79:3]
 78 │ sketch K() { 
    · ───┬──
    ·    ╰── Within this sketch
 79 │   pub p = 1;  // error
    ·   ────┬────
    ·       ╰── This public constant assigment is not allowed
 80 │ init(l:Length) {} } K();
    ╰────
  help: public constant assigment is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_if.log =========

﻿
-- Test --
        Test name: init_if
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:62
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  62:   sketch K() { init(l:Length) {
  63:     if std::math::PI == l { } // error
  64:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 63:3: If statement not available here
    ╭─[../books/tests/src/statement_usage/init.md:63:3]
 62 │ sketch K() { init(l:Length) {
 63 │   if std::math::PI == l { } // error
    ·   ─────────────────┬────────────────
    ·                    ╰── If statement not available here
 64 │ } } K(1cm);
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/workbench_pub_use.log =========

﻿
-- Test --
        Test name: workbench_pub_use
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/workbench.md:46
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  46:   sketch K() {
  47:     pub use std; // error
  48:   } K();

-- No Output --
-- Errors --
  × error: 47:3: Use statement is not allowed within sketch
    ╭─[../books/tests/src/statement_usage/workbench.md:47:3]
 46 │ sketch K() {
    · ───┬──
    ·    ╰── Within this sketch
 47 │   pub use std; // error
    ·   ─────┬─────
    ·        ╰── This use statement is not allowed
 48 │ } K();
    ╰────
  help: use statement is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_pub_use.log =========

﻿
-- Test --
        Test name: init_pub_use
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:46
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  46:   sketch K() { init(l:Length) { // warning
  47:     pub use std; // error
  48:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 47:3: Public use statement not available here
    ╭─[../books/tests/src/statement_usage/init.md:47:3]
 46 │ sketch K() { init(l:Length) { // warning
 47 │   pub use std; // error
    ·   ─────┬─────
    ·        ╰── Public use statement not available here
 48 │ } } K(1cm);
    ╰────
  ⚠ warning: 46:19: Unused local l.
    ╭─[../books/tests/src/statement_usage/init.md:46:19]
 46 │ sketch K() { init(l:Length) { // warning
    ·                   ┬
    ·                   ╰── Unused local l.
 47 │   pub use std; // error
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/pre_init_workbench.log =========

﻿
-- Test --
        Test name: pre_init_workbench
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:6
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

   6:   sketch K() { 
   7:     sketch F() {} K();  // error
   8:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 7:10: Statement not allowed within workbenches
   ╭─[../books/tests/src/statement_usage/pre-init.md:7:10]
 6 │ sketch K() { 
 7 │   sketch F() {} K();  // error
   ·          ┬
   ·          ╰── Statement not allowed within workbenches
 8 │ init(l:Length) {} } K();
   ╰────
  × error: 7:17: Statement not allowed prior initializers
   ╭─[../books/tests/src/statement_usage/pre-init.md:7:17]
 6 │ sketch K() { 
   ·        ┬
   ·        ╰── Inside this sketch
 7 │   sketch F() {} K();  // error
   ·                 ─┬─
   ·                  ╰── This statement is not allowed
 8 │ init(l:Length) {} } K();
   · ──┬─
   ·   ╰── Before this initializer
   ╰────
  × error: 7:10: Sketch is not allowed within sketch
   ╭─[../books/tests/src/statement_usage/pre-init.md:7:3]
 6 │ sketch K() { 
   · ───┬──
   ·    ╰── Within this sketch
 7 │   sketch F() {} K();  // error
   ·   ───┬──
   ·      ╰── This sketch is not allowed
 8 │ init(l:Length) {} } K();
   ╰────
  help: sketch is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/source_use.log =========

﻿
-- Test --
        Test name: source_use
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/source.md:30
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  30:   use std;

-- No Output --
-- Errors --
  ⚠ warning: 30:5: Unused global symbol std.
    ╭─[../books/tests/src/statement_usage/source.md:30:5]
 30 │ use std;
    ·     ─┬─
    ·      ╰── Unused global symbol std.
    ╰────
Unexpected warnings(s) which did occur in line(s): 30
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/init_assignment_const.log =========

﻿
-- Test --
        Test name: init_assignment_const
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:70
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  70:   sketch K() { init(l:Length) {
  71:     const B = l; // error
  72:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 71:3: Assignment statement not available here
    ╭─[../books/tests/src/statement_usage/init.md:71:3]
 70 │ sketch K() { init(l:Length) {
 71 │   const B = l; // error
    ·   ─────┬─────
    ·        ╰── Assignment statement not available here
 72 │ } } K(1cm);
    ╰────
  × error: 71:3: Symbol B not found.
    ╭─[../books/tests/src/statement_usage/init.md:71:3]
 70 │ sketch K() { init(l:Length) {
 71 │   const B = l; // error
    ·   ─────┬─────
    ·        ╰── Symbol B not found.
 72 │ } } K(1cm);
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_init.log =========

﻿
-- Test --
        Test name: module_init
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/module.md:30
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  30:   mod k {
  31:     init() { }  // error
  32:   }

-- No Output --
-- Errors --
  × error: 31:3: Init definition is not allowed within module
    ╭─[../books/tests/src/statement_usage/module.md:31:3]
 30 │ mod k {
    · ─┬─
    ·  ╰── Within this module
 31 │   init() { }  // error
    ·   ──┬─
    ·     ╰── This init definition is not allowed
 32 │ }
    ╰────
  help: init definition is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_expression.log =========

﻿
-- Test --
        Test name: module_expression
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/module.md:102
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

 102:   mod k {  // warning
 103:     1 + 2; // error
 104:   }

-- No Output --
-- Errors --
  × error: 103:3: Expression statement not available here
     ╭─[../books/tests/src/statement_usage/module.md:103:3]
 102 │ mod k {  // warning
 103 │   1 + 2; // error
     ·   ──┬──
     ·     ╰── Expression statement not available here
 104 │ }
     ╰────
  ⚠ warning: 102:5: Unused global symbol k.
     ╭─[../books/tests/src/statement_usage/module.md:102:5]
 102 │ mod k {  // warning
     ·     ┬
     ·     ╰── Unused global symbol k.
 103 │   1 + 2; // error
     ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_expression.log =========

﻿
-- Test --
        Test name: init_expression
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:102
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

 102:   sketch K() { init(l:Length) {
 103:     l + 2; // error
 104:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 103:3: Expression statement not available here
     ╭─[../books/tests/src/statement_usage/init.md:103:3]
 102 │ sketch K() { init(l:Length) {
 103 │   l + 2; // error
     ·   ──┬──
     ·     ╰── Expression statement not available here
 104 │ } } K(1cm);
     ╰────
  × error: 103:3: Quantity error: Invalid operation: `10mm` + `2` (try `2` + `10mm`)
  ╰─▶ Invalid operation: `10mm` + `2` (try `2` + `10mm`)
     ╭─[../books/tests/src/statement_usage/init.md:103:3]
 102 │ sketch K() { init(l:Length) {
 103 │   l + 2; // error
     ·   ──┬──
     ·     ╰── Quantity error: Invalid operation: `10mm` + `2` (try `2` + `10mm`)
 104 │ } } K(1cm);
     ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/body_assignment_var.log =========

﻿
-- Test --
        Test name: body_assignment_var
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/body.md:94
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  94:   {
  95:     a = 1;
  96:   }

-- No Output --
-- Errors --
  ⚠ warning: 95:3: Unused local a.
    ╭─[../books/tests/src/statement_usage/body.md:95:3]
 94 │ {
 95 │   a = 1;
    ·   ┬
    ·   ╰── Unused local a.
 96 │ }
    ╰────
Unexpected warnings(s) which did occur in line(s): 95
-- Model --
  Group (root) ->
    Group ->

Could not determine output type.
Nothing will be exported.
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/body_module.log =========

﻿
-- Test --
        Test name: body_module
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/body.md:14
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  14:   {
  15:     mod m {} // error
  16:   }

-- No Output --
-- Errors --
  × error: 15:7: Module statement not available here
    ╭─[../books/tests/src/statement_usage/body.md:15:7]
 14 │ {
 15 │   mod m {} // error
    ·       ┬
    ·       ╰── Module statement not available here
 16 │ }
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/function_assignment_var.log =========

﻿
-- Test --
        Test name: function_assignment_var
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/function.md:86
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  86:   fn f() {
  87:     a = 1;
  88:   } f();

-- No Output --
-- Errors --
  ⚠ warning: 87:3: Unused local a.
    ╭─[../books/tests/src/statement_usage/function.md:87:3]
 86 │ fn f() {
 87 │   a = 1;
    ·   ┬
    ·   ╰── Unused local a.
 88 │ } f();
    ╰────
Unexpected warnings(s) which did occur in line(s): 87
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/init_return.log =========

﻿
-- Test --
        Test name: init_return
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:54
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  54:   sketch K() { init(l:Length) {
  55:     return l; // error
  56:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 55:3: Return statement not available here
    ╭─[../books/tests/src/statement_usage/init.md:55:3]
 54 │ sketch K() { init(l:Length) {
 55 │   return l; // error
    ·   ────┬───
    ·       ╰── Return statement not available here
 56 │ } } K(1cm);
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/workbench_init.log =========

﻿
-- Test --
        Test name: workbench_init
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/workbench.md:30
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  30:   sketch K(x: Scalar) {
  31:     init() { x = 1; }
  32:   } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) workbench_init::K() ->
      - x = 1

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/workbench_assignment_prop.log =========

﻿
-- Test --
        Test name: workbench_assignment_prop
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/workbench.md:94
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  94:   sketch K() {
  95:     prop a = 1;
  96:   } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) workbench_assignment_prop::K() ->
      - a = 1

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/pre_init_if.log =========

﻿
-- Test --
        Test name: pre_init_if
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:62
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  62:   sketch K() { 
  63:     if std::math::PI == 3 { } // error
  64:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 63:3: Statement not allowed prior initializers
    ╭─[../books/tests/src/statement_usage/pre-init.md:63:3]
 62 │ sketch K() { 
    ·        ┬
    ·        ╰── Inside this sketch
 63 │   if std::math::PI == 3 { } // error
    ·   ─────────────────┬────────────────
    ·                    ╰── This statement is not allowed
 64 │ init(l:Length) {} } K();
    · ──┬─
    ·   ╰── Before this initializer
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_workbench.log =========

﻿
-- Test --
        Test name: init_workbench
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:6
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

   6:   sketch K() { init(l:Length) { // warning
   7:     sketch F() {} // error
   8:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 7:10: sketch statement not available here
   ╭─[../books/tests/src/statement_usage/init.md:7:10]
 6 │ sketch K() { init(l:Length) { // warning
 7 │   sketch F() {} // error
   ·          ┬
   ·          ╰── sketch statement not available here
 8 │ } } K(1cm);
   ╰────
  ⚠ warning: 6:19: Unused local l.
   ╭─[../books/tests/src/statement_usage/init.md:6:19]
 6 │ sketch K() { init(l:Length) { // warning
   ·                   ┬
   ·                   ╰── Unused local l.
 7 │   sketch F() {} // error
   ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_assignment_var.log =========

﻿
-- Test --
        Test name: module_assignment_var
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/module.md:86
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  86:   mod k {
  87:     a = 1; // error
  88:   }

-- No Output --
-- Errors --
  × error: 87:3: Assigment is not allowed within module
    ╭─[../books/tests/src/statement_usage/module.md:87:3]
 86 │ mod k {
    · ─┬─
    ·  ╰── Within this module
 87 │   a = 1; // error
    ·   ──┬──
    ·     ╰── This assigment is not allowed
 88 │ }
    ╰────
  help: assigment is only allowed within source root, module definition, workbench definition or function definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/body_assignment_pub.log =========

﻿
-- Test --
        Test name: body_assignment_pub
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/body.md:86
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  86:   {
  87:     pub p = 1; // error
  88:   }

-- No Output --
-- Errors --
  × error: 87:3: Assignment statement not available here
    ╭─[../books/tests/src/statement_usage/body.md:87:3]
 86 │ {
 87 │   pub p = 1; // error
    ·   ────┬────
    ·       ╰── Assignment statement not available here
 88 │ }
    ╰────
  × error: 87:3: Symbol p not found.
    ╭─[../books/tests/src/statement_usage/body.md:87:3]
 86 │ {
 87 │   pub p = 1; // error
    ·   ────┬────
    ·       ╰── Symbol p not found.
 88 │ }
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/function_pub_use.log =========

﻿
-- Test --
        Test name: function_pub_use
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/function.md:46
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  46:   fn f() {
  47:     pub use std; // error
  48:   } f();

-- No Output --
-- Errors --
  × error: 47:3: Use statement is not allowed within function
    ╭─[../books/tests/src/statement_usage/function.md:47:3]
 46 │ fn f() {
    · ─┬
    ·  ╰── Within this function
 47 │   pub use std; // error
    ·   ─────┬─────
    ·        ╰── This use statement is not allowed
 48 │ } f();
    ╰────
  help: use statement is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/body_pub_use.log =========

﻿
-- Test --
        Test name: body_pub_use
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/body.md:46
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  46:   {
  47:     pub use std; // error
  48:   }

-- No Output --
-- Errors --
  × error: 47:3: Public use statement not available here
    ╭─[../books/tests/src/statement_usage/body.md:47:3]
 46 │ {
 47 │   pub use std; // error
    ·   ─────┬─────
    ·        ╰── Public use statement not available here
 48 │ }
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/pre_init_expression.log =========

﻿
-- Test --
        Test name: pre_init_expression
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:102
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

 102:   sketch K() { 
 103:     1 + 2; // error
 104:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 103:3: Statement not allowed prior initializers
     ╭─[../books/tests/src/statement_usage/pre-init.md:103:3]
 102 │ sketch K() { 
     ·        ┬
     ·        ╰── Inside this sketch
 103 │   1 + 2; // error
     ·   ──┬──
     ·     ╰── This statement is not allowed
 104 │ init(l:Length) {} } K();
     · ──┬─
     ·   ╰── Before this initializer
     ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/function_assignment_prop.log =========

﻿
-- Test --
        Test name: function_assignment_prop
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/function.md:94
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  94:   fn f() {
  95:     prop a = 1; // error
  96:   } f();

-- No Output --
-- Errors --
  × error: 95:3: Property assigment is not allowed within function
    ╭─[../books/tests/src/statement_usage/function.md:95:3]
 94 │ fn f() {
    · ─┬
    ·  ╰── Within this function
 95 │   prop a = 1; // error
    ·   ─────┬────
    ·        ╰── This property assigment is not allowed
 96 │ } f();
    ╰────
  help: property assigment is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/pre_init_module.log =========

﻿
-- Test --
        Test name: pre_init_module
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:14
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  14:   sketch K() { 
  15:     mod m {}   // error
  16:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 15:7: Statement not allowed within workbenches
    ╭─[../books/tests/src/statement_usage/pre-init.md:15:7]
 14 │ sketch K() { 
 15 │   mod m {}   // error
    ·       ┬
    ·       ╰── Statement not allowed within workbenches
 16 │ init(l:Length) {} } K();
    ╰────
  × error: 15:7: Module definition is not allowed within sketch
    ╭─[../books/tests/src/statement_usage/pre-init.md:15:3]
 14 │ sketch K() { 
    · ───┬──
    ·    ╰── Within this sketch
 15 │   mod m {}   // error
    ·   ─┬─
    ·    ╰── This module definition is not allowed
 16 │ init(l:Length) {} } K();
    ╰────
  help: module definition is only allowed within source root or module
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/workbench_assignment_pub.log =========

﻿
-- Test --
        Test name: workbench_assignment_pub
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/workbench.md:102
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

 102:   sketch K() {
 103:     pub a = 1; // error
 104:   } K();

-- No Output --
-- Errors --
  × error: 103:3: Public constant assigment is not allowed within sketch
     ╭─[../books/tests/src/statement_usage/workbench.md:103:3]
 102 │ sketch K() {
     · ───┬──
     ·    ╰── Within this sketch
 103 │   pub a = 1; // error
     ·   ────┬────
     ·       ╰── This public constant assigment is not allowed
 104 │ } K();
     ╰────
  help: public constant assigment is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/pre_init_function.log =========

﻿
-- Test --
        Test name: pre_init_function
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:22
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  22:   sketch K() { 
  23:     fn f() {} f();   // error
  24:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 23:6: Statement not allowed prior initializers
    ╭─[../books/tests/src/statement_usage/pre-init.md:23:6]
 22 │ sketch K() { 
    ·        ┬
    ·        ╰── Inside this sketch
 23 │   fn f() {} f();   // error
    ·      ┬
    ·      ╰── This statement is not allowed
 24 │ init(l:Length) {} } K();
    · ──┬─
    ·   ╰── Before this initializer
    ╰────
  × error: 23:13: Statement not allowed prior initializers
    ╭─[../books/tests/src/statement_usage/pre-init.md:23:13]
 22 │ sketch K() { 
    ·        ┬
    ·        ╰── Inside this sketch
 23 │   fn f() {} f();   // error
    ·             ─┬─
    ·              ╰── This statement is not allowed
 24 │ init(l:Length) {} } K();
    · ──┬─
    ·   ╰── Before this initializer
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/workbench_workbench.log =========

﻿
-- Test --
        Test name: workbench_workbench
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/workbench.md:6
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

   6:   sketch K() {
   7:     sketch F() {} F(); // error
   8:   } K();

-- No Output --
-- Errors --
  × error: 7:10: Sketch is not allowed within sketch
   ╭─[../books/tests/src/statement_usage/workbench.md:7:3]
 6 │ sketch K() {
   · ───┬──
   ·    ╰── Within this sketch
 7 │   sketch F() {} F(); // error
   ·   ───┬──
   ·      ╰── This sketch is not allowed
 8 │ } K();
   ╰────
  help: sketch is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_assignment_prop.log =========

﻿
-- Test --
        Test name: init_assignment_prop
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:94
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  94:   sketch K() { init(l:Length) {
  95:     prop a = l; // error
  96:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 95:3: Assignment statement not available here
    ╭─[../books/tests/src/statement_usage/init.md:95:3]
 94 │ sketch K() { init(l:Length) {
 95 │   prop a = l; // error
    ·   ─────┬────
    ·        ╰── Assignment statement not available here
 96 │ } } K(1cm);
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/source_assignment_prop.log =========

﻿
-- Test --
        Test name: source_assignment_prop
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/source.md:72
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  72:   prop a = 1;  // error

-- No Output --
-- Errors --
  × error: 72:1: Property assigment is not allowed at source root
    ╭─[../books/tests/src/statement_usage/source.md:72:1]
 72 │ prop a = 1;  // error
    · ─────┬────
    ·      ╰── This property assigment is not allowed here
    ╰────
  help: property assigment is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_if.log =========

﻿
-- Test --
        Test name: module_if
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/module.md:62
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  62:   mod k {
  63:     if std::math::PI == 3 { __builtin::geo2d::Circle(radius=1); }  // error
  64:   }

-- No Output --
-- Errors --
  × error: 63:3: If statement is not allowed within module
    ╭─[../books/tests/src/statement_usage/module.md:63:3]
 62 │ mod k {
    · ─┬─
    ·  ╰── Within this module
 63 │   if std::math::PI == 3 { __builtin::geo2d::Circle(radius=1); }  // error
    ·   ───────────────────────────────────┬───────────────────────────────────
    ·                                      ╰── This if statement is not allowed
 64 │ }
    ╰────
  help: if statement is only allowed within source root, module definition, workbench definition or function definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/function_workbench.log =========

﻿
-- Test --
        Test name: function_workbench
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/function.md:6
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

   6:   fn f() {
   7:     sketch S() {} // error
   8:   } f();

-- No Output --
-- Errors --
  × error: 7:10: Sketch is not allowed within function
   ╭─[../books/tests/src/statement_usage/function.md:7:3]
 6 │ fn f() {
   · ─┬
   ·  ╰── Within this function
 7 │   sketch S() {} // error
   ·   ───┬──
   ·      ╰── This sketch is not allowed
 8 │ } f();
   ╰────
  help: sketch is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/pre_init_assignment_var.log =========

﻿
-- Test --
        Test name: pre_init_assignment_var
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:86
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  86:   sketch K() { 
  87:     a = 1; // error
  88:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 87:3: Statement not allowed prior initializers
    ╭─[../books/tests/src/statement_usage/pre-init.md:87:3]
 86 │ sketch K() { 
    ·        ┬
    ·        ╰── Inside this sketch
 87 │   a = 1; // error
    ·   ──┬──
    ·     ╰── This statement is not allowed
 88 │ init(l:Length) {} } K();
    · ──┬─
    ·   ╰── Before this initializer
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_expression_model.log =========

﻿
-- Test --
        Test name: init_expression_model
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:110
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

 110:   sketch K() { init(l:Length) {
 111:     __builtin::geo2d::Circle(radius=l); // error
 112:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 111:3: Expression statement not available here
     ╭─[../books/tests/src/statement_usage/init.md:111:3]
 110 │ sketch K() { init(l:Length) {
 111 │   __builtin::geo2d::Circle(radius=l); // error
     ·   ─────────────────┬────────────────
     ·                    ╰── Expression statement not available here
 112 │ } } K(1cm);
     ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/body_init.log =========

﻿
-- Test --
        Test name: body_init
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/body.md:30
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  30:   {
  31:     init() {} // error
  32:   }

-- No Output --
-- Errors --
  × error: 31:3: Init statement not available here
    ╭─[../books/tests/src/statement_usage/body.md:31:3]
 30 │ {
 31 │   init() {} // error
    ·   ─────────┬────────
    ·            ╰── Init statement not available here
 32 │ }
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/body_assignment_const.log =========

﻿
-- Test --
        Test name: body_assignment_const
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/body.md:78
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  78:   {
  79:     const B = 1; // error
  80:   }

-- No Output --
-- Errors --
  × error: 79:3: Assignment statement not available here
    ╭─[../books/tests/src/statement_usage/body.md:79:3]
 78 │ {
 79 │   const B = 1; // error
    ·   ─────┬─────
    ·        ╰── Assignment statement not available here
 80 │ }
    ╰────
  × error: 79:3: Symbol B not found.
    ╭─[../books/tests/src/statement_usage/body.md:79:3]
 78 │ {
 79 │   const B = 1; // error
    ·   ─────┬─────
    ·        ╰── Symbol B not found.
 80 │ }
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/function_module.log =========

﻿
-- Test --
        Test name: function_module
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/function.md:14
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  14:   fn f() {
  15:     mod m {} // error
  16:   } f();

-- No Output --
-- Errors --
  × error: 15:7: Module definition is not allowed within function
    ╭─[../books/tests/src/statement_usage/function.md:15:3]
 14 │ fn f() {
    · ─┬
    ·  ╰── Within this function
 15 │   mod m {} // error
    ·   ─┬─
    ·    ╰── This module definition is not allowed
 16 │ } f();
    ╰────
  help: module definition is only allowed within source root or module
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/workbench_marker.log =========

﻿
-- Test --
        Test name: workbench_marker
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/workbench.md:70
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  70:   sketch K() {
  71:     @input
  72:   } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) workbench_marker::K() ->
      InputPlaceholder ->

Export error: Render error: Invalid output type: Undetermined
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/source_init.log =========

﻿
-- Test --
        Test name: source_init
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/source.md:24
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  24:   init() {} // error

-- No Output --
-- Errors --
  × error: 24:1: Init definition is not allowed at source root
    ╭─[../books/tests/src/statement_usage/source.md:24:1]
 24 │ init() {} // error
    · ──┬─
    ·   ╰── This init definition is not allowed here
    ╰────
  help: init definition is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_function.log =========

﻿
-- Test --
        Test name: module_function
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/module.md:22
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  22:   mod k {
  23:     fn f() {}
  24:   }

-- No Output --
-- Errors --
  ⚠ warning: 22:5: Unused global symbol k.
    ╭─[../books/tests/src/statement_usage/module.md:22:5]
 22 │ mod k {
    ·     ┬
    ·     ╰── Unused global symbol k.
 23 │   fn f() {}
    ╰────
  ⚠ warning: 23:6: Unused global symbol f.
    ╭─[../books/tests/src/statement_usage/module.md:23:6]
 22 │ mod k {
 23 │   fn f() {}
    ·      ┬
    ·      ╰── Unused global symbol f.
 24 │ }
    ╰────
Unexpected warnings(s) which did occur in line(s): 22, 23
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/workbench_function.log =========

﻿
-- Test --
        Test name: workbench_function
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/workbench.md:22
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  22:   sketch K() {
  23:     fn f() {} f();
  24:   } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) workbench_function::K() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/function_function.log =========

﻿
-- Test --
        Test name: function_function
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/function.md:22
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  22:   fn f() {
  23:     fn f() {} // error
  24:   } f();

-- No Output --
-- Errors --
  × error: 23:6: Function definition is not allowed within function
    ╭─[../books/tests/src/statement_usage/function.md:23:6]
 22 │ fn f() {
    · ─┬
    ·  ╰── Within this function
 23 │   fn f() {} // error
    ·      ┬
    ·      ╰── This function definition is not allowed
 24 │ } f();
    ╰────
  help: function definition is only allowed within source root, module definition or workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_assignment_var.log =========

﻿
-- Test --
        Test name: init_assignment_var
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/init.md:86
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  86:   sketch K() { init(l:Length) {
  87:     a = l;
  88:   } } K(1cm);

-- No Output --
-- Errors --
  ⚠ warning: 87:3: Unused local a.
    ╭─[../books/tests/src/statement_usage/init.md:87:3]
 86 │ sketch K() { init(l:Length) {
 87 │   a = l;
    ·   ┬
    ·   ╰── Unused local a.
 88 │ } } K(1cm);
    ╰────
Unexpected warnings(s) which did occur in line(s): 87
-- Model --
  Group (root) ->
    Workpiece(sketch) init_assignment_var::K(l=10mm) ->

Export error: Render error: Nothing to render
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/workbench_module.log =========

﻿
-- Test --
        Test name: workbench_module
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/workbench.md:14
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  14:   sketch K() {
  15:     mod m {} // error
  16:   } K();

-- No Output --
-- Errors --
  × error: 15:7: Module definition is not allowed within sketch
    ╭─[../books/tests/src/statement_usage/workbench.md:15:3]
 14 │ sketch K() {
    · ───┬──
    ·    ╰── Within this sketch
 15 │   mod m {} // error
    ·   ─┬─
    ·    ╰── This module definition is not allowed
 16 │ } K();
    ╰────
  help: module definition is only allowed within source root or module
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/function_assignment_const.log =========

﻿
-- Test --
        Test name: function_assignment_const
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/function.md:70
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  70:   fn f() {
  71:     const B = 1; // error
  72:   } f();

-- No Output --
-- Errors --
  × error: 71:3: Constant assigment is not allowed within function
    ╭─[../books/tests/src/statement_usage/function.md:71:3]
 70 │ fn f() {
    · ─┬
    ·  ╰── Within this function
 71 │   const B = 1; // error
    ·   ─────┬─────
    ·        ╰── This constant assigment is not allowed
 72 │ } f();
    ╰────
  help: constant assigment is only allowed within source root, module definition or workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/pre_init_expression_model.log =========

﻿
-- Test --
        Test name: pre_init_expression_model
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:110
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

 110:   sketch K() { 
 111:     __builtin::geo2d::Circle(radius=1mm); // error
 112:   init(l:Length) {} }

-- No Output --
-- Errors --
  × error: 111:3: Statement not allowed prior initializers
     ╭─[../books/tests/src/statement_usage/pre-init.md:111:3]
 110 │ sketch K() { 
     ·        ┬
     ·        ╰── Inside this sketch
 111 │   __builtin::geo2d::Circle(radius=1mm); // error
     ·   ──────────────────┬─────────────────
     ·                     ╰── This statement is not allowed
 112 │ init(l:Length) {} }
     · ──┬─
     ·   ╰── Before this initializer
     ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_use.log =========

﻿
-- Test --
        Test name: module_use
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/module.md:38
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  38:   mod k {
  39:     use std::geo2d;
  40:   }

-- No Output --
-- Errors --
  ⚠ warning: 38:5: Unused global symbol k.
    ╭─[../books/tests/src/statement_usage/module.md:38:5]
 38 │ mod k {
    ·     ┬
    ·     ╰── Unused global symbol k.
 39 │   use std::geo2d;
    ╰────
  ⚠ warning: 39:7: Unused global symbol std::geo2d.
    ╭─[../books/tests/src/statement_usage/module.md:39:7]
 38 │ mod k {
 39 │   use std::geo2d;
    ·       ─────┬────
    ·            ╰── Unused global symbol std::geo2d.
 40 │ }
    ╰────
Unexpected warnings(s) which did occur in line(s): 38, 39
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/pre_init_use.log =========

﻿
-- Test --
        Test name: pre_init_use
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/pre-init.md:38
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  38:   sketch K() { 
  39:     use std;
  40:   init(l:Length) {} } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) pre_init_use::K() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/source_return.log =========

﻿
-- Test --
        Test name: source_return
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/source.md:42
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  42:   return 1;  // error

-- No Output --
-- Errors --
  × error: 42:1: Return statement is not allowed at source root
    ╭─[../books/tests/src/statement_usage/source.md:42:1]
 42 │ return 1;  // error
    · ────┬───
    ·     ╰── This return statement is not allowed here
    ╰────
  help: return statement is only allowed within function definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_assignment_pub.log =========

﻿
-- Test --
        Test name: init_assignment_pub
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:78
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  78:   sketch K() { init(l:Length) {
  79:     pub a = l; // error
  80:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 79:3: Assignment statement not available here
    ╭─[../books/tests/src/statement_usage/init.md:79:3]
 78 │ sketch K() { init(l:Length) {
 79 │   pub a = l; // error
    ·   ────┬────
    ·       ╰── Assignment statement not available here
 80 │ } } K(1cm);
    ╰────
  × error: 79:3: Symbol a not found.
    ╭─[../books/tests/src/statement_usage/init.md:79:3]
 78 │ sketch K() { init(l:Length) {
 79 │   pub a = l; // error
    ·   ────┬────
    ·       ╰── Symbol a not found.
 80 │ } } K(1cm);
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_workbench.log =========

﻿
-- Test --
        Test name: module_workbench
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/module.md:6
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

   6:   mod k {
   7:     sketch F() {}
   8:   }

-- No Output --
-- Errors --
  ⚠ warning: 6:5: Unused global symbol k.
   ╭─[../books/tests/src/statement_usage/module.md:6:5]
 6 │ mod k {
   ·     ┬
   ·     ╰── Unused global symbol k.
 7 │   sketch F() {}
   ╰────
  ⚠ warning: 7:10: Unused global symbol F.
   ╭─[../books/tests/src/statement_usage/module.md:7:10]
 6 │ mod k {
 7 │   sketch F() {}
   ·          ┬
   ·          ╰── Unused global symbol F.
 8 │ }
   ╰────
Unexpected warnings(s) which did occur in line(s): 6, 7
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/workbench_assignment_var.log =========

﻿
-- Test --
        Test name: workbench_assignment_var
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/workbench.md:86
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  86:   sketch K() {
  87:     a = 1;
  88:   } K();

-- No Output --
-- Errors --
  ⚠ warning: 87:3: Unused local a.
    ╭─[../books/tests/src/statement_usage/workbench.md:87:3]
 86 │ sketch K() {
 87 │   a = 1;
    ·   ┬
    ·   ╰── Unused local a.
 88 │ } K();
    ╰────
Unexpected warnings(s) which did occur in line(s): 87
-- Model --
  Group (root) ->
    Workpiece(sketch) workbench_assignment_var::K() ->

Export error: Render error: Nothing to render
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/pre_init_init.log =========

﻿
-- Test --
        Test name: pre_init_init
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/pre-init.md:30
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  30:   sketch K(x: Length) { 
  31:     init() { x=1; }
  32:   init(l:Length) {} } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) pre_init_init::K() ->
      - x = 1

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/pre_init_assignment_prop.log =========

﻿
-- Test --
        Test name: pre_init_assignment_prop
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/pre-init.md:94
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  94:   sketch K() {
  95:     prop a = 1; // error
  96:   init(l:Length) {} } K();

-- No Output --
-- Errors --
  × error: 95:3: Statement not allowed prior initializers
    ╭─[../books/tests/src/statement_usage/pre-init.md:95:3]
 94 │ sketch K() {
    ·        ┬
    ·        ╰── Inside this sketch
 95 │   prop a = 1; // error
    ·   ─────┬────
    ·        ╰── This statement is not allowed
 96 │ init(l:Length) {} } K();
    · ──┬─
    ·   ╰── Before this initializer
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/workbench_if.log =========

﻿
-- Test --
        Test name: workbench_if
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/workbench.md:62
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  62:   sketch K() {
  63:     if std::math::PI == 3 { }
  64:   } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) workbench_if::K() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/source_module.log =========

﻿
-- Test --
        Test name: source_module
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/source.md:12
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  12:   mod m {}

-- No Output --
-- Errors --
  ⚠ warning: 12:5: Unused global symbol m.
    ╭─[../books/tests/src/statement_usage/source.md:12:5]
 12 │ mod m {}
    ·     ┬
    ·     ╰── Unused global symbol m.
    ╰────
Unexpected warnings(s) which did occur in line(s): 12
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/workbench_expression.log =========

﻿
-- Test --
        Test name: workbench_expression
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/workbench.md:110
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

 110:   sketch K() {
 111:     1 + 2;
 112:   } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) workbench_expression::K() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/function_assignment_pub.log =========

﻿
-- Test --
        Test name: function_assignment_pub
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/function.md:78
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  78:   fn f() {
  79:     pub p = 1; // error
  80:   } f();

-- No Output --
-- Errors --
  × error: 79:3: Public constant assigment is not allowed within function
    ╭─[../books/tests/src/statement_usage/function.md:79:3]
 78 │ fn f() {
    · ─┬
    ·  ╰── Within this function
 79 │   pub p = 1; // error
    ·   ────┬────
    ·       ╰── This public constant assigment is not allowed
 80 │ } f();
    ╰────
  help: public constant assigment is only allowed within source root or module definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/workbench_return.log =========

﻿
-- Test --
        Test name: workbench_return
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/workbench.md:54
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  54:   sketch K() {
  55:     return 1; // error
  56:   } K();

-- No Output --
-- Errors --
  × error: 55:3: Return statement is not allowed within sketch
    ╭─[../books/tests/src/statement_usage/workbench.md:55:3]
 54 │ sketch K() {
    · ───┬──
    ·    ╰── Within this sketch
 55 │   return 1; // error
    ·   ────┬───
    ·       ╰── This return statement is not allowed
 56 │ } K();
    ╰────
  help: return statement is only allowed within function definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_assignment_prop.log =========

﻿
-- Test --
        Test name: module_assignment_prop
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/module.md:94
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  94:   mod k {
  95:     prop a = 1;  // error
  96:   }

-- No Output --
-- Errors --
  × error: 95:3: Property assigment is not allowed within module
    ╭─[../books/tests/src/statement_usage/module.md:95:3]
 94 │ mod k {
    · ─┬─
    ·  ╰── Within this module
 95 │   prop a = 1;  // error
    ·   ─────┬────
    ·        ╰── This property assigment is not allowed
 96 │ }
    ╰────
  help: property assigment is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/body_function.log =========

﻿
-- Test --
        Test name: body_function
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/body.md:22
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  22:   {
  23:     fn f() {} f(); // error
  24:   }

-- No Output --
-- Errors --
  × error: 23:6: Function statement not available here
    ╭─[../books/tests/src/statement_usage/body.md:23:6]
 22 │ {
 23 │   fn f() {} f(); // error
    ·      ┬
    ·      ╰── Function statement not available here
 24 │ }
    ╰────
  × error: 23:13: Symbol f not found.
    ╭─[../books/tests/src/statement_usage/body.md:23:13]
 22 │ {
 23 │   fn f() {} f(); // error
    ·             ─┬─
    ·              ╰── Symbol f not found.
 24 │ }
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_function.log =========

﻿
-- Test --
        Test name: init_function
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:22
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  22:   sketch K() { init(l:Length) { // warning
  23:     fn f() {} // error
  24:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 23:6: Function statement not available here
    ╭─[../books/tests/src/statement_usage/init.md:23:6]
 22 │ sketch K() { init(l:Length) { // warning
 23 │   fn f() {} // error
    ·      ┬
    ·      ╰── Function statement not available here
 24 │ } } K(1cm);
    ╰────
  ⚠ warning: 22:19: Unused local l.
    ╭─[../books/tests/src/statement_usage/init.md:22:19]
 22 │ sketch K() { init(l:Length) { // warning
    ·                   ┬
    ·                   ╰── Unused local l.
 23 │   fn f() {} // error
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_module.log =========

﻿
-- Test --
        Test name: init_module
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:14
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  14:   sketch K() { init(l:Length) { // warning
  15:     mod m {} // error
  16:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 15:7: Module statement not available here
    ╭─[../books/tests/src/statement_usage/init.md:15:7]
 14 │ sketch K() { init(l:Length) { // warning
 15 │   mod m {} // error
    ·       ┬
    ·       ╰── Module statement not available here
 16 │ } } K(1cm);
    ╰────
  ⚠ warning: 14:19: Unused local l.
    ╭─[../books/tests/src/statement_usage/init.md:14:19]
 14 │ sketch K() { init(l:Length) { // warning
    ·                   ┬
    ·                   ╰── Unused local l.
 15 │   mod m {} // error
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/init_init.log =========

﻿
-- Test --
        Test name: init_init
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/init.md:30
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  30:   sketch K() { init(l:Length) { // warning
  31:     init() {} // error
  32:   } } K(1cm);

-- No Output --
-- Errors --
  × error: 31:3: Init statement not available here
    ╭─[../books/tests/src/statement_usage/init.md:31:3]
 30 │ sketch K() { init(l:Length) { // warning
 31 │   init() {} // error
    ·   ─────────┬────────
    ·            ╰── Init statement not available here
 32 │ } } K(1cm);
    ╰────
  ⚠ warning: 30:19: Unused local l.
    ╭─[../books/tests/src/statement_usage/init.md:30:19]
 30 │ sketch K() { init(l:Length) { // warning
    ·                   ┬
    ·                   ╰── Unused local l.
 31 │   init() {} // error
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/module_pub_use.log =========

﻿
-- Test --
        Test name: module_pub_use
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/module.md:46
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  46:   mod k {
  47:     pub use std::geo2d;
  48:   }

-- No Output --
-- Errors --
  ⚠ warning: 46:5: Unused global symbol k.
    ╭─[../books/tests/src/statement_usage/module.md:46:5]
 46 │ mod k {
    ·     ┬
    ·     ╰── Unused global symbol k.
 47 │   pub use std::geo2d;
    ╰────
Unexpected warnings(s) which did occur in line(s): 46
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/function_init.log =========

﻿
-- Test --
        Test name: function_init
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/function.md:30
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  30:   fn f() {
  31:     init() {} // error
  32:   } f();

-- No Output --
-- Errors --
  × error: 31:3: Init definition is not allowed within function
    ╭─[../books/tests/src/statement_usage/function.md:31:3]
 30 │ fn f() {
    · ─┬
    ·  ╰── Within this function
 31 │   init() {} // error
    ·   ──┬─
    ·     ╰── This init definition is not allowed
 32 │ } f();
    ╰────
  help: init definition is only allowed within workbench definition
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/statement_usage/.test/workbench_use.log =========

﻿
-- Test --
        Test name: workbench_use
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/workbench.md:38
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  38:   sketch K() {
  39:     use std;
  40:   } K();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) workbench_use::K() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/module_module.log =========

﻿
-- Test --
        Test name: module_module
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/module.md:14
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  14:   mod k {
  15:     mod m {}
  16:   }

-- No Output --
-- Errors --
  ⚠ warning: 14:5: Unused global symbol k.
    ╭─[../books/tests/src/statement_usage/module.md:14:5]
 14 │ mod k {
    ·     ┬
    ·     ╰── Unused global symbol k.
 15 │   mod m {}
    ╰────
  ⚠ warning: 15:7: Unused global symbol m.
    ╭─[../books/tests/src/statement_usage/module.md:15:7]
 14 │ mod k {
 15 │   mod m {}
    ·       ┬
    ·       ╰── Unused global symbol m.
 16 │ }
    ╰────
Unexpected warnings(s) which did occur in line(s): 14, 15
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/statement_usage/.test/source_workbench.log =========

﻿
-- Test --
        Test name: source_workbench
  Expected result: ok
      Source file: ../books/tests/src/statement_usage/source.md:6
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

   6:   sketch F() {} F();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(sketch) source_workbench::F() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/statement_usage/.test/body_return.log =========

﻿
-- Test --
        Test name: body_return
  Expected result: fail
      Source file: ../books/tests/src/statement_usage/body.md:54
        Test path: ../books/tests/src/statement_usage/.test

-- Code --

  54:   {
  55:     return 1; // error
  56:   }

-- No Output --
-- Errors --
  × error: 55:3: Return statement not available here
    ╭─[../books/tests/src/statement_usage/body.md:55:3]
 54 │ {
 55 │   return 1; // error
    ·   ────┬───
    ·       ╰── Return statement not available here
 56 │ }
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/.test/value_declarations.log =========

﻿
-- Test --
        Test name: value_declarations
  Expected result: ok
      Source file: ../books/tests/src/value_declarations.md:18
        Test path: ../books/tests/src/.test

-- Code --

  18:   use std::debug::*;
  19:   
  20:   mod module {
  21:       
  22:       use std::debug::*;
  23:   
  24:       // private module variable
  25:       const value = 1;
  26:       // public module variable
  27:       pub pub_value = 2;
  28:   
  29:       pub mod pub_sub_module {
  30:           // pre-init code
  31:           use std::debug::*;
  32:   
  33:           // private module variable
  34:           const value = 3;
  35:           // public module variable
  36:           pub pub_value = 4;
  37:   
  38:           // private workbench
  39:           sketch PrivateWorkbench() {}
  40:   
  41:           // public workbench
  42:           pub sketch Workbench(param = 5) {
  43:               const sketch_local = 6;
  44:   
  45:               init(alt_param = 7) {
  46:                   init_local = 8;
  47:   
  48:                   assert_eq([super::value, 1]);
  49:                   assert_eq([super::pub_value, 2]);
  50:                   assert_eq([value, 3]);
  51:                   assert_eq([pub_value, 4]);
  52:                   assert_invalid(param);
  53:                   assert_eq([sketch_local, 6]);
  54:                   assert_eq([alt_param, 7]);
  55:                   assert_eq([init_local, 8]);
  56:   
  57:                   prop param = 5; // needed to compile
  58:               }
  59:   
  60:               // property of sketch
  61:               prop property = 9;
  62:   
  63:               // post init code
  64:               assert_eq([super::value,1]);
  65:               assert_eq([super::pub_value, 2]);
  66:               assert_eq([value, 3]);
  67:               assert_eq([pub_value, 4]);
  68:               assert_eq([param, 5]);
  69:               assert_eq([sketch_local, 6]);
  70:               assert_invalid(alt_param);
  71:               assert_invalid(init_local);
  72:               assert_eq([property, 9]);
  73:   
  74:               function();
  75:           }
  76:   
  77:           fn function(fn_param = 10) {
  78:               assert_eq([super::value, 1]);
  79:               assert_eq([super::pub_value, 2]);
  80:               assert_eq([value, 3]);
  81:               assert_eq([pub_value, 4]);
  82:               assert_invalid(param);
  83:               // assert_invalid(Workbench);
  84:               assert_eq([fn_param, 10]);
  85:   
  86:               return 0;
  87:           }
  88:       }
  89:   
  90:       pub fn function(fn_param = 11) {
  91:           assert_eq([value, 1]);
  92:           assert_eq([pub_value, 2]);
  93:           assert_invalid(pub_sub_module::value);
  94:           assert_eq([pub_sub_module::pub_value, 4]);
  95:           assert_invalid(Workbench);
  96:           assert_invalid(PrivateWorkbench);
  97:           assert_eq([fn_param, 11]);
  98:           
  99:           return 0;
 100:       }
 101:   }
 102:   
 103:   // source file code 
 104:   assert_invalid(module::value);
 105:   assert_eq([module::pub_value, 2]);
 106:   assert_invalid(module::pub_sub_module::value);
 107:   assert_eq([module::pub_sub_module::pub_value, 4]);
 108:   assert_eq([module::pub_sub_module::Workbench(p=5).property, 9]);
 109:   assert_invalid(module::pub_sub_module::PrivateWorkbench);
 110:   assert_eq([module::function(), 0]);

-- No Output --
-- Errors --
  ⚠ warning: 39:16: Unused global symbol PrivateWorkbench.
    ╭─[../books/tests/src/value_declarations.md:39:16]
 38 │         // private workbench
 39 │         sketch PrivateWorkbench() {}
    ·                ────────┬───────
    ·                        ╰── Unused global symbol PrivateWorkbench.
 40 │ 
    ╰────
Unexpected warnings(s) which did occur in line(s): 39
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/.test/symbol_doublet.log =========

﻿
-- Test --
        Test name: symbol_doublet
  Expected result: fail
      Source file: ../books/tests/src/symbols.md:6
        Test path: ../books/tests/src/.test

-- Code --

   6:   mod foo {
   7:       pub const A = 1mm;
   8:   }
   9:   
  10:   fn foo() -> Length { // error: Ambiguous identifiers
  11:       foo::A
  12:   }
  13:   
  14:   foo();

-- No Output --
-- Errors --
  × error: 10:4: Ambiguous identifier 'foo'
   ╭─[../books/tests/src/symbols.md:6:5]
 6 │ mod foo {
   ·     ─┬─
   ·      ╰── First usage of 'foo'
 7 │     pub const A = 1mm;
   ╰────
    ╭─[../books/tests/src/symbols.md:10:4]
  9 │ 
 10 │ fn foo() -> Length { // error: Ambiguous identifiers
    ·    ─┬─
    ·     ╰── Ambiguous usage of 'foo'
 11 │     foo::A
    ╰────
Evaluation aborted because of prior resolve errors!
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/.test/group.log =========

﻿
-- Test --
        Test name: group
  Expected result: ok
      Source file: ../books/tests/src/semicolon.md:60
        Test path: ../books/tests/src/.test

-- Code --

  60:   use std::geo2d::Circle;
  61:   use std::ops::translate;
  62:   
  63:   // group
  64:   { 
  65:       Circle(radius = 1mm); 
  66:       Circle(radius = 2mm); 
  67:   }

-- No Output --
-- Errors --
  ⚠ warning: 61:5: Unused global symbol std::ops::translate.
    ╭─[../books/tests/src/semicolon.md:61:5]
 60 │ use std::geo2d::Circle;
 61 │ use std::ops::translate;
    ·     ─────────┬─────────
    ·              ╰── Unused global symbol std::ops::translate.
 62 │ 
    ╰────
Unexpected warnings(s) which did occur in line(s): 61
-- Model --
  Group (root) ->
    Group ->
      Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=1mm) ->
        - center = (x=0mm, y=0mm)
        - radius = 1mm
        Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
          Primitive2D __builtin::geo2d::Circle(radius=1mm) ->
      Workpiece(sketch) std::geo2d::Circle(center=(x=0mm, y=0mm), radius=2mm) ->
        - center = (x=0mm, y=0mm)
        - radius = 2mm
        Transform __builtin::ops::translate(x=0mm, y=0mm, z=0mm) ->
          Primitive2D __builtin::geo2d::Circle(radius=2mm) ->

Export of "../books/tests/src/.test/group-out.svg" successful.
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/.test/sketch_with_body.log =========

﻿
-- Test --
        Test name: sketch_with_body
  Expected result: fail
      Source file: ../books/tests/src/semicolon.md:45
        Test path: ../books/tests/src/.test

-- Code --

  45:   use std::geo2d::Circle;
  46:   
  47:   Circle(radius = 2mm) { Circle(radius = 1mm); } // parse_error: sketch with body

-- Parse Error --
  × error: 48:22: Expected comment, attribute access, method call, tuple access, array access, '!', '^', 'xor', '|', '&', '*', '/', '+', '-', '<=', '>=', '<', '>', '==', '!=', 'or', 'and', semicolon
  │ or end of input
    ╭─[../books/tests/src/semicolon.md:48:22]
 47 │ 
 48 │ Circle(radius = 2mm) { Circle(radius = 1mm); } // parse_error: sketch with body
    ·                      ┬
    ·                      ╰── Expected comment, attribute access, method call, tuple access, array access, '!', '^', 'xor', '|', '&', '*', '/', '+', '-', '<=', '>=', '<', '>', '==', '!=', 'or', 'and', semicolon or end of input
    ╰────

-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/.test/array_helper_sort.log =========

﻿
-- Test --
        Test name: array_helper_sort
  Expected result: todo
      Source file: ../books/tests/src/array_helpers.md:52
        Test path: ../books/tests/src/.test

-- Code --

  52:   std::debug::assert_eq([ std::sore([3,1,2]), [1,2,3] ]);

-- No Output --
-- Errors --
  × error: 52:25: Symbol std::sore not found.
    ╭─[../books/tests/src/array_helpers.md:52:25]
 52 │ std::debug::assert_eq([ std::sore([3,1,2]), [1,2,3] ]);
    ·                         ─────────┬────────
    ·                                  ╰── Symbol std::sore not found.
    ╰────
  × error: 52:23: Array elements have different types: [<NO TYPE>, [Integer]]
    ╭─[../books/tests/src/array_helpers.md:52:23]
 52 │ std::debug::assert_eq([ std::sore([3,1,2]), [1,2,3] ]);
    ·                       ───────────────┬───────────────
    ·                                      ╰── Array elements have different types: [<NO TYPE>, [Integer]]
    ╰────
  × error: 52:23: Assertion failed: Invalid: <NO VALUE>
    ╭─[../books/tests/src/array_helpers.md:52:23]
 52 │ std::debug::assert_eq([ std::sore([3,1,2]), [1,2,3] ]);
    ·                       ───────────────┬───────────────
    ·                                      ╰── Assertion failed: Invalid: <NO VALUE>
    ╰────
Unexpected error(s) which did occur in line(s): 52
-- Test Result --
TODO

========= ./books/tests/book/.test/empty_op.log =========

﻿
-- Test --
        Test name: empty_op
  Expected result: fail
      Source file: ../books/tests/src/semicolon.md:53
        Test path: ../books/tests/src/.test

-- Code --

  53:   std::ops::translate(x = 3.0mm); // error: Cannot call operation without workpiece. 
  54:   {}.std::ops::translate(x = 3.0mm);  // warning: Calling operation on empty geometry

-- No Output --
-- Errors --
  × error: 53:1: Symbol std::ops::translate not found.
    ╭─[../books/tests/src/semicolon.md:53:1]
 53 │ std::ops::translate(x = 3.0mm); // error: Cannot call operation without workpiece. 
    · ───────────────┬──────────────
    ·                ╰── Symbol std::ops::translate not found.
 54 │ {}.std::ops::translate(x = 3.0mm);  // warning: Calling operation on empty geometry
    ╰────
  ⚠ warning: 54:2: This expression statement did not produce any model
    ╭─[../books/tests/src/semicolon.md:54:2]
 53 │ std::ops::translate(x = 3.0mm); // error: Cannot call operation without workpiece. 
 54 │ {}.std::ops::translate(x = 3.0mm);  // warning: Calling operation on empty geometry
    ·  ▲
    ·  ╰── This expression statement did not produce any model
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/.test/locals_unused.log =========

﻿
-- Test --
        Test name: locals_unused
  Expected result: ok
      Source file: ../books/tests/src/locals.md:6
        Test path: ../books/tests/src/.test

-- Code --

   6:   x = 1; // warning: unused local
   7:   y = 1;
   8:   std::print("{y}");

-- Output --
1

-- Errors --
  ⚠ warning: 6:1: Unused local x.
   ╭─[../books/tests/src/locals.md:6:1]
 6 │ x = 1; // warning: unused local
   · ┬
   · ╰── Unused local x.
 7 │ y = 1;
   ╰────
-- No Model --
-- Test Result --
OK

========= ./books/tests/book/.test/visibility.log =========

﻿
-- Test --
        Test name: visibility
  Expected result: ok
      Source file: ../books/tests/src/visibility.md:6
        Test path: ../books/tests/src/.test

-- Code --

   6:   mod my {
   7:       mod mod_private {
   8:           pub const_public = 1;
   9:           const const_private = 1;
  10:       }
  11:       pub mod mod_public {
  12:           pub const_public = 1;
  13:           const const_private = 1;
  14:       }
  15:   }
  16:   
  17:   __builtin::debug::assert_valid(my::mod_public::const_public);
  18:   __builtin::debug::assert_invalid(my::mod_public::const_private);
  19:   __builtin::debug::assert_invalid(my::mod_private::const_public);
  20:   __builtin::debug::assert_invalid(my::mod_private::const_private);

-- No Output --
-- Errors --
  ⚠ warning: 6:5: Unused global symbol my.
   ╭─[../books/tests/src/visibility.md:6:5]
 6 │ mod my {
   ·     ─┬
   ·      ╰── Unused global symbol my.
 7 │     mod mod_private {
   ╰────
  ⚠ warning: 7:9: Unused global symbol mod_private.
   ╭─[../books/tests/src/visibility.md:7:9]
 6 │ mod my {
 7 │     mod mod_private {
   ·         ─────┬─────
   ·              ╰── Unused global symbol mod_private.
 8 │         pub const_public = 1;
   ╰────
  ⚠ warning: 13:9: Unused global symbol const const_private = 1.
    ╭─[../books/tests/src/visibility.md:13:9]
 12 │         pub const_public = 1;
 13 │         const const_private = 1;
    ·         ───────────┬───────────
    ·                    ╰── Unused global symbol const const_private = 1.
 14 │     }
    ╰────
Unexpected warnings(s) which did occur in line(s): 6, 7, 13
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/.test/tuple_assignment_bundle.log =========

﻿
-- Test --
        Test name: tuple_assignment_bundle
  Expected result: todo
      Source file: ../books/tests/src/tuple_assignments.md:21
        Test path: ../books/tests/src/.test

-- Code --

  21:   (width, height) = [1,2]m;
  22:   assert_eq([width,1m]);
  23:   assert_eq([height,2m]);

-- Parse Error --
  × error: 22:17: Expected attribute access, method call, tuple access, array access, '!', '^', 'xor', '|', '&', '*', '/', '+', '-', '<=', '>=', '<', '>', '==', '!=', 'or', 'and', comment, semicolon
  │ or end of input
    ╭─[../books/tests/src/tuple_assignments.md:22:17]
 22 │ (width, height) = [1,2]m;
    ·                 ┬
    ·                 ╰── Expected attribute access, method call, tuple access, array access, '!', '^', 'xor', '|', '&', '*', '/', '+', '-', '<=', '>=', '<', '>', '==', '!=', 'or', 'and', comment, semicolon or end of input
 23 │ assert_eq([width,1m]);
    ╰────

-- Test Result --
TODO

========= ./books/tests/book/.test/auto_convert.log =========

﻿
-- Test --
        Test name: auto_convert
  Expected result: fail
      Source file: ../books/tests/src/auto_convert.md:6
        Test path: ../books/tests/src/.test

-- Code --

   6:   fn f( x: Scalar ) { _ = x; }
   7:   f(x=1);
   8:   f(x=[1]);
   9:   f(x="");    // error
  10:   f("");      // error
  11:   f(1.0);
  12:   f(1);
  13:   f([1.0]);
  14:   f([1]);
  15:   
  16:   fn g( x: Integer ) { _ = x; }
  17:   g(x=1.0);   // error
  18:   g(x="");    // error
  19:   g("");      // error
  20:   g(1.0);     // error
  21:   g([1.0]);   // error
  22:   g(1);
  23:   g([1]);
  24:   
  25:   fn h( x: String ) { _ = x; }
  26:   h(x=1.0);   // error
  27:   h(x="");
  28:   h(x=[""]);
  29:   h("");
  30:   h([""]);
  31:   h(1.0);     // error
  32:   h([1.0]);   // error

-- No Output --
-- Errors --
  × error: 9:3: Arguments match by identifier but have incompatible types: x: String != Scalar
    ╭─[../books/tests/src/auto_convert.md:9:3]
  8 │ f(x=[1]);
  9 │ f(x="");    // error
    ·   ──┬─
    ·     ╰── Arguments match by identifier but have incompatible types: x: String != Scalar
 10 │ f("");      // error
    ╰────
  × error: 10:4: Missing arguments: x
    ╭─[../books/tests/src/auto_convert.md:10:4]
  9 │ f(x="");    // error
 10 │ f("");      // error
    ·    ┬
    ·    ╰── Missing arguments: x
 11 │ f(1.0);
    ╰────
  × error: 17:3: Arguments match by identifier but have incompatible types: x: Scalar != Integer
    ╭─[../books/tests/src/auto_convert.md:17:3]
 16 │ fn g( x: Integer ) { _ = x; }
 17 │ g(x=1.0);   // error
    ·   ──┬──
    ·     ╰── Arguments match by identifier but have incompatible types: x: Scalar != Integer
 18 │ g(x="");    // error
    ╰────
  × error: 18:3: Arguments match by identifier but have incompatible types: x: String != Integer
    ╭─[../books/tests/src/auto_convert.md:18:3]
 17 │ g(x=1.0);   // error
 18 │ g(x="");    // error
    ·   ──┬─
    ·     ╰── Arguments match by identifier but have incompatible types: x: String != Integer
 19 │ g("");      // error
    ╰────
  × error: 19:4: Missing arguments: x
    ╭─[../books/tests/src/auto_convert.md:19:4]
 18 │ g(x="");    // error
 19 │ g("");      // error
    ·    ┬
    ·    ╰── Missing arguments: x
 20 │ g(1.0);     // error
    ╰────
  × error: 20:3: Missing arguments: x
    ╭─[../books/tests/src/auto_convert.md:20:3]
 19 │ g("");      // error
 20 │ g(1.0);     // error
    ·   ─┬─
    ·    ╰── Missing arguments: x
 21 │ g([1.0]);   // error
    ╰────
  × error: 21:3: Missing arguments: x
    ╭─[../books/tests/src/auto_convert.md:21:3]
 20 │ g(1.0);     // error
 21 │ g([1.0]);   // error
    ·   ──┬──
    ·     ╰── Missing arguments: x
 22 │ g(1);
    ╰────
  × error: 26:3: Arguments match by identifier but have incompatible types: x: Scalar != String
    ╭─[../books/tests/src/auto_convert.md:26:3]
 25 │ fn h( x: String ) { _ = x; }
 26 │ h(x=1.0);   // error
    ·   ──┬──
    ·     ╰── Arguments match by identifier but have incompatible types: x: Scalar != String
 27 │ h(x="");
    ╰────
  × error: 31:3: Missing arguments: x
    ╭─[../books/tests/src/auto_convert.md:31:3]
 30 │ h([""]);
 31 │ h(1.0);     // error
    ·   ─┬─
    ·    ╰── Missing arguments: x
 32 │ h([1.0]);   // error
    ╰────
  × error: 32:3: Missing arguments: x
    ╭─[../books/tests/src/auto_convert.md:32:3]
 31 │ h(1.0);     // error
 32 │ h([1.0]);   // error
    ·   ──┬──
    ·     ╰── Missing arguments: x
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/.test/multiplicity_tuple_array.log =========

﻿
-- Test --
        Test name: multiplicity_tuple_array
  Expected result: todo
      Source file: ../books/tests/src/tuple_matching.md:56
        Test path: ../books/tests/src/.test

-- Code --

  56:   r = std::geo2d::Rect(width = 2mm, height = 2mm);
  57:   
  58:   r.std::ops::translate([(x=-4mm, y=-4mm), (x=-4mm, y=4mm), (x=4mm, y=-4mm), (x=4mm, y=4mm)]);

-- No Output --
-- Errors --
  × error: 58:23: Workbench translate cannot find initialization for those arguments
    ╭─[../books/tests/src/tuple_matching.md:58:3]
 57 │ 
 58 │ r.std::ops::translate([(x=-4mm, y=-4mm), (x=-4mm, y=4mm), (x=4mm, y=-4mm), (x=4mm, y=4mm)]);
    ·   ────────────────────────────────────────────┬───────────────────────────────────────────
    ·                                               ╰── Got: translate( [(x=-4mm, y=-4mm), (x=-4mm, y=4mm), (x=4mm, y=-4mm), (x=4mm, y=4mm)] )
    ╰────
  help: Possible initializations:
        	translate( x = 0mm, y = 0mm, z = 0mm)
        	translate( distance: Length, angle: Angle)
Unexpected error(s) which did occur in line(s): 58
-- Test Result --
TODO

========= ./books/tests/book/.test/builtin_modules.log =========

﻿
-- Test --
        Test name: builtin_modules
  Expected result: ok
      Source file: ../books/tests/src/modules.md:6
        Test path: ../books/tests/src/.test

-- Code --

   6:   mod a {
   7:       pub mod b {
   8:           pub mod c {
   9:               pub part M1() {}
  10:           }
  11:       }
  12:   
  13:       pub part M2() {}
  14:   }
  15:   
  16:   a::b::c::M1();
  17:   a::M2();

-- No Output --
-- No Errors --
-- Model --
  Group (root) ->
    Workpiece(part) builtin_modules::a::b::c::M1() ->
    Workpiece(part) builtin_modules::a::M2() ->

Export error: Render error: Nothing to render
-- Test Result --
OK

========= ./books/tests/book/.test/tuple_match_variants.log =========

﻿
-- Test --
        Test name: tuple_match_variants
  Expected result: todo
      Source file: ../books/tests/src/tuple_matching.md:28
        Test path: ../books/tests/src/.test

-- Code --

  28:   fn f( x: Length, y: Length, z: Length ) {}
  29:   
  30:   // Every parameter given by name
  31:   f( x=1cm, y=2cm, z=3cm);
  32:   
  33:   // Parameters given by named tuple
  34:   f( (x=1cm, y=2cm, z=3cm) );
  35:   
  36:   // Parameters given by named tuple variable
  37:   p = (x=1cm, y=2cm, z=3cm);
  38:   f( p );
  39:   
  40:   // Parameters given by named tuple and a single value
  41:   f( (x=1cm, y=2cm), z=3cm );
  42:   f( y=2cm, (x=1cm, z=3cm) );
  43:   
  44:   // Parameters given by named tuple variable and a single value
  45:   q = (x=1cm, y=2cm);
  46:   f( q, z=3cm );

-- No Output --
-- Errors --
  ⚠ warning: 28:7: Unused local x.
    ╭─[../books/tests/src/tuple_matching.md:28:7]
 28 │ fn f( x: Length, y: Length, z: Length ) {}
    ·       ┬
    ·       ╰── Unused local x.
 29 │ 
    ╰────
  ⚠ warning: 28:18: Unused local y.
    ╭─[../books/tests/src/tuple_matching.md:28:18]
 28 │ fn f( x: Length, y: Length, z: Length ) {}
    ·                  ┬
    ·                  ╰── Unused local y.
 29 │ 
    ╰────
  ⚠ warning: 28:29: Unused local z.
    ╭─[../books/tests/src/tuple_matching.md:28:29]
 28 │ fn f( x: Length, y: Length, z: Length ) {}
    ·                             ┬
    ·                             ╰── Unused local z.
 29 │ 
    ╰────
  × error: 34:4: Missing arguments: x,y,z
    ╭─[../books/tests/src/tuple_matching.md:34:4]
 33 │ // Parameters given by named tuple
 34 │ f( (x=1cm, y=2cm, z=3cm) );
    ·    ──────────┬──────────
    ·              ╰── Missing arguments: x,y,z
 35 │ 
    ╰────
  × error: 38:4: Missing arguments: x,y,z
    ╭─[../books/tests/src/tuple_matching.md:38:4]
 37 │ p = (x=1cm, y=2cm, z=3cm);
 38 │ f( p );
    ·    ┬
    ·    ╰── Missing arguments: x,y,z
 39 │ 
    ╰────
  × error: 41:4: Missing arguments: x,y
    ╭─[../books/tests/src/tuple_matching.md:41:4]
 40 │ // Parameters given by named tuple and a single value
 41 │ f( (x=1cm, y=2cm), z=3cm );
    ·    ──────────┬──────────
    ·              ╰── Missing arguments: x,y
 42 │ f( y=2cm, (x=1cm, z=3cm) );
    ╰────
  × error: 42:4: Missing arguments: x,z
    ╭─[../books/tests/src/tuple_matching.md:42:4]
 41 │ f( (x=1cm, y=2cm), z=3cm );
 42 │ f( y=2cm, (x=1cm, z=3cm) );
    ·    ──────────┬──────────
    ·              ╰── Missing arguments: x,z
 43 │ 
    ╰────
  × error: 46:4: Missing arguments: x,y
    ╭─[../books/tests/src/tuple_matching.md:46:4]
 45 │ q = (x=1cm, y=2cm);
 46 │ f( q, z=3cm );
    ·    ────┬───
    ·        ╰── Missing arguments: x,y
    ╰────
Unexpected error(s) which did occur in line(s): 34, 38, 41, 42, 46
Unexpected warnings(s) which did occur in line(s): 28
-- Test Result --
TODO

========= ./books/tests/book/.test/argument_match_collision_init.log =========

﻿
-- Test --
        Test name: argument_match_collision_init
  Expected result: fail
      Source file: ../books/tests/src/argument_match.md:38
        Test path: ../books/tests/src/.test

-- Code --

  38:   sketch S( width: Length, height: Length ) {
  39:       init( size: Length ) { width=size; height=size; }
  40:       init( size: Length ) { width=size; height=size; }
  41:   }
  42:   
  43:   S(size=10cm); // error: short form cannot be used here because of ambiguity

-- No Output --
-- Errors --
  × error: 43:3: Workbench S has ambiguous initialization for those arguments
    ╭─[../books/tests/src/argument_match.md:43:1]
 42 │ 
 43 │ S(size=10cm); // error: short form cannot be used here because of ambiguity
    · ──────┬─────
    ·       ╰── Got: S( size = 100mm )
    ╰────
  help: Ambiguous initializations:
        	argument_match_collision_init::S::init(size: Length)
        	argument_match_collision_init::S::init(size: Length)
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/.test/reserved_keywords.log =========

﻿
-- Test --
        Test name: reserved_keywords
  Expected result: fail
      Source file: ../books/tests/src/reserved_keywords.md:6
        Test path: ../books/tests/src/.test

-- Code --

   6:   const assembly = 1; // error
   7:   
   8:   a = 1; // recovered 
   9:   
  10:   unit = 1; // error
  11:   
  12:   fn match() { // error
  13:   
  14:   }
  15:   
  16:   somefun(enum); // error
  17:   
  18:   struct asd { // error
  19:   
  20:   }
  21:   
  22:   a = 2; // recovered 
  23:   
  24:   unit foo; // error
  25:   
  26:   a = 3; // recovered
  27:   
  28:   a = material; // error

-- Parse Error --
  × error: 7:7: assembly is a reserved keyword and can't be used as an identifier
   ╭─[../books/tests/src/reserved_keywords.md:7:7]
 7 │ const assembly = 1; // error
   ·       ────┬───
   ·           ╰── assembly is a reserved keyword and can't be used as an identifier
 8 │ 
   ╰────

-- Parse Error --
  × error: 11:1: unit is a reserved keyword and can't be used as an identifier
    ╭─[../books/tests/src/reserved_keywords.md:11:1]
 10 │ 
 11 │ unit = 1; // error
    · ──┬─
    ·   ╰── unit is a reserved keyword and can't be used as an identifier
 12 │ 
    ╰────

-- Parse Error --
  × error: 13:4: match is a reserved keyword and can't be used as an identifier
    ╭─[../books/tests/src/reserved_keywords.md:13:4]
 12 │ 
 13 │ fn match() { // error
    ·    ──┬──
    ·      ╰── match is a reserved keyword and can't be used as an identifier
 14 │ 
    ╰────

-- Parse Error --
  × error: 17:9: enum is a reserved keyword and can't be used as an identifier
    ╭─[../books/tests/src/reserved_keywords.md:17:9]
 16 │ 
 17 │ somefun(enum); // error
    ·         ──┬─
    ·           ╰── enum is a reserved keyword and can't be used as an identifier
 18 │ 
    ╰────

-- Parse Error --
  × error: 19:1: struct is a reserved keyword
    ╭─[../books/tests/src/reserved_keywords.md:19:1]
 18 │ 
 19 │ struct asd { // error
    · ───┬──
    ·    ╰── struct is a reserved keyword
 20 │ 
    ╰────

-- Parse Error --
  × error: 25:1: unit is a reserved keyword
    ╭─[../books/tests/src/reserved_keywords.md:25:1]
 24 │ 
 25 │ unit foo; // error
    · ──┬─
    ·   ╰── unit is a reserved keyword
 26 │ 
    ╰────

-- Parse Error --
  × error: 29:5: material is a reserved keyword and can't be used as an identifier
    ╭─[../books/tests/src/reserved_keywords.md:29:5]
 28 │ 
 29 │ a = material; // error
    ·     ────┬───
    ·         ╰── material is a reserved keyword and can't be used as an identifier
    ╰────


========= ./books/tests/book/.test/use_statement_test.log =========

﻿
-- Test --
        Test name: use_statement_test
  Expected result: ok
      Source file: ../books/tests/src/use.md:56
        Test path: ../books/tests/src/.test

-- Code --

  56:   // use symbol `circle` in file `geo2d.µcad`
  57:   use std::geo2d::Circle;
  58:   // use all symbols in file `geo3d.µcad`
  59:   use std::geo3d::*;
  60:   // alias `bar` in `std/text/foo.µcad` into `baz`
  61:   use std::math::abs as baz;
  62:   // use print from `std/module.µcad`
  63:   use std::print;
  64:   // public use operation from `std/module.µcad`
  65:   pub use std::ops;
  66:   
  67:   // use debug from `std/module.µcad`
  68:   use std::debug;
  69:   debug::assert(true);
  70:   
  71:   part my_part3d() { Sphere(radius=1mm); }
  72:   part my_part2d() { Circle(radius=1mm); }
  73:   
  74:   x = my_part2d();
  75:   y = my_part3d();
  76:   z = baz(-1.0);

-- No Output --
-- Errors --
  ⚠ warning: 74:1: Unused local x.
    ╭─[../books/tests/src/use.md:74:1]
 73 │ 
 74 │ x = my_part2d();
    · ┬
    · ╰── Unused local x.
 75 │ y = my_part3d();
    ╰────
  ⚠ warning: 75:1: Unused local y.
    ╭─[../books/tests/src/use.md:75:1]
 74 │ x = my_part2d();
 75 │ y = my_part3d();
    · ┬
    · ╰── Unused local y.
 76 │ z = baz(-1.0);
    ╰────
  ⚠ warning: 76:1: Unused local z.
    ╭─[../books/tests/src/use.md:76:1]
 75 │ y = my_part3d();
 76 │ z = baz(-1.0);
    · ┬
    · ╰── Unused local z.
    ╰────
  ⚠ warning: 63:5: Unused global symbol std::print.
    ╭─[../books/tests/src/use.md:63:5]
 62 │ // use print from `std/module.µcad`
 63 │ use std::print;
    ·     ─────┬────
    ·          ╰── Unused global symbol std::print.
 64 │ // public use operation from `std/module.µcad`
    ╰────
Unexpected warnings(s) which did occur in line(s): 63, 74, 75, 76
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/.test/function_missing.log =========

﻿
-- Test --
        Test name: function_missing
  Expected result: todo_fail
      Source file: ../books/tests/src/function.md:68
        Test path: ../books/tests/src/.test

-- Code --

  68:   fn f(n: Scalar) { // error: not all paths return a value
  69:       if n > 3 {
  70:            n-1
  71:       }
  72:   }
  73:   use std::debug::*;
  74:   assert_eq([ f(1), 2 ]);
  75:   assert_eq([ f(4), 3 ]);

-- No Output --
-- Errors --
  × error: 74:11: Array elements have different types: [<NO TYPE>, Integer]
    ╭─[../books/tests/src/function.md:74:11]
 73 │ use std::debug::*;
 74 │ assert_eq([ f(1), 2 ]);
    ·           ─────┬─────
    ·                ╰── Array elements have different types: [<NO TYPE>, Integer]
 75 │ assert_eq([ f(4), 3 ]);
    ╰────
  × error: 74:11: Assertion failed: Invalid: <NO VALUE>
    ╭─[../books/tests/src/function.md:74:11]
 73 │ use std::debug::*;
 74 │ assert_eq([ f(1), 2 ]);
    ·           ─────┬─────
    ·                ╰── Assertion failed: Invalid: <NO VALUE>
 75 │ assert_eq([ f(4), 3 ]);
    ╰────
Expected error(s) which did not occur in line(s): 68
-- Test Result --
TODO (SHALL FAIL)

========= ./books/tests/book/.test/group_assignment.log =========

﻿
-- Test --
        Test name: group_assignment
  Expected result: ok
      Source file: ../books/tests/src/semicolon.md:73
        Test path: ../books/tests/src/.test

-- Code --

  73:   use std::geo2d::Circle;
  74:   use std::ops::translate;
  75:   
  76:   // assignment + group
  77:   a = { 
  78:       Circle(radius = 1mm); 
  79:       Circle(radius = 2mm); 
  80:   };

-- No Output --
-- Errors --
  ⚠ warning: 77:1: Unused local a.
    ╭─[../books/tests/src/semicolon.md:77:1]
 76 │ // assignment + group
 77 │ a = { 
    · ┬
    · ╰── Unused local a.
 78 │     Circle(radius = 1mm); 
    ╰────
  ⚠ warning: 74:5: Unused global symbol std::ops::translate.
    ╭─[../books/tests/src/semicolon.md:74:5]
 73 │ use std::geo2d::Circle;
 74 │ use std::ops::translate;
    ·     ─────────┬─────────
    ·              ╰── Unused global symbol std::ops::translate.
 75 │ 
    ╰────
Unexpected warnings(s) which did occur in line(s): 74, 77
-- No Model --
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/.test/method_call.log =========

﻿
-- Test --
        Test name: method_call
  Expected result: ok
      Source file: ../books/tests/src/method_call.md:6
        Test path: ../books/tests/src/.test

-- Code --

   6:   op scale() {}
   7:   sketch Sketch(scale: Scalar) { std::geo2d::Rect(size = scale * 40mm) }
   8:   Sketch(4.0);

-- No Output --
-- Errors --
  ⚠ warning: 6:4: Unused global symbol scale.
   ╭─[../books/tests/src/method_call.md:6:4]
 6 │ op scale() {}
   ·    ──┬──
   ·      ╰── Unused global symbol scale.
 7 │ sketch Sketch(scale: Scalar) { std::geo2d::Rect(size = scale * 40mm) }
   ╰────
Unexpected warnings(s) which did occur in line(s): 6
-- Model --
  Group (root) ->
    Workpiece(sketch) method_call::Sketch(scale=4) ->
      - scale = 4
      Workpiece(sketch) std::geo2d::Rect(size=160mm) ->
        - height = 160mm
        - width = 160mm
        - x = -80mm
        - y = -80mm
        Primitive2D __builtin::geo2d::Rect(height=160mm, width=160mm, x=-80mm, y=-80mm) ->

Export of "../books/tests/src/.test/method_call-out.svg" successful.
-- Test Result --
OK (BUT WARNINGS)

========= ./books/tests/book/.test/tuple_assignment.log =========

﻿
-- Test --
        Test name: tuple_assignment
  Expected result: todo
      Source file: ../books/tests/src/tuple_assignments.md:8
        Test path: ../books/tests/src/.test

-- Code --

   8:   (width, height) = (1m,2m);
   9:   // check values of width and height
  10:   assert_eq([width,1m]);
  11:   assert_eq([height,2m]);

-- Parse Error --
  × error: 9:17: Expected attribute access, method call, tuple access, array access, '!', '^', 'xor', '|', '&', '*', '/', '+', '-', '<=', '>=', '<', '>', '==', '!=', 'or', 'and', comment, semicolon
  │ or end of input
    ╭─[../books/tests/src/tuple_assignments.md:9:17]
  9 │ (width, height) = (1m,2m);
    ·                 ┬
    ·                 ╰── Expected attribute access, method call, tuple access, array access, '!', '^', 'xor', '|', '&', '*', '/', '+', '-', '<=', '>=', '<', '>', '==', '!=', 'or', 'and', comment, semicolon or end of input
 10 │ // check values of width and height
    ╰────

-- Test Result --
TODO

========= ./books/tests/book/.test/tuple_match.log =========

﻿
-- Test --
        Test name: tuple_match
  Expected result: todo
      Source file: ../books/tests/src/tuple_matching.md:10
        Test path: ../books/tests/src/.test

-- Code --

  10:   // Function with three parameters: x, y, and z
  11:   fn f( x: Length, y: Length, z: Length ) {}
  12:   
  13:   // Since we do not want to change x and y in the following statements,
  14:   // we prepare a tuple named plane:
  15:   plane = (x=1cm, y=2cm);
  16:   
  17:   // Then we pass plane to f() three times with different z values
  18:   f( plane, z=3cm);
  19:   f( plane, z=6cm);
  20:   f( plane, z=9cm);

-- No Output --
-- Errors --
  × error: 18:4: Missing arguments: x,y
    ╭─[../books/tests/src/tuple_matching.md:18:4]
 17 │ // Then we pass plane to f() three times with different z values
 18 │ f( plane, z=3cm);
    ·    ──────┬─────
    ·          ╰── Missing arguments: x,y
 19 │ f( plane, z=6cm);
    ╰────
  × error: 19:4: Missing arguments: x,y
    ╭─[../books/tests/src/tuple_matching.md:19:4]
 18 │ f( plane, z=3cm);
 19 │ f( plane, z=6cm);
    ·    ──────┬─────
    ·          ╰── Missing arguments: x,y
 20 │ f( plane, z=9cm);
    ╰────
  × error: 20:4: Missing arguments: x,y
    ╭─[../books/tests/src/tuple_matching.md:20:4]
 19 │ f( plane, z=6cm);
 20 │ f( plane, z=9cm);
    ·    ──────┬─────
    ·          ╰── Missing arguments: x,y
    ╰────
Unexpected error(s) which did occur in line(s): 18, 19, 20
-- Test Result --
TODO

========= ./books/tests/book/.test/sketch_with_empty_body.log =========

﻿
-- Test --
        Test name: sketch_with_empty_body
  Expected result: warn
      Source file: ../books/tests/src/semicolon.md:39
        Test path: ../books/tests/src/.test

-- Code --

  39:   {}.std::ops::translate(x = 5mm) // warning: Calling operation on empty geometry

-- No Output --
-- Errors --
  ⚠ warning: 39:2: This expression statement did not produce any model
    ╭─[../books/tests/src/semicolon.md:39:2]
 39 │ {}.std::ops::translate(x = 5mm) // warning: Calling operation on empty geometry
    ·  ▲
    ·  ╰── This expression statement did not produce any model
    ╰────
-- Model --
  Group (root) ->
    Workpiece(op) std::ops::translate(x=5mm, y=0mm, z=0mm) ->
      - x = 5mm
      - y = 0mm
      - z = 0mm
      Transform __builtin::ops::translate(x=5mm, y=0mm, z=0mm) ->
        Group ->

Could not determine output type.
Nothing will be exported.
-- Test Result --
OK

========= ./books/tests/book/.test/array_helper_reverse.log =========

﻿
-- Test --
        Test name: array_helper_reverse
  Expected result: todo
      Source file: ../books/tests/src/array_helpers.md:42
        Test path: ../books/tests/src/.test

-- Code --

  42:   std::debug::assert_eq([ std::count([1,2,3]), [3,2,1] ]);

-- No Output --
-- Errors --
  × error: 42:23: Array elements have different types: [Integer, [Integer]]
    ╭─[../books/tests/src/array_helpers.md:42:23]
 42 │ std::debug::assert_eq([ std::count([1,2,3]), [3,2,1] ]);
    ·                       ────────────────┬───────────────
    ·                                       ╰── Array elements have different types: [Integer, [Integer]]
    ╰────
  × error: 42:23: Assertion failed: Invalid: <NO VALUE>
    ╭─[../books/tests/src/array_helpers.md:42:23]
 42 │ std::debug::assert_eq([ std::count([1,2,3]), [3,2,1] ]);
    ·                       ────────────────┬───────────────
    ·                                       ╰── Assertion failed: Invalid: <NO VALUE>
    ╰────
Unexpected error(s) which did occur in line(s): 42
-- Test Result --
TODO

========= ./books/tests/book/.test/verify_error.log =========

﻿
-- Test --
        Test name: verify_error
  Expected result: fail
      Source file: ../books/tests/src/debug.md:30
        Test path: ../books/tests/src/.test

-- Code --

  30:   std::log::error("this should not have happened"); // error

-- No Output --
-- Errors --
  × error: 30:47: Builtin error: this should not have happened
    ╭─[../books/tests/src/debug.md:30:47]
 30 │ std::log::error("this should not have happened"); // error
    ·                                               ┬
    ·                                               ╰── Builtin error: this should not have happened
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/.test/verify_assert_fail.log =========

﻿
-- Test --
        Test name: verify_assert_fail
  Expected result: fail
      Source file: ../books/tests/src/debug.md:22
        Test path: ../books/tests/src/.test

-- Code --

  22:   std::debug::assert(false, "this assertion fails"); // error

-- No Output --
-- Errors --
  × error: 22:20: Assertion failed: this assertion fails
    ╭─[../books/tests/src/debug.md:22:20]
 22 │ std::debug::assert(false, "this assertion fails"); // error
    ·                    ──────────────┬──────────────
    ·                                  ╰── Assertion failed: this assertion fails
    ╰────
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/.test/argument_match_short_collision.log =========

﻿
-- Test --
        Test name: argument_match_short_collision
  Expected result: fail
      Source file: ../books/tests/src/argument_match.md:18
        Test path: ../books/tests/src/.test

-- Code --

  18:   sketch S( width: Length ) {
  19:       init( what: Length ) { width=what; }
  20:   }
  21:   
  22:   S(w=10cm); // error: short form cannot be used here because of ambiguity

-- No Output --
-- Errors --
  × error: 22:3: Workbench S has ambiguous initialization for those arguments
    ╭─[../books/tests/src/argument_match.md:22:1]
 21 │ 
 22 │ S(w=10cm); // error: short form cannot be used here because of ambiguity
    · ────┬────
    ·     ╰── Got: S( w = 100mm )
    ╰────
  help: Ambiguous initializations:
        	argument_match_short_collision::S(width: Length)
        	argument_match_short_collision::S::init(what: Length)
-- Test Result --
FAILS AS EXPECTED

========= ./books/tests/book/.test/tuple_assignment_convert.log =========

﻿
-- Test --
        Test name: tuple_assignment_convert
  Expected result: todo
      Source file: ../books/tests/src/tuple_assignments.md:31
        Test path: ../books/tests/src/.test

-- Code --

  31:   array = [1,2]m;
  32:   (width, height) = array;
  33:   tuple = (width, height);
  34:   
  35:   assert_eq([tuple,(1m,2m)]);
  36:   assert_eq([tuple.width,1m]);
  37:   assert_eq([tuple.height,2m]);

-- Parse Error --
  × error: 33:17: Expected attribute access, method call, tuple access, array access, '!', '^', 'xor', '|', '&', '*', '/', '+', '-', '<=', '>=', '<', '>', '==', '!=', 'or', 'and', comment, semicolon
  │ or end of input
    ╭─[../books/tests/src/tuple_assignments.md:33:17]
 32 │ array = [1,2]m;
 33 │ (width, height) = array;
    ·                 ┬
    ·                 ╰── Expected attribute access, method call, tuple access, array access, '!', '^', 'xor', '|', '&', '*', '/', '+', '-', '<=', '>=', '<', '>', '==', '!=', 'or', 'and', comment, semicolon or end of input
 34 │ tuple = (width, height);
    ╰────

-- Test Result --
TODO

========= ./books/tests/book/.test/argument_match_collision.log =========

﻿
-- Test --
        Test name: argument_match_collision
  Expected result: fail
      Source file: ../books/tests/src/argument_match.md:28
        Test path: ../books/tests/src/.test

-- Code --

  28:   sketch S( width: Length ) {
  29:       init( width: Length ) { width=width; }
  30:   }
  31:   
  32:   S(width=10cm); // error: short form cannot be used here because of ambiguity

-- No Output --
-- Errors --
  × error: 32:3: Workbench S has ambiguous initialization for those arguments
    ╭─[../books/tests/src/argument_match.md:32:1]
 31 │ 
 32 │ S(width=10cm); // error: short form cannot be used here because of ambiguity
    · ──────┬──────
    ·       ╰── Got: S( width = 100mm )
    ╰────
  help: Ambiguous initializations:
        	argument_match_collision::S(width: Length)
        	argument_match_collision::S::init(width: Length)
-- Test Result --
FAILS AS EXPECTED
